import{J as Y,a1 as H,a7 as Z,K as F,r as $,j as e,a3 as V}from"./index-bce90a6f.js";import{D as q}from"./Dropdown-f11f337d.js";import{t as P,P as Q,q as X}from"./MenuItem-7ec316c6.js";import{B as ee}from"./ButtonGroup-a61c2a6b.js";import{D as ae,a as ne,b as se,c as te}from"./DialogActions-87afa3b0.js";import{a as oe,b as U,c as J,T as re}from"./TableRow-906d13fb.js";import{T as ce}from"./TableContainer-266e35be.js";import{T as le}from"./TableHead-cab3dd43.js";import{S as E}from"./Stack-1afabe7d.js";import{F as ie}from"./FormControlLabel-d7f8bfb7.js";import{C as N}from"./Chip-9c950609.js";const B=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]}],de=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9"],L=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth","Consolidated"],G=7,I=(s=G)=>({matches:B[s].ladies.map(()=>-1),noMatch:B[s].ladies.map(()=>B[s].gents.map(()=>!1)),roundPairings:[]}),z=Y({key:"areYouTheOneAtom",default:JSON.parse(localStorage.getItem("are-you-the-one-atom")||"null")||I(),effects:[({onSet:s})=>{s(o=>{localStorage.setItem("are-you-the-one-atom",JSON.stringify(o))})}]}),D=Y({key:"aytoSeason",default:JSON.parse(localStorage.getItem("ayto-season-atom")||"null")||G,effects:[({onSet:s})=>{s(o=>{localStorage.setItem("ayto-season-atom",JSON.stringify(o))})}]}),he=H({key:"aytoSeasonSelector",get:({get:s})=>s(D),set:({set:s},o)=>{o instanceof Z||(s(D,o),s(z,I(o)))}}),ue=H({key:"aytoPlayerSelector",get:({get:s})=>{const o=s(D);return[...L],{...B[o],options:L}}}),W=s=>isNaN(s)?-1:s,pe=s=>{var S;const{options:o,onSelect:t,roundNumber:M,roundPairings:x,onBlackout:C,updateScore:A}=s,[c,w]=F(he),[u,p]=$.useState(W((S=x[M])==null?void 0:S.score)),m=d=>w(d),l=d=>{var n;p(W((n=x[d])==null?void 0:n.score)),t(d)},y=()=>{C(x[M].pairs),p(0)},i=()=>{p(u+1),A(u+1)},h=()=>{p(u-1),A(u-1)};return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em"},children:[e.jsx(q,{ariaLabel:"select season",value:c,options:de,onSelect:m}),e.jsx(q,{ariaLabel:"select matchup",value:M,options:o,onSelect:l}),M<o.length-2&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",color:"secondary",onClick:y,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",u]}),e.jsxs(ee,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(P,{"aria-label":"decrement score",onClick:h,children:"-"}),e.jsx(P,{"aria-label":"increment score",onClick:i,children:"+"})]})]})]})]})},me=({open:s,content:o,onMatch:t,onNoMatch:M,onCancel:x})=>e.jsxs(ae,{onClose:x,open:s,children:[e.jsx(ne,{children:"TB Result"}),e.jsxs(se,{children:["Are ",o," a perfect match?"]}),e.jsxs(te,{children:[e.jsx(P,{onClick:t,children:"Match"}),e.jsx(P,{onClick:M,color:"error",children:"No Match"}),e.jsx(P,{onClick:x,color:"warning",children:"Cancel"})]})]}),fe=s=>{const{gents:o,hist:t,ladies:M,matches:x,noMatch:C,options:A,roundNumber:c,roundPairings:w,updateMatch:u,updateNoMatch:p,updatePairs:m}=s,l=A.length===c+2,y=A.length===c+1,[i,h]=$.useState(!1),[S,d]=$.useState([-1,-1]),n=(f,a,b)=>()=>{var R;if(y)return;if(l){d([a,b]),h(!0);return}const T=(R=w[f])==null?void 0:R.pairs.indexOf(b);T!==-1&&m(f,T,-1),m(f,a,b)},r=()=>{h(!1)},g=()=>{const[f,a]=S;u(f,a),r()},j=()=>{const[f,a]=S;p(f,a),r()};return e.jsxs(oe,{children:[M.map((f,a)=>e.jsxs(U,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(J,{component:"th",scope:"row",children:f}),o.map((b,T)=>{var v,K,_;let R="outlined",k="primary";l?(C[a]&&C[a][T]||x[a]===T)&&(R="contained"):((v=w[c])==null?void 0:v.pairs[a])===T&&(R="contained"),C[a]&&C[a][T]&&(k="error"),x[a]===T&&(k="success");const O=t[a]&&((_=(K=t[a][T])==null?void 0:K.rounds)==null?void 0:_.length)||0;return y&&O>0&&(R="contained"),e.jsx(J,{sx:{padding:0,textAlign:"center"},children:e.jsx(P,{variant:R,color:k,onClick:n(c,a,T),children:y?O:`${f[0]}-${b[0]}`})},b)})]},`ayto-table-row-${f}`)),e.jsx(me,{open:i,content:`${M[S[0]]} & ${o[S[1]]}`,onCancel:r,onMatch:g,onNoMatch:j})]})},xe=({gents:s,...o})=>e.jsx(ce,{component:Q,children:e.jsxs(re,{"aria-label":"are you the one data entry table",children:[e.jsx(le,{children:e.jsxs(U,{children:[e.jsx(J,{children:"-"}),s.map(t=>e.jsx(J,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:t},t))]})}),e.jsx(fe,{gents:s,...o})]})}),ye=s=>{const{gents:o,ladies:t,matches:M,noMatch:x,roundPairings:C,hist:A,tempScore:c,calculatedEquations:w}=s,[u,p]=$.useState(!1),m=l=>{p(l.target.checked)};return e.jsxs("div",{children:[e.jsxs(E,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(ie,{control:e.jsx(X,{checked:u,onChange:m,name:"show-all"}),label:"Show All Couples"})]}),e.jsx(E,{spacing:1,direction:"row",flexWrap:"wrap",children:C.map(({pairs:l,score:y},i)=>{const h=[];let S=0,d=0;return l.forEach((n,r)=>{if(r<0||n<0||r===void 0||n===void 0)return;const g=A[r][n].rounds.length>1;let j=g?"primary":"default";if(u)x[r][n]&&(j="error"),M[r]===n&&(j="success");else if(x[r][n]||M[r]===n)return;const f=`${t[r]}-${o[n]}${g?` ${A[r][n].rounds.length}`:""} - ${A[r][n].odds}%`,a=e.jsx(N,{label:f,color:j},`eq-r${i}-l${r}-g${n}`);switch(j){case"success":d+=1,h.unshift(a);return;case"error":S+=1,h.push(a);return;case"primary":h.splice(d,0,a),d+=1;return;default:h.splice(h.length-S,0,a)}}),h.every(n=>n===null)?null:e.jsxs(E,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",i+1]}),h,e.jsx(N,{label:u?y:y-c[i],color:"warning"})]},`equation-${i}`)})}),w.length>0&&e.jsx("hr",{}),e.jsx(E,{spacing:1,direction:"row",flexWrap:"wrap",children:w.map(({pairs:l,score:y},i)=>e.jsxs(E,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",i+1]}),l.map((h,S)=>e.jsx(N,{label:`${t[S]}-${o[h]} ${A[S][h].rounds.length} - ${A[S][h].odds}%`,color:"primary"},`eq-calc-l${S}-g${h}`)),e.jsx(N,{label:`max ${y}`,color:"warning"})]},`equation-${i}`))})]})},Se=(s,o,t,M)=>{const x=[],C=[],A=[];M.forEach(({pairs:u},p)=>{C[p]=0,A[p]=s,u.forEach((m,l)=>{(l<0||m<0||t[l][m])&&(A[p]-=1),o[l]===m&&(C[p]+=1,A[p]-=1),!x[l]&&(x[l]=[]),!x[l][m]&&(x[l][m]={odds:0,oddsWeight:0,rounds:[]}),x[l][m].rounds.push(p)})});const c={};M.forEach(({pairs:u,score:p},m)=>{u.forEach((l,y)=>{const i=x[y][l];if(t[y][l])return;if(o[y]===l){i.odds=100;return}const h=A[m]?(p-C[m])*100/A[m]:0;if(i.oddsWeight===0?i.odds=Math.floor(h):!h||!i.odds?i.odds=0:i.odds=Math.floor((i.odds*i.oddsWeight+h)/(i.oddsWeight+1)),i.oddsWeight+=1,i.rounds.length<2)return;const S=[i.rounds.reduce((d,n)=>d+n.toString(),"")];for(let d=m+1;d<i.rounds.length;d+=1)S.push(`${i.rounds[m]}${i.rounds[d]}`);S.forEach(d=>{!c[d]&&(c[d]={couples:[],score:p});let n=!0;c[d].couples.forEach(([r,g])=>{n=n&&r!==y&&g!==l}),n&&c[d].couples.push([y,l]),c[d].score=Math.min(p-C[m],c[d].score)})})});const w=[];return Object.keys(c).forEach(u=>{if(c[u].couples.length>1&&c[u].couples.length>c[u].score){const p=[];c[u].couples.forEach(([l,y])=>{p[l]=y});let m=!1;w.forEach(({pairs:l,score:y},i)=>{let h=!0,S=!0;for(let d=0;d<l.length;d+=1)p[d]!==l[d]&&(p[d]?(h=!1,S=!1):h=!1);m=m||h||S&&c[u].score>=y,h&&(w[i].score=Math.min(y,c[u].score))}),!m&&w.push({pairs:p,score:c[u].score})}}),{hist:x,tempScore:C,calculatedEquations:w}},ge=()=>{const[{matches:s,noMatch:o,roundPairings:t},M]=F(z),{ladies:x,gents:C,options:A}=V(ue),[c,w]=$.useState(0),{hist:u,tempScore:p,calculatedEquations:m}=Se(x.length,s,o,t),l=n=>{w(n)},y=n=>{const r=t[c]?{...t[c]}:{pairs:[],score:0};r.score=n;const g=[...t];g[c]=r,M({matches:s,noMatch:o,roundPairings:g})},i=(n,r)=>{const g=o.map(j=>[...j]);!g[n]&&(g[n]=[]),g[n][r]=!g[n][r],M({matches:s,noMatch:g,roundPairings:t})},h=n=>{const r=o.map(f=>[...f]);n.forEach((f,a)=>{s[a]!==f&&!o[a][f]&&(!r[a]&&(r[a]=[]),r[a][f]=!0)});const g={...t[c],score:0},j=[...t];j[c]=g,M({matches:s,noMatch:r,roundPairings:j})},S=(n,r,g)=>{const j=t[n]?{...t[n],pairs:[...t[n].pairs]}:{pairs:[],score:0};j.pairs[r]=g;const f=[...t];f[c]=j,M({matches:s,noMatch:o,roundPairings:f})},d=(n,r)=>{const g=[...s],j=o.map(a=>[...a]);!j[n]&&(j[n]=[]),g[n]=r;for(let a=0;a<C.length;a+=1)j[n][a]=a!==r;for(let a=0;a<x.length;a+=1)!j[a]&&(j[a]=[]),j[a][r]=a!==n;const f=[...t];for(let a=0;a<A.length-2;a+=1)if(!t[a]||t[a].pairs[n]<0||t[a].pairs[n]===void 0){const b=f[a]?{...t[a],pairs:[...t[a].pairs]}:{pairs:[],score:1};b.pairs[n]=r,f[a]=b}M({matches:g,noMatch:j,roundPairings:f})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(pe,{onSelect:l,options:A,roundNumber:c,roundPairings:t,onBlackout:h,updateScore:y}),e.jsx("br",{}),e.jsx(xe,{gents:C,hist:u,ladies:x,matches:s,noMatch:o,options:A,roundNumber:c,roundPairings:t,updateMatch:d,updateNoMatch:i,updatePairs:S}),e.jsx(ye,{calculatedEquations:m,gents:C,hist:u,ladies:x,matches:s,noMatch:o,roundPairings:t,tempScore:p})]})},Ne=ge;export{Ne as default};
//# sourceMappingURL=index-328308c8.js.map
