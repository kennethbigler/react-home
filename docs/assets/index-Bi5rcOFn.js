import{j as e,a0 as Z,Z as y,_ as i,n as k,X as J,Y as K,f as z}from"./mui-vendor-DwHfRDFJ.js";import{r as T}from"./react-vendor-BmItGCZH.js";import{P as Q,p as H}from"./PlayerMenu-H0-wPUhr.js";import{c as N,b as ee,u as te,a as ne}from"./index-mUodCg_3.js";const D=T.memo(({sx:t})=>e.jsx(Z,{children:e.jsxs(y,{sx:{borderBottom:2},children:[e.jsx(i,{children:"Minimum Required for Bonus"}),e.jsx(i,{children:"How to Score"}),e.jsx(i,{sx:t,children:"Game Score"})]})}));D.displayName="Header";const E=T.memo(({topSum:t,finalTopSum:n,sx:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(y,{sx:{borderTop:2},children:[e.jsx(i,{colSpan:2,component:"th",scope:"row",children:"Total == 63"}),e.jsx(i,{sx:s,children:t})]}),e.jsxs(y,{children:[e.jsx(i,{component:"th",scope:"row",children:"Bonus if >= 63"}),e.jsx(i,{children:"Score 35"}),e.jsx(i,{sx:s,children:t%100>=63?35:0})]}),e.jsxs(y,{sx:{borderBottom:2},children:[e.jsx(i,{colSpan:2,component:"th",scope:"row",children:"Upper Half Total"}),e.jsx(i,{sx:s,children:n})]})]}));E.displayName="TopScores";const R=()=>(t,n)=>(t[n]?t[n]+=1:t[n]=1,t),$=(t,n)=>{const s=t.reduce(R(),{});let o=!1;return Object.values(s).forEach(c=>{c>=n&&(o=!0)}),o},se=t=>{const n=t.reduce(R(),{});let s=!1,o=!1;return Object.values(n).forEach(c=>{c>=3?s=!0:c>=2&&(o=!0)}),s&&o},A=(t,n)=>{const s=t.reduce(R(),{});let o=0;return[1,2,3,4,5,6].forEach(l=>{o<n&&(s[l]?o+=1:o=0)}),o>=n},oe=(t,n)=>Object.entries(t.reduce(R(),{})).reduce((s,[o,c])=>c===5&&n[Number(o)-1].score>=0?!0:s,!1),re=({bottom:t,values:n,showScoreButtons:s,getScoreButton:o,top:c,sx:l,topSum:f,finalTopSum:r})=>{const a=p=>n.reduce((h,w)=>(w===p&&(h[0]+=1,h[1]+=p),h),[0,0]),d=t[5].score>0&&$(n,5),b=(p,h,w,S)=>p>=0?p:s?o(h,d?w+100:w,!0,S):null;return e.jsxs(e.Fragment,{children:[c.map(({name:p,score:h},w)=>{const S=w+1,[B,g]=a(S),C=B>=1;return e.jsxs(y,{children:[e.jsx(i,{component:"th",scope:"row",children:`${p}: ${S},${S},${S} = ${S*3}`}),e.jsx(i,{children:`Add Only ${p}`}),e.jsx(i,{sx:l,children:b(h,C,g,w)})]},p)}),e.jsx(E,{topSum:f,finalTopSum:r,sx:l})]})},v="Sum of Dice",G=T.memo(({finalTopSum:t,bottomSum:n,sx:s})=>e.jsxs(e.Fragment,{children:[e.jsxs(y,{sx:{borderTop:2},children:[e.jsx(i,{colSpan:2,component:"th",scope:"row",children:"Lower Half Total"}),e.jsx(i,{sx:s,children:n})]}),e.jsxs(y,{children:[e.jsx(i,{colSpan:2,component:"th",scope:"row",children:"Upper Half Total"}),e.jsx(i,{sx:s,children:t})]}),e.jsxs(y,{sx:{borderBottom:2},children:[e.jsx(i,{colSpan:2,component:"th",scope:"row",children:"Grand Total"}),e.jsx(i,{sx:s,children:t+n})]})]}));G.displayName="BottomScores";const ce=t=>t.reduce((n,s)=>n+s,0),ae=(t,n)=>{switch(t){case 0:return $(n,3);case 1:return $(n,4);case 2:return se(n);case 3:return A(n,4);case 4:return A(n,5);case 5:return $(n,5);case 6:return!0;default:return console.error("Unexpected Value"),!1}},le=({values:t,showScoreButtons:n,getScoreButton:s,top:o,bottom:c,sx:l,finalTopSum:f,bottomSum:r})=>{const a=T.useCallback((d,b,p,h)=>d>=0?d:n?p&&oe(t,o)?s(!0,b+100,!1,h):s(ae(h,t),b,!1,h):null,[s,n,o,t]),u=T.useCallback(()=>{const d=c[5].score>0;return c.map((b,p)=>{const{name:h,hint:w,points:S,score:B}=b,g=S===v?ce(t):S;return e.jsxs(y,{children:[e.jsx(i,{component:"th",scope:"row",children:h}),e.jsx(i,{children:w}),e.jsx(i,{sx:l,children:a(B,g,d,p)})]},h)})},[c,a,l,t]);return e.jsxs(e.Fragment,{children:[u(),e.jsx(G,{bottomSum:r,finalTopSum:f,sx:l})]})},F={textAlign:"center"},ie=({bottom:t,bottomSum:n,finalTopSum:s,showScoreButtons:o,top:c,topSum:l,values:f,onTopScore:r,onBottomScore:a})=>{const u=T.useCallback((d,b,p,h)=>d?e.jsx(k,{color:"secondary",variant:"outlined",onClick:p?()=>r(b,h):()=>a(b,h),children:`Add ${b} Points`}):e.jsx(k,{color:"secondary",variant:"outlined",onClick:p?()=>r(0,h):()=>a(0,h),children:"0"}),[a,r]);return e.jsxs(J,{size:"small","aria-label":"yahtzee game table",children:[e.jsx(D,{sx:F}),e.jsxs(K,{children:[e.jsx(re,{finalTopSum:s,getScoreButton:u,showScoreButtons:o,sx:F,top:c,values:f,bottom:t,topSum:l}),e.jsx(le,{finalTopSum:s,getScoreButton:u,showScoreButtons:o,sx:F,top:c,values:f,bottom:t,bottomSum:n})]})]})},V=T.memo(({bestScore:t,lastScore:n,money:s,name:o})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-container",children:[e.jsx(z,{variant:"h2",component:"h1",children:"Yahtzee"}),e.jsx(Q,{})]}),e.jsxs("div",{className:"flex-container",children:[e.jsxs(z,{variant:"h4",component:"h2",children:[o,": $",s]}),e.jsx(z,{variant:"h4",children:`Best: ${t}`}),e.jsx(z,{variant:"h4",children:`Last: ${n}`})]})]}));V.displayName="Header";const de={display:"block",margin:"auto",width:320},he=({values:t,saved:n,roll:s,handleUnsave:o,handleSave:c,handleDiceRoll:l,getButtonText:f})=>e.jsxs("div",{className:"flex-container",children:[e.jsx(z,{variant:"h4",component:"h3",children:`Roll #${s}/3`}),e.jsxs("div",{style:de,children:[n.map((r,a)=>e.jsx(k,{variant:"contained",onClick:()=>o(a),children:r},a)),t.map((r,a)=>e.jsx(k,{color:"secondary",variant:"outlined",onClick:()=>c(a),children:r},a))]}),e.jsx(k,{onClick:l,variant:"contained",disabled:s===3,children:f(s)})]}),M=()=>({roll:0,values:[0,0,0,0,0],saved:[],turn:0,showScoreButtons:!1,topScores:[-1,-1,-1,-1,-1,-1],bottomScores:[-1,-1,-1,-1,-1,-1,-1]}),Y=ee("yahtzeeAtom",{...M(),bestScore:0,lastScore:0}),ue=N(t=>{const{topScores:n,bottomScores:s}=t(Y),{name:o}=t(H)[0];let c=0;const l=n.reduce((u,d)=>(d>=0&&(c+=1,u+=d),u),0),f=s.reduce((u,d)=>(d>=0&&(c+=1,u+=d),u),0);let r=l;l>=63&&(r+=35);const a=c>=13;return{topSum:l,bottomSum:f,finalTopSum:r,finish:a,name:o}}),me=N(t=>{const n=t(Y),{money:s}=t(H)[0];return{...n,money:s}},(t,n,{money:s,...o})=>{n(Y,o);const c=t(H),l=[...c];l[0]={...c[0],money:s},n(H,l)}),pe=()=>{const[t,n]=te(me);return{state:t,newGame:r=>n({...M(),lastScore:r,bestScore:r>t.bestScore?r:t.bestScore,money:t.money+Math.ceil(r/10)}),diceClick:(r,a)=>n({...t,values:r,saved:a}),updateTop:r=>n({...t,topScores:r,showScoreButtons:!1,roll:0,values:[0,0,0,0,0],saved:[]}),updateBottom:r=>n({...t,bottomScores:r,showScoreButtons:!1,roll:0,values:[0,0,0,0,0],saved:[]}),updateRoll:(r,a,u,d)=>n({...t,values:r,saved:a,roll:u,showScoreButtons:!0,money:d?t.money-25:t.money})}},xe=[{name:"Aces"},{name:"Twos"},{name:"Threes"},{name:"Fours"},{name:"Fives"},{name:"Sixes"}],je=[{name:"3 of a kind",hint:v,points:v},{name:"4 of a kind",hint:v,points:v},{name:"Full House",hint:"Score 25",points:25},{name:"Sm. Straight (4)",hint:"Score 30",points:30},{name:"Lg. Straight (5)",hint:"Score 40",points:40},{name:"Yahtzee",hint:"Score 50",points:50},{name:"Chance",hint:v,points:v}],fe=T.memo(()=>{const{state:t,diceClick:n,newGame:s,updateTop:o,updateBottom:c,updateRoll:l}=pe(),{topScores:f,bottomScores:r,values:a,saved:u,roll:d,showScoreButtons:b,bestScore:p,lastScore:h,money:w}=t,{topSum:S,bottomSum:B,finalTopSum:g,finish:C,name:P}=ne(ue),L=()=>{if(C){s(g+B);return}if(d>=3)return;const m=[...a],x=[...u];for(let j=0;j<m.length;j+=1)m[j]=Math.floor(Math.random()*6)+1;m.sort(),x.sort(),l(m,x,d+1,B+S===0&&d===0)},O=m=>{if(a[m]===0)return;const x=[...a],j=[...u];j.push(x.splice(m,1)[0]),j.sort(),n(x,j)},U=m=>{const x=[...a],j=[...u];x.push(j.splice(m,1)[0]),x.sort(),n(x,j)},I=T.useCallback(m=>{if(C)return"New Game";switch(m){case 0:return"First Roll";case 1:return"Second Roll";case 2:return"Last Roll";case 3:return"Score";default:return"Error"}},[C]),X=(m,x)=>{const j=[...f];j[x]=m,o(j)},_=(m,x)=>{const j=[...r];j[x]=m,c(j)},q=f.map((m,x)=>({...xe[x],score:m})),W=r.map((m,x)=>({...je[x],score:m}));return e.jsxs(e.Fragment,{children:[e.jsx(V,{bestScore:p,lastScore:h,money:w,name:P}),e.jsx("hr",{"aria-hidden":!0}),e.jsx(he,{values:a,saved:u,roll:d,handleUnsave:U,handleSave:O,handleDiceRoll:L,getButtonText:I}),e.jsx("hr",{"aria-hidden":!0}),e.jsx(z,{variant:"h4",children:`Total: ${g+B}`}),e.jsx(ie,{values:[...u,...a],bottom:W,top:q,onTopScore:X,onBottomScore:_,showScoreButtons:b,topSum:S,finalTopSum:g,bottomSum:B})]})});fe.displayName="Yahtzee";export{fe as default};
//# sourceMappingURL=index-Bi5rcOFn.js.map
