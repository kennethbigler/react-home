import{J as F,a1 as Y,a7 as Z,K as H,r as $,j as e,a3 as V}from"./index-cb293786.js";import{D as q}from"./Dropdown-1b33ea60.js";import{t as E,p as Q,P as X,q as ee}from"./MenuItem-f1629f13.js";import{D as ae,a as ne,b as se,c as te}from"./DialogActions-5d1d689b.js";import{a as oe,b as I,c as B,T as re}from"./TableRow-1f2d22f0.js";import{T as ce}from"./TableContainer-84ad10eb.js";import{T as le}from"./TableHead-90899a48.js";import{S as R}from"./Stack-f4e875d0.js";import{F as ie}from"./FormControlLabel-4a63d317.js";import{C as N}from"./Chip-712534d1.js";const J=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]}],de=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9"],L=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth","Consolidated"],U=7,G=(s=U)=>({matches:J[s].ladies.map(()=>-1),noMatch:J[s].ladies.map(()=>J[s].gents.map(()=>!1)),roundPairings:[]}),z=F({key:"areYouTheOneAtom",default:JSON.parse(localStorage.getItem("are-you-the-one-atom")||"null")||G(),effects:[({onSet:s})=>{s(r=>{localStorage.setItem("are-you-the-one-atom",JSON.stringify(r))})}]}),O=F({key:"aytoSeason",default:JSON.parse(localStorage.getItem("ayto-season-atom")||"null")||U,effects:[({onSet:s})=>{s(r=>{localStorage.setItem("ayto-season-atom",JSON.stringify(r))})}]}),he=Y({key:"aytoSeasonSelector",get:({get:s})=>s(O),set:({set:s},r)=>{r instanceof Z||(s(O,r),s(z,G(r)))}}),ue=Y({key:"aytoPlayerSelector",get:({get:s})=>{const r=s(O);return[...L],{...J[r],options:L}}}),W=s=>isNaN(s)?-1:s,pe=s=>{var d;const{options:r,onSelect:o,roundNumber:j,roundPairings:f,onBlackout:A,updateScore:M}=s,[c,T]=H(he),[g,x]=$.useState(W((d=f[j])==null?void 0:d.score)),p=h=>T(h),l=h=>{var t;x(W((t=f[h])==null?void 0:t.score)),o(h)},y=()=>{A(f[j].pairs),x(0)},i=h=>{x(parseInt(h.target.value,10)||0),M(parseInt(h.target.value,10))};return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em"},children:[e.jsx(q,{ariaLabel:"select season",value:c,options:de,onSelect:p}),e.jsx(q,{ariaLabel:"select matchup",value:j,options:r,onSelect:l}),j<r.length-2&&e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"outlined",color:"secondary",onClick:y,children:"Blackout"}),e.jsx(Q,{id:"score-input",label:"Score",variant:"outlined",type:"number",value:g,onChange:i})]})]})},me=({open:s,content:r,onMatch:o,onNoMatch:j,onCancel:f})=>e.jsxs(ae,{onClose:f,open:s,children:[e.jsx(ne,{children:"TB Result"}),e.jsxs(se,{children:["Are ",r," a perfect match?"]}),e.jsxs(te,{children:[e.jsx(E,{onClick:o,children:"Match"}),e.jsx(E,{onClick:j,color:"error",children:"No Match"}),e.jsx(E,{onClick:f,color:"warning",children:"Cancel"})]})]}),fe=s=>{const{gents:r,hist:o,ladies:j,matches:f,noMatch:A,options:M,roundNumber:c,roundPairings:T,updateMatch:g,updateNoMatch:x,updatePairs:p}=s,l=M.length===c+2,y=M.length===c+1,[i,d]=$.useState(!1),[h,t]=$.useState([-1,-1]),n=(u,a,b)=>()=>{var P;if(y)return;if(l){t([a,b]),d(!0);return}const w=(P=T[u])==null?void 0:P.pairs.indexOf(b);w!==-1&&p(u,w,-1),p(u,a,b)},m=()=>{d(!1)},S=()=>{const[u,a]=h;g(u,a),m()},C=()=>{const[u,a]=h;x(u,a),m()};return e.jsxs(oe,{children:[j.map((u,a)=>e.jsxs(I,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(B,{component:"th",scope:"row",children:u}),r.map((b,w)=>{var v,K,_;let P="outlined",D="primary";l?(A[a]&&A[a][w]||f[a]===w)&&(P="contained"):((v=T[c])==null?void 0:v.pairs[a])===w&&(P="contained"),A[a]&&A[a][w]&&(D="error"),f[a]===w&&(D="success");const k=o[a]&&((_=(K=o[a][w])==null?void 0:K.rounds)==null?void 0:_.length)||0;return y&&k>0&&(P="contained"),e.jsx(B,{sx:{padding:0,textAlign:"center"},children:e.jsx(E,{variant:P,color:D,onClick:n(c,a,w),children:y?k:`${u[0]}-${b[0]}`})},b)})]},`ayto-table-row-${u}`)),e.jsx(me,{open:i,content:`${j[h[0]]} & ${r[h[1]]}`,onCancel:m,onMatch:S,onNoMatch:C})]})},xe=({gents:s,...r})=>e.jsx(ce,{component:X,children:e.jsxs(re,{"aria-label":"are you the one data entry table",children:[e.jsx(le,{children:e.jsxs(I,{children:[e.jsx(B,{children:"-"}),s.map(o=>e.jsx(B,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:o},o))]})}),e.jsx(fe,{gents:s,...r})]})}),Se=s=>{const{gents:r,ladies:o,matches:j,noMatch:f,roundPairings:A,hist:M,tempScore:c,calculatedEquations:T}=s,[g,x]=$.useState(!1),p=l=>{x(l.target.checked)};return e.jsxs("div",{children:[e.jsxs(R,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(ie,{control:e.jsx(ee,{checked:g,onChange:p,name:"show-all"}),label:"Show All Couples"})]}),e.jsx(R,{spacing:1,direction:"row",flexWrap:"wrap",children:A.map(({pairs:l,score:y},i)=>{const d=[];let h=0;return l.forEach((t,n)=>{if(n<0||t<0||n===void 0||t===void 0)return;const m=M[n][t].rounds.length>1;let S=m?"primary":"default";if(g)f[n][t]&&(S="error"),j[n]===t&&(S="success");else if(f[n][t]||j[n]===t)return;const C=`${o[n]}-${r[t]}${m?` ${M[n][t].rounds.length}`:""} - ${M[n][t].odds}%`,u=e.jsx(N,{label:C,color:S},`eq-r${i}-l${n}-g${t}`);switch(S){case"success":d.unshift(u);return;case"error":h+=1,d.push(u);return;default:d.splice(d.length-h,0,u)}}),d.every(t=>t===null)?null:e.jsxs(R,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",i+1]}),d,e.jsx(N,{label:g?y:y-c[i],color:"warning"})]},`equation-${i}`)})}),T.length>0&&e.jsx("hr",{}),e.jsx(R,{spacing:1,direction:"row",flexWrap:"wrap",children:T.map(({pairs:l,score:y},i)=>e.jsxs(R,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",i+1]}),l.map((d,h)=>e.jsx(N,{label:`${o[h]}-${r[d]} ${M[h][d].rounds.length} - ${M[h][d].odds}%`,color:"primary"},`eq-calc-l${h}-g${d}`)),e.jsx(N,{label:`max ${y}`,color:"warning"})]},`equation-${i}`))})]})},ye=(s,r,o,j)=>{const f=[],A=[],M=[];j.forEach(({pairs:g},x)=>{A[x]=0,M[x]=s,g.forEach((p,l)=>{(l<0||p<0||o[l][p])&&(M[x]-=1),r[l]===p&&(A[x]+=1,M[x]-=1),!f[l]&&(f[l]=[]),!f[l][p]&&(f[l][p]={odds:0,oddsWeight:0,rounds:[]}),f[l][p].rounds.push(x)})});const c={};j.forEach(({pairs:g,score:x},p)=>{g.forEach((l,y)=>{const i=f[y][l];if(o[y][l])return;if(r[y]===l){i.odds=100;return}const d=M[p]?(x-A[p])*100/M[p]:0;if(i.oddsWeight===0?i.odds=Math.floor(d):!d||!i.odds?i.odds=0:i.odds=Math.floor((i.odds*i.oddsWeight+d)/(i.oddsWeight+1)),i.oddsWeight+=1,i.rounds.length<2)return;const h=[i.rounds.reduce((t,n)=>t+n.toString(),"")];for(let t=p+1;t<i.rounds.length;t+=1)h.push(`${i.rounds[p]}${i.rounds[t]}`);h.forEach(t=>{!c[t]&&(c[t]={couples:[],score:x});let n=!0;c[t].couples.forEach(([m,S])=>{n=n&&m!==y&&S!==l}),n&&c[t].couples.push([y,l]),c[t].score=Math.min(x-A[p],c[t].score)})})});const T=[];return Object.keys(c).forEach(g=>{if(c[g].couples.length>1&&c[g].couples.length>c[g].score){const x=[];c[g].couples.forEach(([l,y])=>{x[l]=y});let p=!1;T.forEach(({pairs:l,score:y},i)=>{let d=!0,h=!0;for(let t=0;t<l.length;t+=1)x[t]!==l[t]&&(x[t]?(d=!1,h=!1):d=!1);p=p||d||h&&c[g].score>=y,d&&(T[i].score=Math.min(y,c[g].score))}),!p&&T.push({pairs:x,score:c[g].score})}}),{hist:f,tempScore:A,calculatedEquations:T}},ge=()=>{const[{matches:s,noMatch:r,roundPairings:o},j]=H(z),{ladies:f,gents:A,options:M}=V(ue),[c,T]=$.useState(0),{hist:g,tempScore:x,calculatedEquations:p}=ye(f.length,s,r,o),l=n=>{T(n)},y=n=>{const m=o[c]?{...o[c]}:{pairs:[],score:0};m.score=n;const S=[...o];S[c]=m,j({matches:s,noMatch:r,roundPairings:S})},i=(n,m)=>{const S=r.map(C=>[...C]);!S[n]&&(S[n]=[]),S[n][m]=!S[n][m],j({matches:s,noMatch:S,roundPairings:o})},d=n=>{const m=r.map(u=>[...u]);n.forEach((u,a)=>{s[a]!==u&&!r[a][u]&&(!m[a]&&(m[a]=[]),m[a][u]=!0)});const S={...o[c],score:0},C=[...o];C[c]=S,j({matches:s,noMatch:m,roundPairings:C})},h=(n,m,S)=>{const C=o[n]?{...o[n],pairs:[...o[n].pairs]}:{pairs:[],score:0};C.pairs[m]=S;const u=[...o];u[c]=C,j({matches:s,noMatch:r,roundPairings:u})},t=(n,m)=>{const S=[...s],C=r.map(a=>[...a]);!C[n]&&(C[n]=[]),S[n]=m;for(let a=0;a<A.length;a+=1)C[n][a]=a!==m;for(let a=0;a<f.length;a+=1)!C[a]&&(C[a]=[]),C[a][m]=a!==n;const u=[...o];for(let a=0;a<M.length-2;a+=1)if(!o[a]||o[a].pairs[n]<0||o[a].pairs[n]===void 0){const b=u[a]?{...o[a],pairs:[...o[a].pairs]}:{pairs:[],score:1};b.pairs[n]=m,u[a]=b}j({matches:S,noMatch:C,roundPairings:u})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(pe,{onSelect:l,options:M,roundNumber:c,roundPairings:o,onBlackout:d,updateScore:y}),e.jsx("br",{}),e.jsx(xe,{gents:A,hist:g,ladies:f,matches:s,noMatch:r,options:M,roundNumber:c,roundPairings:o,updateMatch:t,updateNoMatch:i,updatePairs:h}),e.jsx(Se,{calculatedEquations:p,gents:A,hist:g,ladies:f,matches:s,noMatch:r,roundPairings:o,tempScore:x})]})},$e=ge;export{$e as default};
//# sourceMappingURL=index-59e79265.js.map
