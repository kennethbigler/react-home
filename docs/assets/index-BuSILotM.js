import{g as lt,b as ct,s as it,t as dt,r as h,e as ht,j as t,c as ut,f as mt,M as V,O as pt,A as R,B as X,P as xt}from"./index-CU8sobOX.js";import{d as W,m as gt}from"./DateHelper-b37KTdR-.js";import{G as A}from"./Grid2-DpXVUpeL.js";import{T as u,D as O,M as G}from"./Header-BGNfi7hJ.js";import{C as jt}from"./Card-D_O2GNOm.js";import{C as ft,a as U}from"./CardActionArea-DGlZ_iGN.js";import{C as Y}from"./CardContent-fgjM4FRw.js";import{D as Z,a as K,b as tt,c as et}from"./DialogTitle-Jwbo0SBq.js";import{F as _,I as z,S as L}from"./Select-D4zszyki.js";import{T as w}from"./TextField-By1kkt5p.js";import{B as M}from"./Button-CdxfLeDu.js";import{C as yt}from"./Chip-BR1poCNA.js";import{h as st,H as I,a as nt}from"./highcharts-react.min-CfXL9E_n.js";import"./useThemeProps-CO57GVQj.js";import"./isMuiElement-DslzYmVv.js";import"./useId-Dn5Ln3Gn.js";import"./useSlotProps-C1ck_29O.js";function St(e){return ct("MuiDialogContentText",e)}lt("MuiDialogContentText",["root"]);const kt=e=>{const{classes:s}=e,n=mt({root:["root"]},St,s);return{...s,...n}},Ct=it(u,{shouldForwardProp:e=>dt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),bt=h.forwardRef(function(s,o){const n=ht({props:s,name:"MuiDialogContentText"}),{children:a,className:l,...i}=n,c=kt(i);return t.jsx(Ct,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:i,className:ut(c.root,l),...n,classes:c})}),vt={},ot=V({key:"stockAtom",default:JSON.parse(localStorage.getItem("stock-atom")||"null")||vt,effects:[({onSet:e})=>{e(s=>{localStorage.setItem("stock-atom",JSON.stringify(s))})}]}),at=V({key:"compCalcAtom",default:JSON.parse(localStorage.getItem("comp-calc-atom")||"null")||[],effects:[({onSet:e})=>{e(s=>{localStorage.setItem("comp-calc-atom",JSON.stringify(s))})}]}),Dt=pt({key:"compCalcReadOnlyState",get:({get:e})=>{const s=e(at),o=e(ot),n={},a=s.map(({bonus:i,entryDate:c,grantDuration:r,grantQty:d,priceThen:j,salary:m,stockTick:p})=>{const x=o[p]||0,f=j*d/r;let C=0,g=0;const b=x*d/r,D=W(c);D.year+=r,n[p]||(n[p]=[]),f>0&&n[p].push({cs:f,csa:b,exp:D}),n[p].forEach(k=>{W(c).diff(k.exp,"days")<0&&(C+=k.cs,g+=k.csa)});const N=m+i+C,B=m+i+g,T=j*d,S=x*d;return{stock:C,stockAdj:g,total:N,totalAdj:B,grantThen:T,grantNow:S}});return a.map(({totalAdj:i,...c},r)=>{const d=r===0?0:i-a[r-1].totalAdj;return{totalAdj:i,netDiff:d,...c}})}}),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Tt=({compEntries:e,compCalcEntries:s,onClick:o})=>t.jsxs(A,{container:!0,spacing:1,children:[t.jsx(A,{size:12,children:t.jsx(u,{children:"*value computed from latest stock price above"})}),e.map((n,a)=>{const{entryDate:l,salary:i,bonus:c,stockTick:r,priceThen:d,grantDuration:j,grantQty:m}=n,{stock:p,stockAdj:x,total:f,totalAdj:C,netDiff:g,grantThen:b,grantNow:D}=s[a];return t.jsx(A,{size:{xs:12,md:6,lg:4,xl:3,xxl:e.length>4?2:void 0,xxxl:e.length>6?1:void 0},children:t.jsx(jt,{children:t.jsx(ft,{onClick:o(a),children:t.jsxs(A,{container:!0,children:[t.jsxs(A,{size:r?6:12,children:[t.jsx(U,{title:"Salary"}),t.jsxs(Y,{children:[t.jsxs(u,{children:["Date: ",W(l).format("MMMM Y")]}),t.jsxs(u,{children:["Salary: ",v.format(i)]}),t.jsxs(u,{children:["Bonus: ",v.format(c)]}),t.jsx(O,{"aria-hidden":!0}),t.jsxs(u,{children:["Stock: ",v.format(p)]}),t.jsxs(u,{children:["*Stock: ",v.format(x)]}),t.jsx(O,{"aria-hidden":!0}),t.jsxs(u,{children:["Total: ",v.format(f)]}),t.jsx(u,{sx:{display:"inline"},children:"*Total:"}),t.jsx(u,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(C)}),g!==0&&t.jsxs(t.Fragment,{children:[t.jsx(O,{"aria-hidden":!0}),t.jsx(u,{sx:{display:"inline"},children:"Net:"}),t.jsx(u,{color:g>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(g)})]})]})]}),r&&t.jsxs(A,{size:6,children:[t.jsx(U,{title:"Stock Grant"}),t.jsxs(Y,{children:[t.jsx(u,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(u,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:r}),m>0&&t.jsxs(t.Fragment,{children:[t.jsxs(u,{children:["Price: ",v.format(d)]}),t.jsxs(u,{children:["Grant Qty: ",m]}),t.jsxs(u,{children:["Duration: ",j," years"]}),t.jsx(O,{"aria-hidden":!0}),t.jsxs(u,{children:["Grant: ",v.format(b)]}),t.jsxs(u,{children:["*Grant: ",v.format(D)]})]})]})]})]})})})},`comp-calc-entry-${a}`)}).reverse()]}),F={variant:"standard",fullWidth:!0,margin:"dense"},At=new Date().getFullYear()-2e3,P=[];for(let e=0;e<=At;e+=1)P.push(2e3+e);P.reverse();const wt=({open:e,compEntry:s,onClose:o,addCompEntry:n})=>{const[a,l]=h.useState("1"),[i,c]=h.useState(P[0].toString()),[r,d]=h.useState(0),[j,m]=h.useState(0),[p,x]=h.useState(""),[f,C]=h.useState(0),[g,b]=h.useState(4),[D,N]=h.useState(0),B=()=>{l("1"),c(P[0].toString()),d(0),m(0),x(""),C(0),b(4),N(0)};h.useEffect(()=>{if(s){const{month:y,year:E}=W(s.entryDate);l((y+1).toString()),c(E.toString()),d(s.salary),m(s.bonus),x(s.stockTick),C(s.priceThen),b(s.grantDuration),N(s.grantQty)}else B()},[s,s==null?void 0:s.salary]);const T=y=>E=>y(parseFloat(E.target.value)),S=y=>x(y.target.value),k=y=>l(y.target.value),$=y=>c(y.target.value),rt=()=>{n({entryDate:`${i}-${a.length<2?"0":""}${a}`,salary:r,bonus:j,stockTick:p,priceThen:f,grantDuration:g,grantQty:D}),B()};return t.jsxs(Z,{open:e,onClose:o,children:[t.jsxs(K,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(tt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(_,{fullWidth:!0,children:[t.jsx(z,{id:"month-select",children:"Month"}),t.jsx(L,{labelId:"month-select",label:"Month",value:a,onChange:k,children:gt.map((y,E)=>t.jsx(G,{value:E+1,children:y},E))})]}),t.jsxs(_,{fullWidth:!0,children:[t.jsx(z,{id:"year-select",children:"Year"}),t.jsx(L,{labelId:"year-select",label:"Year",value:i,onChange:$,children:P.map(y=>t.jsx(G,{value:y,children:y},y))})]})]}),t.jsx(w,{label:"Salary",value:r,type:"number",onChange:T(d),slotProps:{input:{startAdornment:"$"}},...F}),t.jsx(w,{label:"Bonus",value:j,type:"number",onChange:T(m),slotProps:{input:{startAdornment:"$"}},...F}),t.jsx(bt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:p,onChange:S,...F}),t.jsx(w,{label:"Grant Quantity",value:D,type:"number",onChange:T(N),...F}),t.jsx(w,{label:"Grant Duration",value:g,type:"number",onChange:T(b),...F}),t.jsx(w,{label:"Stock Price Then",value:f,type:"number",onChange:T(C),slotProps:{input:{startAdornment:"$"}},...F})]}),t.jsxs(et,{children:[t.jsx(M,{onClick:o,children:"Cancel"}),t.jsx(M,{type:"submit",onClick:rt,children:s?"Update":"Add"})]})]})},H={variant:"standard",fullWidth:!0,margin:"dense"},Nt=({open:e,price:s,stock:o,onClose:n,addStockEntry:a,removeStockEntry:l})=>{const[i,c]=h.useState(0),[r,d]=h.useState(""),j=()=>{c(0),d("")};h.useEffect(()=>{o&&s!==void 0?(c(s),d(o)):j()},[s,o]);const m=f=>d(f.target.value),p=f=>c(parseFloat(f.target.value)),x=()=>{a(r,i),j()};return t.jsxs(Z,{open:e,onClose:n,children:[t.jsxs(K,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(tt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:r,onChange:m,...H}),t.jsx(w,{label:"Price Now",value:i,type:"number",onChange:p,slotProps:{input:{startAdornment:"$"}},...H})]})}),t.jsxs(et,{children:[t.jsx(M,{onClick:l(r),color:"error",children:"Delete"}),t.jsx(M,{onClick:n,children:"Cancel"}),t.jsx(M,{type:"submit",onClick:x,children:o?"Update":"Add"})]})]})},Mt=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,n)=>t.jsx(yt,{color:"primary",label:`${o}: ${v.format(e[o])}`,onClick:s(o),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${n}`))});st(I);const J=0,Q=1,q=2,Bt=({compCalcEntries:e,compEntries:s,onClick:o})=>{const[n]=R(X),a=n.mode==="light"?"black":"white",l=[[],[],[]];s.forEach((c,r)=>{l[J].push(e[r].stockAdj||e[r].stock),l[Q].push(c.bonus),l[q].push(c.salary)});const i={chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:a}},xAxis:{visible:!1},yAxis:{labels:{style:{color:a}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● Total: $<b>{point.total:,.2f}</b>"},plotOptions:{area:{stacking:"normal",lineColor:a,lineWidth:1,marker:{lineWidth:1,lineColor:a}},series:{cursor:"pointer",events:{click:o}}},series:[{name:"Stock",data:[...l[J]]},{name:"Bonus",data:[...l[Q]]},{name:"Salary",data:[...l[q]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:I,options:i})})};st(I);const Et=({bonus:e,salary:s,stock:o})=>{const[n]=R(X),a=n.mode==="light"?"black":"white",l={chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:a}},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:o},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:I,options:l})})},Ft=({compEntries:e,compCalcEntries:s})=>{const{stock:o,stockAdj:n}=s[s.length-1],{bonus:a,salary:l}=e[e.length-1],[i,c]=h.useState(n||o),[r,d]=h.useState(a),[j,m]=h.useState(l);h.useEffect(()=>{c(n||o),d(a),m(l)},[n,o,a,l]);const p=x=>{const{stock:f,stockAdj:C}=s[x.point.index],{bonus:g,salary:b}=e[x.point.index];c(C||f),d(g),m(b)};return t.jsxs(A,{container:!0,children:[t.jsx(A,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Bt,{compCalcEntries:s,compEntries:e,onClick:p})}),t.jsx(A,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(Et,{stock:i,bonus:r,salary:j})})]})},Xt=()=>{const[e,s]=R(at),o=xt(Dt),[n,a]=R(ot),[l,i]=h.useState(!1),[c,r]=h.useState(!1),[d,j]=h.useState(-1),[m,p]=h.useState(""),x=()=>i(!1),f=()=>{j(-1),i(!0)},C=S=>()=>{j(S),i(!0)},g=()=>r(!1),b=()=>{p(""),r(!0)},D=S=>()=>{p(S),r(!0)},N=S=>{const k=[...e];d===-1?k.push(S):k[d]=S,s(k),x()},B=(S,k)=>{const $={...n};$[S]=k,a($),g()},T=S=>()=>{const k={...n};delete k[S],a(k),g()};return t.jsxs(t.Fragment,{children:[t.jsx(u,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Mt,{stockEntries:n,openStockModal:D}),t.jsxs("div",{children:[t.jsx(M,{onClick:b,children:"+ Stock"}),t.jsx(M,{onClick:f,children:"+ Entry"})]})]}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Ft,{compEntries:e,compCalcEntries:o}),t.jsx(Tt,{compEntries:e,compCalcEntries:o,onClick:C})]}),t.jsx(Nt,{open:c,price:m?n[m]:void 0,stock:m,onClose:g,addStockEntry:B,removeStockEntry:T}),t.jsx(wt,{open:l,compEntry:d!==-1?e[d]:void 0,onClose:x,addCompEntry:N})]})};export{Xt as default};
//# sourceMappingURL=index-BuSILotM.js.map
