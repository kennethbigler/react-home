import{Q as K,S as mt,c as pt,e as xt,r as h,f as gt,j as t,s as jt,h as ft,i as yt,x as St,D as X,M as U,U as Ct,P as Y,G as Z}from"./index-B3mBVuzp.js";import{d as B,m as kt}from"./DateHelper-hKADhxz5.js";import{D as _,a as tt,b as et,c as st}from"./DialogTitle-CyK-r2Ep.js";import{F as L,I as z,S as E}from"./Select-CSRYCcdM.js";import{T as g,M as O,D as W}from"./Header-Qbcjbvb2.js";import{T as w}from"./TextField-DXPFWPyU.js";import{B as F}from"./Button-CyWThF5g.js";import{C as bt}from"./Chip-DLte9Uf2.js";import{H as nt,a as ot}from"./highcharts-react.min-Bf3k21Ui.js";import{l as Dt}from"./lightGreen-2p8Gc2S0.js";import{G as A}from"./Grid-B1MsQ1hq.js";import{C as vt}from"./Card-DSH2hB3C.js";import{C as Tt,a as R}from"./CardActionArea-C99SrrCk.js";import{C as H}from"./CardContent-DZe6H1Jv.js";import"./isMuiElement-D7RSiOUi.js";import"./useSlotProps-C2WRgwxq.js";import"./useThemeProps-BMr9uRWI.js";const at=K("stockAtom",{}),rt=K("compCalcAtom",[]),At=mt(e=>{const s=e(rt),o=e(at),a={},r=s.map(({bonus:n,entryDate:l,grantDuration:i,grantQty:d,priceThen:p,salary:m,stockTick:j})=>{const y=o[j]||0;let u=0,f=0;const S=B(l);S.year+=i,a[j]||(a[j]=[]),d>0&&a[j].push({grantQty:d,grantDuration:i,exp:S}),a[j].forEach(x=>{B(l).diff(x.exp,"days")<0&&(u+=p*x.grantQty/x.grantDuration,f+=y*x.grantQty/x.grantDuration)});const b=m+n+u,v=m+n+f,T=p*d,k=y*d;return{stock:u,stockAdj:f,total:b,totalAdj:v,grantThen:T,grantNow:k}});return r.map(({totalAdj:n,...l},i)=>{const d=i===0?0:n-r[i-1].totalAdj;return{totalAdj:n,netDiff:d,...l}})});function wt(e){return pt("MuiDialogContentText",e)}xt("MuiDialogContentText",["root"]);const Ft=e=>{const{classes:s}=e,a=yt({root:["root"]},wt,s);return{...s,...a}},Mt=jt(g,{shouldForwardProp:e=>St(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Nt=h.forwardRef(function(s,o){const a=gt({props:s,name:"MuiDialogContentText"}),{children:r,className:c,...n}=a,l=Ft(n);return t.jsx(Mt,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:n,className:ft(l.root,c),...a,classes:l})}),N={variant:"standard",fullWidth:!0,margin:"dense"},Bt=new Date().getFullYear()-2e3,P=[];for(let e=0;e<=Bt;e+=1)P.push(2e3+e);P.reverse();const Pt=({open:e,compEntry:s,onClose:o,addCompEntry:a})=>{const[r,c]=h.useState("1"),[n,l]=h.useState(P[0].toString()),[i,d]=h.useState(0),[p,m]=h.useState(0),[j,y]=h.useState(""),[u,f]=h.useState(0),[S,b]=h.useState(4),[v,T]=h.useState(0),k=()=>{c("1"),l(P[0].toString()),d(0),m(0),y(""),f(0),b(4),T(0)};h.useEffect(()=>{if(s){const{month:C,year:M}=B(s.entryDate);c((C+1).toString()),l(M.toString()),d(s.salary),m(s.bonus),y(s.stockTick),f(s.priceThen),b(s.grantDuration),T(s.grantQty)}else k()},[s,s==null?void 0:s.salary]);const x=C=>M=>C(parseFloat(M.target.value)),$=C=>y(C.target.value),dt=C=>c(C.target.value),ht=C=>l(C.target.value),ut=()=>{a({entryDate:`${n}-${r.length<2?"0":""}${r}`,salary:i,bonus:p,stockTick:j,priceThen:u,grantDuration:S,grantQty:v}),k()};return t.jsxs(_,{open:e,onClose:o,children:[t.jsxs(tt,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(et,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(L,{fullWidth:!0,children:[t.jsx(z,{id:"month-select",children:"Month"}),t.jsx(E,{labelId:"month-select",label:"Month",value:r,onChange:dt,children:kt.map((C,M)=>t.jsx(O,{value:M+1,children:C},M))})]}),t.jsxs(L,{fullWidth:!0,children:[t.jsx(z,{id:"year-select",children:"Year"}),t.jsx(E,{labelId:"year-select",label:"Year",value:n,onChange:ht,children:P.map(C=>t.jsx(O,{value:C,children:C},C))})]})]}),t.jsx(w,{label:"Salary",value:i,type:"number",onChange:x(d),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(w,{label:"Bonus",value:p,type:"number",onChange:x(m),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(Nt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:j,onChange:$,...N}),t.jsx(w,{label:"Grant Quantity",value:v,type:"number",onChange:x(T),...N}),t.jsx(w,{label:"Grant Duration",value:S,type:"number",onChange:x(b),...N}),t.jsx(w,{label:"Stock Price Then",value:u,type:"number",onChange:x(f),slotProps:{input:{startAdornment:"$"}},...N})]}),t.jsxs(st,{children:[t.jsx(F,{onClick:o,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:ut,children:s?"Update":"Add"})]})]})},Q={variant:"standard",fullWidth:!0,margin:"dense"},lt=h.memo(({open:e,price:s,stock:o,onClose:a,addStockEntry:r,removeStockEntry:c})=>{const[n,l]=h.useState(0),[i,d]=h.useState(""),p=()=>{l(0),d("")};h.useEffect(()=>{o&&s!==void 0?(l(s),d(o)):p()},[s,o]);const m=u=>d(u.target.value),j=u=>l(parseFloat(u.target.value)),y=()=>{r(i,n),p()};return t.jsxs(_,{open:e,onClose:a,children:[t.jsxs(tt,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(et,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:i,onChange:m,...Q}),t.jsx(w,{label:"Price Now",value:n,type:"number",onChange:j,slotProps:{input:{startAdornment:"$"}},...Q})]})}),t.jsxs(st,{children:[t.jsx(F,{onClick:c(i),color:"error",children:"Delete"}),t.jsx(F,{onClick:a,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:y,children:o?"Update":"Add"})]})]})});lt.displayName="StockDialog";const D=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),$t=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,a)=>t.jsx(bt,{color:"primary",label:`${o}: ${D.format(e[o])}`,onClick:s(o),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${a}`))}),Wt=({compEntries:e,setCompEntries:s,openEntry:o,setOpenEntry:a,editEntryIdx:r,setEditEntryIdx:c})=>{const[n,l]=X(at),[i,d]=h.useState(!1),[p,m]=h.useState(""),j=()=>a(!1),y=()=>{c(-1),a(!0)},u=()=>d(!1),f=()=>{m(""),d(!0)},S=k=>()=>{m(k),d(!0)},b=k=>{const x=[...e];r===-1?x.push(k):x[r]=k,s(x),j()},v=(k,x)=>{const $={...n};$[k]=x,l($),u()},T=k=>()=>{const x={...n};delete x[k],l(x),u()};return t.jsxs(t.Fragment,{children:[t.jsx(g,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx($t,{stockEntries:n,openStockModal:S}),t.jsxs("div",{children:[t.jsx(F,{onClick:f,children:"+ Stock"}),t.jsx(F,{onClick:y,children:"+ Entry"})]})]}),t.jsx(lt,{open:i,price:p?n[p]:void 0,stock:p,onClose:u,addStockEntry:v,removeStockEntry:T}),t.jsx(Pt,{open:o,compEntry:r!==-1?e[r]:void 0,onClose:j,addCompEntry:b})]})},it=[Dt[500],U[500],Ct[500],U[900]],I=0,V=1,q=2,J=3,G=4,Gt={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},Yt=({startIdx:e,compCalcEntries:s,compEntries:o,onClick:a})=>{const c=Y(Z).mode==="light"?"black":"white",n=[[],[],[],[],[]];if(o.length>0){let i=B(o[e].entryDate).year,d=o[e].salary+o[e].bonus+(s[e].stockAdj||s[e].stock);o.forEach(({bonus:p,salary:m,entryDate:j},y)=>{const{stock:u,stockAdj:f}=s[y];n[I].push(f||u),n[V].push(p),n[q].push(m),n[J].push(u+p+m);const S=B(j).year;if(S>=i){for(;i<S;i+=1)d*=Gt[i];n[G].push(d)}else n[G].push(p+m+(f||u))})}const l={accessibility:{enabled:!0},colors:[...it,c],chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:c}},xAxis:{visible:!1},yAxis:{labels:{style:{color:c}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"},plotOptions:{area:{stacking:"normal",lineColor:c,lineWidth:1,marker:{lineWidth:1,lineColor:c}},series:{cursor:"pointer",events:{click:a}}},series:[{type:"area",name:"Stock",data:[...n[I]]},{type:"area",name:"Bonus",data:[...n[V]]},{type:"area",name:"Salary",data:[...n[q]]},{type:"spline",name:"Total",data:[...n[J]]},{type:"spline",name:"Inflation",data:[...n[G]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:ot,options:l})})},ct=h.memo(({bonus:e,salary:s,stock:o})=>{const r=Y(Z).mode==="light"?"black":"white",c={accessibility:{enabled:!0},colors:it,chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:r}},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:o},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:ot,options:c})})});ct.displayName="BreakdownChart";const Ut=({compEntries:e,compCalcEntries:s})=>{const{stock:o,stockAdj:a}=s[s.length-1],{bonus:r,salary:c}=e[e.length-1],[n,l]=h.useState(0),[i,d]=h.useState(a||o),[p,m]=h.useState(r),[j,y]=h.useState(c);h.useEffect(()=>{l(0),d(a||o),m(r),y(c)},[a,o,r,c]);const u=({point:{index:f}})=>{const{stock:S,stockAdj:b}=s[f],{bonus:v,salary:T}=e[f];l(f>=e.length-1?0:f),d(b||S),m(v),y(T)};return t.jsxs(A,{container:!0,children:[t.jsx(A,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Yt,{startIdx:n,compCalcEntries:s,compEntries:e,onClick:u})}),t.jsx(A,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(ct,{stock:i,bonus:p,salary:j})})]})},Lt=({compEntries:e,compCalcEntries:s,onClick:o})=>t.jsxs(A,{container:!0,spacing:1,children:[t.jsx(A,{size:12,children:t.jsx(g,{children:"*value computed from latest stock price above"})}),e.map((a,r)=>{const{entryDate:c,salary:n,bonus:l,stockTick:i,priceThen:d,grantDuration:p,grantQty:m}=a,{stock:j,stockAdj:y,total:u,totalAdj:f,netDiff:S,grantThen:b,grantNow:v}=s[r];return t.jsx(A,{size:{xs:12,md:6,lg:4,xl:3,xxl:e.length>4?2:void 0,xxxl:e.length>6?1:void 0},children:t.jsx(vt,{children:t.jsx(Tt,{onClick:o(r),children:t.jsxs(A,{container:!0,children:[t.jsxs(A,{size:i?6:12,children:[t.jsx(R,{title:"Salary"}),t.jsxs(H,{children:[t.jsxs(g,{children:["Date: ",B(c).format("MMMM Y")]}),t.jsxs(g,{children:["Salary: ",D.format(n)]}),t.jsxs(g,{children:["Bonus: ",D.format(l)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Stock: ",D.format(j)]}),t.jsxs(g,{children:["*Stock: ",D.format(y)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Total: ",D.format(u)]}),t.jsx(g,{sx:{display:"inline"},children:"*Total:"}),t.jsx(g,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:D.format(f)}),S!==0&&t.jsxs(t.Fragment,{children:[t.jsx(W,{"aria-hidden":!0}),t.jsx(g,{sx:{display:"inline"},children:"Net:"}),t.jsx(g,{color:S>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:D.format(S)})]})]})]}),i&&t.jsxs(A,{size:6,children:[t.jsx(R,{title:"Stock Grant"}),t.jsxs(H,{children:[t.jsx(g,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(g,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:i}),m>0&&t.jsxs(t.Fragment,{children:[t.jsxs(g,{children:["Price: ",D.format(d)]}),t.jsxs(g,{children:["Grant Qty: ",m]}),t.jsxs(g,{children:["Duration: ",p," years"]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Grant: ",D.format(b)]}),t.jsxs(g,{children:["*Grant: ",D.format(v)]})]})]})]})]})})})},`comp-calc-entry-${r}`)}).reverse()]}),ne=()=>{const[e,s]=X(rt),o=Y(At),[a,r]=h.useState(!1),[c,n]=h.useState(-1),l=i=>()=>{n(i),r(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(Wt,{compEntries:e,setCompEntries:s,openEntry:a,setOpenEntry:r,editEntryIdx:c,setEditEntryIdx:n}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Ut,{compEntries:e,compCalcEntries:o}),t.jsx(Lt,{compEntries:e,compCalcEntries:o,onClick:l})]})]})};export{ne as default};
//# sourceMappingURL=index-D9GUKd-p.js.map
