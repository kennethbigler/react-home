import{E as G,j as t,M as P,O as M,W as E,A as W,P as z}from"./index-DMtdgkeS.js";import{a as I}from"./amber-D7aVlNg3.js";import{P as N,T as g}from"./Header-CUtYRLvS.js";import{D as J,a as Y,b as F,c as D}from"./DialogTitle-DcSFJOGK.js";import{B as p}from"./Button-sUGzSBx_.js";import{G as O}from"./Grid2-CGMJmGR8.js";import{p as j,P as H}from"./PlayerMenu-BJiGMkb9.js";import"./useId-CBw7J9nN.js";import"./useThemeProps-Os47kRxh.js";import"./isMuiElement-gTNAeGb-.js";import"./Select-DJp9dDiY.js";import"./useSlotProps-B1o2xeA9.js";import"./TextField-BO5o1Fn_.js";const v=(o=0)=>{const e=o.toString().split(""),l=e[0]==="-"?1:0;for(let n=e.length-3;n>l;n-=3)e.splice(n,0,",");return e.splice(l,0,"$"),e.join("")},L={width:"90%",marginLeft:"5%",marginRight:"5%",marginBottom:5,padding:5,textAlign:"center",color:"white"},q=o=>{const{briefcase:e}=o,l={backgroundColor:e.on?I[500]:G[700]},n={...L,...l};return t.jsx(N,{style:n,children:e.on?v(e.val):t.jsx("del",{children:v(e.val)})})},w={width:"50%",display:"inline-block"},k=(o,e,l=o.length)=>o.slice(e,l).map(n=>t.jsx(q,{briefcase:n},n.loc)),K=o=>{const{deal:e,noDeal:l,offer:n,open:s,swap:a,numCases:i,board:r}=o,m=[...r].sort((d,f)=>d.val-f.val),x=k(m,0,m.length/2),y=k(m,m.length/2);return t.jsxs(J,{fullWidth:!0,open:s,children:[t.jsx(Y,{children:`${v(n)} - Deal or No Deal?`}),t.jsxs(F,{children:[t.jsx("div",{style:w,children:x}),t.jsx("div",{style:w,children:y})]}),i>2?t.jsxs(D,{children:[t.jsx(p,{color:"success",onClick:e,children:"Deal"}),t.jsx(p,{color:"error",onClick:l,children:"No Deal"})]}):t.jsxs(D,{children:[t.jsx(p,{color:"success",onClick:e,children:"Deal"}),t.jsx(p,{color:"secondary",onClick:l,children:"My Case"}),t.jsx(p,{color:"error",onClick:a,children:"Other Case"})]})]})},Q=o=>{const{briefcase:e,isOver:l,onClick:n,secondary:s}=o,a=s?"secondary":"primary",i=e.on&&!l?e.loc:v(e.val);return t.jsx(p,{color:a,disabled:!e.on,onClick:n,style:{margin:10},variant:"contained",children:i})},U={maxWidth:796,padding:9,textAlign:"center",display:"block",margin:"auto",marginTop:20},V=({board:o,isOver:e,onClick:l,playerChoice:n})=>t.jsx(N,{elevation:2,style:U,children:o.map((s,a)=>t.jsx(Q,{briefcase:s,isOver:e,onClick:()=>l(a),secondary:n&&n.loc===s.loc},a))}),X=o=>{const{playerChoice:e,casesToOpen:l,isOver:n,newGame:s,name:a,money:i,dndOpen:r}=o;return t.jsxs(O,{container:!0,spacing:1,children:[t.jsxs(O,{size:{xs:12,sm:6},children:[t.jsx(g,{variant:"h3",component:"h2",gutterBottom:!0,children:`Your Case: ${e?e.loc:"?"}${n?` - ${v(e&&e.val)}`:""}`}),t.jsx(g,{variant:"h4",component:"h3",gutterBottom:!0,children:!r&&(n?`You Won ${v(n)}`:`Number of Cases to Open: ${l}`)}),n?t.jsx(p,{onClick:s,variant:"contained",children:"New Game"}):null]}),t.jsx(O,{size:{xs:12,sm:6},children:t.jsx(g,{variant:"h3",align:"right",gutterBottom:!0,children:`${a}: ${v(i)}`})})]})},C=6,Z=()=>({board:[{val:1,loc:1,on:!0},{val:2,loc:2,on:!0},{val:5,loc:3,on:!0},{val:10,loc:4,on:!0},{val:25,loc:5,on:!0},{val:50,loc:6,on:!0},{val:75,loc:7,on:!0},{val:100,loc:8,on:!0},{val:200,loc:9,on:!0},{val:300,loc:10,on:!0},{val:400,loc:11,on:!0},{val:500,loc:12,on:!0},{val:750,loc:13,on:!0},{val:1e3,loc:14,on:!0},{val:5e3,loc:15,on:!0},{val:1e4,loc:16,on:!0},{val:25e3,loc:17,on:!0},{val:5e4,loc:18,on:!0},{val:75e3,loc:19,on:!0},{val:1e5,loc:20,on:!0},{val:2e5,loc:21,on:!0},{val:3e5,loc:22,on:!0},{val:4e5,loc:23,on:!0},{val:5e5,loc:24,on:!0},{val:75e4,loc:25,on:!0},{val:1e6,loc:26,on:!0}],turn:1,playerChoice:void 0,casesToOpen:C,dndOpen:!1,isOver:0}),ee=o=>{for(let e=0;e<100;e+=1){const l=Math.floor(Math.random()*o.length),n=Math.floor(Math.random()*o.length),s=o[l].loc;o[l].loc=o[n].loc,o[n].loc=s}},S=()=>{const o=Z();return ee(o.board),o.board.forEach(e=>{e.on=!0}),o.board.sort((e,l)=>e.loc-l.loc),o},b=P({key:"dealOrNoDealAtom",default:JSON.parse(localStorage.getItem("deal-or-no-deal-atom")||"null")||S(),effects:[({onSet:o})=>{o(e=>{localStorage.setItem("deal-or-no-deal-atom",JSON.stringify(e))})}]}),oe=M({key:"dndReadOnlyState",get:({get:o})=>{const{board:e,turn:l}=o(b),{name:n}=o(j)[0];let s=0,a=0;e.forEach(r=>{r.on&&(s+=1,a+=r.val)});const i=Math.round(a/s*(l/10));return{numCases:s,offer:i,name:n}}}),ne=M({key:"dealOrNoDealState",get:({get:o})=>{const e=o(b),{money:l,status:n}=o(j)[0];return{dnd:e,money:l,status:n}},set:({get:o,set:e},l)=>{if(!(l instanceof E)){const{dnd:n,money:s,status:a}=l;e(b,n);const i=o(j),r=[...i];r[0]={...i[0],money:s,status:a},e(j,r)}}}),fe=()=>{const[{dnd:o,money:e,status:l},n]=W(ne),{numCases:s,offer:a,name:i}=z(oe),{board:r,dndOpen:m,isOver:x,turn:y,playerChoice:d,casesToOpen:f}=o,B=()=>n({dnd:S(),money:e,status:l}),T=c=>{const u=r[c];if(d){if(!x&&f>0&&u.loc!==d.loc&&u.on){const h=[...r],A={...h[c],on:!1};h[c]=A,n({dnd:{...o,board:h,dndOpen:f===1,casesToOpen:f-1},money:e,status:l})}}else n({dnd:{...o,playerChoice:u},money:e-100,status:l})},_=()=>{const c=Math.ceil(a/1e3);n({dnd:{...o,dndOpen:!1,isOver:c},money:e+c,status:c>100?"win":"lose"})},R=()=>{if(s<=2){const c=(d==null?void 0:d.val)||0,u=Math.ceil(c/1e3);n({dnd:{...o,dndOpen:!1,isOver:u},money:e+u,status:u>100?"win":"lose"})}else n({dnd:{...o,dndOpen:!1,turn:y+1,casesToOpen:y<C-1?C-y:1},money:e,status:l})},$=()=>{for(let c=0;c<r.length;c+=1){const u=r[c];if(u.on&&d&&u.loc!==d.loc){const h=Math.ceil(u.val/1e3);n({dnd:{...o,dndOpen:!1,isOver:h},money:e+h,status:h>100?"win":"lose"});return}}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-container",children:[t.jsx(g,{variant:"h2",component:"h1",gutterBottom:!0,children:"Deal or No Deal"}),t.jsx(H,{})]}),t.jsx(X,{casesToOpen:f,isOver:x,newGame:B,name:i,money:e,playerChoice:d,dndOpen:m}),t.jsx(V,{board:r,isOver:!!x,onClick:T,playerChoice:d}),t.jsx(K,{board:r,deal:_,noDeal:R,numCases:s,offer:a,open:m,swap:$})]})};export{fe as default};
//# sourceMappingURL=index-B1XbT4qF.js.map
