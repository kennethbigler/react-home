import{a0 as R,j as l,J as A,a1 as N,a7 as G,K as E,a3 as H}from"./index-2cf40ff9.js";import{a as J}from"./amber-8c90edc2.js";import{P as M,t as p,G as j,T as f,z as O}from"./MenuItem-76281072.js";import{D as P,a as W,b as I,c as b}from"./DialogActions-cd4a7d1b.js";const m=(o=0)=>{const e=o.toString().split(""),n=e[0]==="-"?1:0;for(let t=e.length-3;t>n;t-=3)e.splice(t,0,",");return e.splice(n,0,"$"),e.join("")},Y={width:"90%",marginLeft:"5%",marginRight:"5%",marginBottom:5,padding:5,textAlign:"center",color:"white"},z=o=>{const{briefcase:e}=o,n={backgroundColor:e.on?J[500]:R[700]},t={...Y,...n};return l.jsx(M,{style:t,children:e.on?m(e.val):l.jsx("del",{children:m(e.val)})})},w={width:"50%",display:"inline-block"},k=(o,e,n=o.length)=>o.slice(e,n).map(t=>l.jsx(z,{briefcase:t},t.loc)),F=o=>{const{deal:e,noDeal:n,offer:t,open:s,swap:a,numCases:r,board:y}=o,u=[...y].sort((x,g)=>x.val-g.val),i=k(u,0,u.length/2),v=k(u,u.length/2);return l.jsxs(P,{fullWidth:!0,open:s,children:[l.jsx(W,{children:`${m(t)} - Deal or No Deal?`}),l.jsxs(I,{children:[l.jsx("div",{style:w,children:i}),l.jsx("div",{style:w,children:v})]}),r>2?l.jsxs(b,{children:[l.jsx(p,{color:"success",onClick:e,children:"Deal"}),l.jsx(p,{color:"error",onClick:n,children:"No Deal"})]}):l.jsxs(b,{children:[l.jsx(p,{color:"success",onClick:e,children:"Deal"}),l.jsx(p,{color:"secondary",onClick:n,children:"My Case"}),l.jsx(p,{color:"error",onClick:a,children:"Other Case"})]})]})},K=o=>{const{briefcase:e,isOver:n,onClick:t,secondary:s}=o,a=s?"secondary":"primary",r=e.on&&!n?e.loc:m(e.val);return l.jsx(p,{color:a,disabled:!e.on,onClick:t,style:{margin:10},variant:"contained",children:r})},L={maxWidth:796,padding:9,textAlign:"center",display:"block",margin:"auto",marginTop:20},q=({board:o,isOver:e,onClick:n,playerChoice:t})=>l.jsx(M,{elevation:2,style:L,children:o.map((s,a)=>l.jsx(K,{briefcase:s,isOver:e,onClick:()=>n(a),secondary:t&&t.loc===s.loc},a))}),Q=o=>{const{playerChoice:e,casesToOpen:n,isOver:t,newGame:s,player:a,dndOpen:r}=o;return l.jsxs(j,{container:!0,spacing:1,children:[l.jsxs(j,{item:!0,sm:6,xs:12,children:[l.jsx(f,{variant:"h3",component:"h2",gutterBottom:!0,children:`Your Case: ${e?e.loc:"?"}${t?` - ${m(e&&e.val)}`:""}`}),l.jsx(f,{variant:"h4",component:"h3",gutterBottom:!0,children:!r&&(t?`You Won ${m(t)}`:`Number of Cases to Open: ${n}`)}),t?l.jsx(p,{onClick:s,variant:"contained",children:"New Game"}):null]}),l.jsx(j,{item:!0,sm:6,xs:12,children:l.jsx(f,{variant:"h3",align:"right",gutterBottom:!0,children:`${a.name}: ${m(a.money)}`})})]})},C=6,U=()=>({board:[{val:1,loc:1,on:!0},{val:2,loc:2,on:!0},{val:5,loc:3,on:!0},{val:10,loc:4,on:!0},{val:25,loc:5,on:!0},{val:50,loc:6,on:!0},{val:75,loc:7,on:!0},{val:100,loc:8,on:!0},{val:200,loc:9,on:!0},{val:300,loc:10,on:!0},{val:400,loc:11,on:!0},{val:500,loc:12,on:!0},{val:750,loc:13,on:!0},{val:1e3,loc:14,on:!0},{val:5e3,loc:15,on:!0},{val:1e4,loc:16,on:!0},{val:25e3,loc:17,on:!0},{val:5e4,loc:18,on:!0},{val:75e3,loc:19,on:!0},{val:1e5,loc:20,on:!0},{val:2e5,loc:21,on:!0},{val:3e5,loc:22,on:!0},{val:4e5,loc:23,on:!0},{val:5e5,loc:24,on:!0},{val:75e4,loc:25,on:!0},{val:1e6,loc:26,on:!0}],turn:1,playerChoice:void 0,casesToOpen:C,dndOpen:!1,isOver:0}),V=o=>{for(let e=0;e<100;e+=1){const n=Math.floor(Math.random()*o.length),t=Math.floor(Math.random()*o.length),s=o[n].loc;o[n].loc=o[t].loc,o[t].loc=s}},S=()=>{const o=U();return V(o.board),o.board.forEach(e=>{e.on=!0}),o.board.sort((e,n)=>e.loc-n.loc),o},D=A({key:"dealOrNoDealAtom",default:JSON.parse(localStorage.getItem("deal-or-no-deal-atom")||"null")||S(),effects:[({onSet:o})=>{o(e=>{localStorage.setItem("deal-or-no-deal-atom",JSON.stringify(e))})}]}),X=N({key:"dndHelperSelector",get:({get:o})=>{const{board:e,turn:n}=o(D);let t=0,s=0;e.forEach(r=>{r.on&&(t+=1,s+=r.val)});const a=Math.round(s/t*(n/10));return{numCases:t,offer:a}}}),Z=N({key:"dealOrNoDealState",get:({get:o})=>{const e=o(D),n=o(O)[0];return{dnd:e,player:n}},set:({get:o,set:e},n)=>{if(!(n instanceof G)){const{dnd:t,player:s}=n;e(D,t);const r=[...o(O)];r[0]=s,e(O,r)}}}),ee=()=>{const[{dnd:o,player:e},n]=E(Z),{numCases:t,offer:s}=H(X),{board:a,dndOpen:r,isOver:y,turn:u,playerChoice:i,casesToOpen:v}=o,x=()=>n({dnd:S(),player:e}),g=c=>{const d=a[c];if(i){if(!y&&v>0&&d.loc!==i.loc&&d.on){const h=[...a],$={...h[c],on:!1};h[c]=$,n({dnd:{...o,board:h,dndOpen:v===1,casesToOpen:v-1},player:e})}}else n({dnd:{...o,playerChoice:d},player:{...e,money:e.money-100}})},T=()=>{const c=Math.ceil(s/1e3);n({dnd:{...o,dndOpen:!1,isOver:c},player:{...e,status:c>100?"win":"lose",money:e.money+c}})},B=()=>{if(t<=2){const c=(i==null?void 0:i.val)||0,d=Math.ceil(c/1e3);n({dnd:{...o,dndOpen:!1,isOver:d},player:{...e,status:d>100?"win":"lose",money:e.money+d}})}else n({dnd:{...o,dndOpen:!1,turn:u+1,casesToOpen:u<C-1?C-u:1},player:e})},_=()=>{for(let c=0;c<a.length;c+=1){const d=a[c];if(d.on&&i&&d.loc!==i.loc){const h=Math.ceil(d.val/1e3);n({dnd:{...o,dndOpen:!1,isOver:h},player:{...e,status:h>100?"win":"lose",money:e.money+h}});return}}};return l.jsxs(l.Fragment,{children:[l.jsx(f,{variant:"h2",component:"h1",gutterBottom:!0,children:"Deal or No Deal"}),l.jsx(Q,{casesToOpen:v,isOver:y,newGame:x,player:e,playerChoice:i,dndOpen:r}),l.jsx(q,{board:a,isOver:!!y,onClick:g,playerChoice:i}),l.jsx(F,{board:a,deal:T,noDeal:B,numCases:t,offer:s,open:r,swap:_})]})},ae=ee;export{ae as default};
//# sourceMappingURL=index-3722bdf0.js.map
