import{r as y,H as b,j as n}from"./index-BPmWfQoA.js";import{d as E}from"./DateHelper-ByTXwCaR.js";import{E as D}from"./ExpandableCard-DjcI-r2b.js";import{u as $}from"./Header-CDDrxPbl.js";import{M as O,T as A,w as B}from"./timeline-consts-D_oiNWf3.js";const F={cursor:"default",paddingTop:"5px",paddingBottom:"5px",textAlign:"center",borderRadius:2},_=y.memo(({body:e,width:o,color:a,title:m,inverted:d})=>{const{palette:{mode:h}}=$();let l={display:"inline-block",width:`${o}%`,color:d?"black":b[50]};return e&&(l={...l,...F,backgroundColor:a,boxShadow:`2px 3px 4px 1px ${h!=="dark"?b[400]:b[700]}`}),n.jsx("div",{style:l,title:m,children:e||n.jsx("br",{})})});_.displayName="Segment";const H={cursor:"default",height:500,marginBottom:-500,minWidth:1},L={...H,backgroundColor:b[200],width:"100%",maxWidth:2.5},G={position:"relative",right:22},W=y.memo(({body:e,width:o})=>{const a={display:"inline-block",width:`${o}%`};return e?n.jsx("div",{style:{...a,...H},title:e,children:n.jsx("div",{style:L,title:"year-marker",children:n.jsx("div",{style:G,children:e})})}):n.jsx("div",{title:"year",style:a,children:n.jsx("br",{})})});W.displayName="YearMarkers";const X={marginTop:10},z={marginTop:20},J={height:0},v=({segments:e,yearMarkers:o=!1,first:a=!1})=>{let m=X;return o?m=J:a&&(m=z),n.jsx("div",{style:m,title:"timeline-row",children:e.map((d,h)=>o?n.jsx(W,{body:d.body,width:d.width},h):n.jsx(_,{...d},h))})},S=99,K=269,P=85,Q=54,j=.3,k=(e,o)=>{o>0&&e.push({width:o})},U=({start:e,end:o,selector:a,data:m,yearMarkerFrequency:d,enableLongTitles:h})=>{const l=y.useMemo(()=>[...m].sort(O),[m]),x=[],u=y.useCallback(i=>{const r=o.diff(e,"months"),t=i.diff(e,"months"),f=Math.floor(t/r*S);return f>0?f:0},[o,e]),I=y.useCallback((i,r,t,f)=>{const{color:g,inverted:s,title:c,short:p,char:w}=r,T=f-t,M=T*(window.innerWidth-64)/S,Y={color:g,inverted:s,width:T,title:c};M<Q?i.push({body:w||r[a].substr(0,1),...Y}):M<P?i.push({body:p,...Y}):!h||M<K?i.push({body:r[a],...Y}):i.push({body:c,...Y})},[a,h]),C=(i,r)=>{if(x[r])return[];const t=[],{start:f,end:g}=i;let s=u(f),c=u(g);k(t,s),I(t,i,s,c),x[r]=!0;for(let p=r+1;p<l.length;p+=1)if(!x[p]){const{start:w,end:T}=l[p];s=u(w),s>=c&&(k(t,s-c),c=u(T),I(t,l[p],s,c),x[p]=!0)}return k(t,S-c),[...t]},R=y.useCallback(()=>{const i=Number(e.format("YYYY")),r=Number(o.format("YYYY")),t=[];for(let s=i+1;s<=r;s+=d)t.push(E(`${s}`));const f={width:j,body:t[0].format("'YY")},g=[{width:u(t[0])-j},f];for(let s=1;s<t.length;s+=1){const c=u(t[s-1]),p=u(t[s]);g.push({width:p-c-j}),g.push({width:j,body:t[s].format("'YY")})}return g},[o,u,e,d]);return n.jsxs("div",{style:{width:"100%",paddingBottom:7},children:[n.jsx(v,{segments:R(),yearMarkers:!0},l.length),l.map((i,r)=>{const t=C(i,r);return t.length?n.jsx(v,{segments:t,first:r===0},r):null})]})},N="MMMM Y",st=({data:e=B,backgroundColor:o=b[800],title:a=A,selector:m="company",start:d=E("2011-09"),end:h=E(),yearMarkerFrequency:l=1,enableLongTitles:x})=>n.jsx(D,{backgroundColor:o,subtitle:`${d.format(N)} - ${h.format(N)}`,title:a,children:n.jsx(U,{data:e,selector:m,start:d,end:h,yearMarkerFrequency:l,enableLongTitles:x})});export{st as T};
//# sourceMappingURL=TimelineCard-CNfemLQY.js.map
