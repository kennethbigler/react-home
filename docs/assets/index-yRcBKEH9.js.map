{"version":3,"file":"index-yRcBKEH9.js","sources":["../../src/apis/Dice.ts","../../src/components/games/yahtzee/score-table/Header.tsx","../../src/components/games/yahtzee/score-table/TopScores.tsx","../../src/components/games/yahtzee/score-table/scoreTableHelper.ts","../../src/components/games/yahtzee/score-table/TopTable.tsx","../../src/components/games/yahtzee/types.ts","../../src/components/games/yahtzee/score-table/BottomScores.tsx","../../src/components/games/yahtzee/score-table/BottomTable.tsx","../../src/components/games/yahtzee/score-table/ScoreTable.tsx","../../src/components/games/yahtzee/Header.tsx","../../src/components/games/yahtzee/TableHeader.tsx","../../src/recoil/yahtzee-state.ts","../../src/components/games/yahtzee/use-yahtzee-state.ts","../../src/components/games/yahtzee/Yahtzee.tsx"],"sourcesContent":["import { Dice } from \"../recoil/yahtzee-state\";\n\nexport const diceRoller = (): Dice =>\n  (Math.floor(Math.random() * 6) + 1) as Dice;\n\nexport default {\n  // randomize order of the cards\n  roll(): Dice {\n    return diceRoller();\n  },\n};\n\n// Dice as a react hook, seems kind of like an anti-pattern\nexport function useDice(): () => number {\n  function rollDice(): number {\n    return diceRoller();\n  }\n\n  return rollDice;\n}\n","import * as React from \"react\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\n\ninterface HeaderProps {\n  sx: React.CSSProperties;\n}\n\nconst Header: React.FC<HeaderProps> = React.memo((props: HeaderProps) => (\n  <TableHead>\n    <TableRow sx={{ borderBottom: 2 }}>\n      <TableCell>Minimum Required for Bonus</TableCell>\n      <TableCell>How to Score</TableCell>\n      <TableCell sx={props.sx}>Game Score</TableCell>\n    </TableRow>\n  </TableHead>\n));\n\nHeader.displayName = \"Header\";\n\nexport default Header;\n","import * as React from \"react\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\n\ninterface TopScoresProps {\n  finalTopSum: number;\n  topSum: number;\n  sx: React.CSSProperties;\n}\n\nconst TopScores: React.FC<TopScoresProps> = React.memo(\n  ({ topSum, finalTopSum, sx }: TopScoresProps) => (\n    <>\n      <TableRow sx={{ borderTop: 2 }}>\n        <TableCell colSpan={2} component=\"th\" scope=\"row\">\n          Total == 63\n        </TableCell>\n        <TableCell sx={sx}>{topSum}</TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell component=\"th\" scope=\"row\">\n          Bonus if &gt;= 63\n        </TableCell>\n        <TableCell>Score 35</TableCell>\n        <TableCell sx={sx}>{topSum % 100 >= 63 ? 35 : 0}</TableCell>\n      </TableRow>\n      <TableRow sx={{ borderBottom: 2 }}>\n        <TableCell colSpan={2} component=\"th\" scope=\"row\">\n          Upper Half Total\n        </TableCell>\n        <TableCell sx={sx}>{finalTopSum}</TableCell>\n      </TableRow>\n    </>\n  ),\n);\n\nTopScores.displayName = \"TopScores\";\n\nexport default TopScores;\n","import { TopGameScore } from \"../types\";\nimport { Dice } from \"../../../../recoil/yahtzee-state\";\n\ninterface DiceHistogram {\n  0?: number;\n  1: number;\n  2: number;\n  3: number;\n  4: number;\n  5: number;\n  6: number;\n}\n\nexport const getHistogram =\n  () =>\n  (hist: DiceHistogram, val: Dice): DiceHistogram => {\n    if (!hist[val]) {\n      hist[val] = 1;\n    } else {\n      hist[val] += 1;\n    }\n    return hist;\n  };\n\nexport const hasXDice = (values: Dice[], n: number): boolean => {\n  const hist = values.reduce(getHistogram(), {} as DiceHistogram);\n  let hasDice = false;\n  Object.values(hist).forEach((value) => {\n    if (value >= n) {\n      hasDice = true;\n    }\n  });\n  return hasDice;\n};\n\nexport const isFullHouse = (values: Dice[]): boolean => {\n  const hist = values.reduce(getHistogram(), {} as DiceHistogram);\n\n  let has3 = false;\n  let has2 = false;\n\n  Object.values(hist).forEach((value) => {\n    if (value >= 3) {\n      has3 = true;\n    } else if (value >= 2) {\n      has2 = true;\n    }\n  });\n\n  return has3 && has2;\n};\n\nexport const isStraight = (values: Dice[], length: number): boolean => {\n  const hist = values.reduce(getHistogram(), {} as DiceHistogram);\n\n  let count = 0;\n  const dice: Dice[] = [1, 2, 3, 4, 5, 6];\n  dice.forEach((i: Dice) => {\n    if (count < length) {\n      const value = hist[i];\n      if (!value) {\n        count = 0;\n      } else {\n        count += 1;\n      }\n    }\n  });\n  return count >= length;\n};\n\nexport const canYahtzeeBonus = (values: Dice[], top: TopGameScore[]): boolean =>\n  Object.entries(values.reduce(getHistogram(), {} as DiceHistogram)).reduce(\n    (acc: boolean, [key, value]) => {\n      if (value === 5 && top[Number(key) - 1].score >= 0) {\n        return true;\n      }\n      return acc;\n    },\n    false,\n  );\n","import * as React from \"react\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { BottomGameScore, TopGameScore } from \"../types\";\nimport { Dice } from \"../../../../recoil/yahtzee-state\";\nimport TopScores from \"./TopScores\";\nimport { hasXDice } from \"./scoreTableHelper\";\n\ninterface TopTableProps {\n  finalTopSum: number;\n  getScoreButton: (\n    showButton: boolean,\n    points: number,\n    wasTop: boolean,\n    i: number,\n  ) => React.ReactNode;\n  showScoreButtons: boolean;\n  sx: React.CSSProperties;\n  top: TopGameScore[];\n  bottom: BottomGameScore[];\n  topSum: number;\n  values: Dice[];\n}\n\nconst TopTable: React.FC<TopTableProps> = (props: TopTableProps) => {\n  const {\n    bottom,\n    values,\n    showScoreButtons,\n    getScoreButton,\n    top,\n    sx,\n    topSum,\n    finalTopSum,\n  } = props;\n\n  const getButtonInfo = (d: number): [number, number] =>\n    values.reduce(\n      (count, val) => {\n        if (val === d) {\n          count[0] += 1;\n          count[1] += d;\n        }\n        return count;\n      },\n      [0, 0],\n    );\n\n  const hasYahtzee = bottom[5].score > 0;\n  const yahtzeeBonus = hasYahtzee && hasXDice(values, 5);\n\n  const getTopTableButtons = (\n    score: number,\n    showButton: boolean,\n    sum: number,\n    i: number,\n  ): React.ReactNode | null => {\n    if (score >= 0) {\n      return score;\n    }\n    return showScoreButtons\n      ? getScoreButton(showButton, yahtzeeBonus ? sum + 100 : sum, true, i)\n      : null;\n  };\n\n  return (\n    <>\n      {top.map(({ name, score }, i) => {\n        const d = i + 1;\n        const [count, sum] = getButtonInfo(d);\n        const showButton = count >= 1;\n\n        return (\n          <TableRow key={name}>\n            <TableCell\n              component=\"th\"\n              scope=\"row\"\n            >{`${name}: ${d},${d},${d} = ${d * 3}`}</TableCell>\n            <TableCell>{`Add Only ${name}`}</TableCell>\n            <TableCell sx={sx}>\n              {getTopTableButtons(score, showButton, sum, i)}\n            </TableCell>\n          </TableRow>\n        );\n      })}\n      <TopScores topSum={topSum} finalTopSum={finalTopSum} sx={sx} />\n    </>\n  );\n};\n\nexport default TopTable;\n","export const ADD_DICE = \"Sum of Dice\";\ntype AddDice = \"Sum of Dice\";\n\nexport interface TopGameScore {\n  name: string;\n  score: number;\n}\nexport interface BottomGameScore {\n  name: string;\n  score: number;\n  hint: string;\n  points: number | AddDice;\n}\n\nexport default ADD_DICE;\n","import * as React from \"react\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\n\ninterface BottomScoresProps {\n  bottomSum: number;\n  finalTopSum: number;\n  sx: React.CSSProperties;\n}\n\nconst BottomScores: React.FC<BottomScoresProps> = React.memo(\n  ({ finalTopSum, bottomSum, sx }: BottomScoresProps) => (\n    <>\n      <TableRow sx={{ borderTop: 2 }}>\n        <TableCell colSpan={2} component=\"th\" scope=\"row\">\n          Lower Half Total\n        </TableCell>\n        <TableCell sx={sx}>{bottomSum}</TableCell>\n      </TableRow>\n      <TableRow>\n        <TableCell colSpan={2} component=\"th\" scope=\"row\">\n          Upper Half Total\n        </TableCell>\n        <TableCell sx={sx}>{finalTopSum}</TableCell>\n      </TableRow>\n      <TableRow sx={{ borderBottom: 2 }}>\n        <TableCell colSpan={2} component=\"th\" scope=\"row\">\n          Grand Total\n        </TableCell>\n        <TableCell sx={sx}>{finalTopSum + bottomSum}</TableCell>\n      </TableRow>\n    </>\n  ),\n);\n\nBottomScores.displayName = \"BottomScores\";\n\nexport default BottomScores;\n","import * as React from \"react\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { TopGameScore, BottomGameScore, ADD_DICE } from \"../types\";\nimport { Dice } from \"../../../../recoil/yahtzee-state\";\nimport {\n  hasXDice,\n  isFullHouse,\n  isStraight,\n  canYahtzeeBonus,\n} from \"./scoreTableHelper\";\nimport BottomScores from \"./BottomScores\";\n\ninterface BottomTableProps {\n  bottom: BottomGameScore[];\n  bottomSum: number;\n  finalTopSum: number;\n  getScoreButton: (\n    showButton: boolean,\n    points: number,\n    wasTop: boolean,\n    i: number,\n  ) => React.ReactNode;\n  showScoreButtons: boolean;\n  sx: React.CSSProperties;\n  top: TopGameScore[];\n  values: Dice[];\n}\n\nconst getDiceValue = (values: Dice[]): number =>\n  values.reduce((sum: number, d) => sum + d, 0);\n\nconst showButton = (i: number, values: Dice[]): boolean => {\n  switch (i) {\n    case 0: // 3 of a kind\n      return hasXDice(values, 3);\n    case 1: // 4 of a kind\n      return hasXDice(values, 4);\n    case 2: // Full House\n      return isFullHouse(values);\n    case 3: // Sm. Straight\n      return isStraight(values, 4);\n    case 4: // Lg. Straight\n      return isStraight(values, 5);\n    case 5: // Yahtzee\n      return hasXDice(values, 5);\n    case 6: // Chance\n      return true;\n    default:\n      // eslint-disable-next-line no-console\n      console.error(\"Unexpected Value\");\n      return false;\n  }\n};\n\nconst BottomTable: React.FC<BottomTableProps> = (props: BottomTableProps) => {\n  const { values, showScoreButtons, getScoreButton, top } = props;\n  const getBottomTableButtons = React.useCallback(\n    (\n      score: number,\n      points: number,\n      hasYahtzee: boolean,\n      i: number,\n    ): React.ReactNode | null => {\n      if (score >= 0) {\n        return score;\n      }\n      if (showScoreButtons) {\n        // Yahtzee Bonus\n        if (hasYahtzee) {\n          if (canYahtzeeBonus(values, top)) {\n            return getScoreButton(true, points + 100, false, i);\n          }\n        }\n        return getScoreButton(showButton(i, values), points, false, i);\n      }\n      return null;\n    },\n    [getScoreButton, showScoreButtons, top, values],\n  );\n\n  const { bottom, sx } = props;\n  const generateBottomTable = React.useCallback((): React.ReactNode => {\n    const hasYahtzee = bottom[5].score > 0;\n    return bottom.map((gameScore, i) => {\n      const { name, hint, points, score } = gameScore;\n\n      const parsedPoints = points === ADD_DICE ? getDiceValue(values) : points;\n\n      return (\n        <TableRow key={name}>\n          <TableCell component=\"th\" scope=\"row\">\n            {name}\n          </TableCell>\n          <TableCell>{hint}</TableCell>\n          <TableCell sx={sx}>\n            {getBottomTableButtons(score, parsedPoints, hasYahtzee, i)}\n          </TableCell>\n        </TableRow>\n      );\n    });\n  }, [bottom, getBottomTableButtons, sx, values]);\n\n  const { finalTopSum, bottomSum } = props;\n\n  return (\n    <>\n      {generateBottomTable()}\n      <BottomScores bottomSum={bottomSum} finalTopSum={finalTopSum} sx={sx} />\n    </>\n  );\n};\n\nexport default BottomTable;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport { TopGameScore, BottomGameScore } from \"../types\";\nimport { Dice } from \"../../../../recoil/yahtzee-state\";\nimport Header from \"./Header\";\nimport TopTable from \"./TopTable\";\nimport BottomTable from \"./BottomTable\";\n\ninterface ScoreTableProps {\n  bottom: BottomGameScore[];\n  bottomSum: number;\n  finalTopSum: number;\n  onTopScore: (points: number, i: number) => void;\n  onBottomScore: (points: number, i: number) => void;\n  showScoreButtons: boolean;\n  top: TopGameScore[];\n  topSum: number;\n  values: Dice[];\n}\n\nconst centerStyle: React.CSSProperties = { textAlign: \"center\" };\n\nconst ScoreTable: React.FC<ScoreTableProps> = (props: ScoreTableProps) => {\n  const {\n    bottom,\n    bottomSum,\n    finalTopSum,\n    showScoreButtons,\n    top,\n    topSum,\n    values,\n    onTopScore,\n    onBottomScore,\n  } = props;\n\n  const getScoreButton = React.useCallback(\n    (\n      showButton: boolean,\n      points: number,\n      wasTop: boolean,\n      i: number,\n    ): React.ReactNode =>\n      showButton ? (\n        <Button\n          color=\"secondary\"\n          variant=\"outlined\"\n          onClick={\n            wasTop\n              ? (): void => onTopScore(points, i)\n              : (): void => onBottomScore(points, i)\n          }\n        >\n          {`Add ${points} Points`}\n        </Button>\n      ) : (\n        <Button\n          color=\"secondary\"\n          variant=\"outlined\"\n          onClick={\n            wasTop\n              ? (): void => onTopScore(0, i)\n              : (): void => onBottomScore(0, i)\n          }\n        >\n          0\n        </Button>\n      ),\n    [onBottomScore, onTopScore],\n  );\n\n  return (\n    <Table size=\"small\" aria-label=\"yahtzee game table\">\n      <Header sx={centerStyle} />\n      <TableBody>\n        <TopTable\n          finalTopSum={finalTopSum}\n          getScoreButton={getScoreButton}\n          showScoreButtons={showScoreButtons}\n          sx={centerStyle}\n          top={top}\n          values={values}\n          bottom={bottom}\n          topSum={topSum}\n        />\n        <BottomTable\n          finalTopSum={finalTopSum}\n          getScoreButton={getScoreButton}\n          showScoreButtons={showScoreButtons}\n          sx={centerStyle}\n          top={top}\n          values={values}\n          bottom={bottom}\n          bottomSum={bottomSum}\n        />\n      </TableBody>\n    </Table>\n  );\n};\n\nexport default ScoreTable;\n","import * as React from \"react\";\nimport Typography from \"@mui/material/Typography\";\nimport PlayerMenu from \"../../common/header/PlayerMenu\";\n\ninterface HeaderProps {\n  bestScore: number;\n  lastScore: number;\n  money: number;\n  name: string;\n}\n\nconst Header: React.FC<HeaderProps> = ({\n  bestScore,\n  lastScore,\n  money,\n  name,\n}: HeaderProps) => (\n  <>\n    <div className=\"flex-container\">\n      <Typography variant=\"h2\" component=\"h1\">\n        Yahtzee\n      </Typography>\n      <PlayerMenu />\n    </div>\n    <div className=\"flex-container\">\n      <Typography variant=\"h4\" component=\"h2\">\n        {name}: ${money}\n      </Typography>\n      <Typography variant=\"h4\">{`Best: ${bestScore}`}</Typography>\n      <Typography variant=\"h4\">{`Last: ${lastScore}`}</Typography>\n    </div>\n  </>\n);\n\nexport default Header;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport { Dice } from \"../../../recoil/yahtzee-state\";\n\ninterface TableHeaderProps {\n  roll: Dice;\n  values: Dice[];\n  saved: Dice[];\n  handleUnsave: (i: number) => void;\n  handleSave: (i: number) => void;\n  handleDiceRoll: React.MouseEventHandler;\n  getButtonText: (roll: Dice) => string;\n}\n\nconst wrapperStyles: React.CSSProperties = {\n  display: \"block\",\n  margin: \"auto\",\n  width: 320,\n};\n\nconst TableHeader: React.FC<TableHeaderProps> = (props: TableHeaderProps) => {\n  const {\n    values,\n    saved,\n    roll,\n    handleUnsave,\n    handleSave,\n    handleDiceRoll,\n    getButtonText,\n  } = props;\n\n  return (\n    <div className=\"flex-container\">\n      <Typography variant=\"h4\" component=\"h3\">{`Roll #${roll}/3`}</Typography>\n      <div style={wrapperStyles}>\n        {saved.map((val, i) => (\n          <Button\n            key={i}\n            variant=\"contained\"\n            onClick={(): void => handleUnsave(i)}\n          >\n            {val}\n          </Button>\n        ))}\n        {values.map((val, i) => (\n          <Button\n            key={i}\n            color=\"secondary\"\n            variant=\"outlined\"\n            onClick={(): void => handleSave(i)}\n          >\n            {val}\n          </Button>\n        ))}\n      </div>\n      <Button\n        onClick={handleDiceRoll}\n        variant=\"contained\"\n        disabled={roll === 3}\n      >\n        {getButtonText(roll)}\n      </Button>\n    </div>\n  );\n};\n\nexport default TableHeader;\n","import { atom, DefaultValue, selector } from \"recoil\";\nimport playerAtom from \"./player-atom\";\n\nexport const dice = [0, 1, 2, 3, 4, 5, 6] as const;\nexport type Dice = (typeof dice)[number];\nexport interface YahtzeeState {\n  roll: Dice;\n  values: Dice[];\n  saved: Dice[];\n  turn: number;\n  showScoreButtons: boolean;\n  topScores: number[];\n  bottomScores: number[];\n  bestScore: number;\n  lastScore: number;\n}\n\nexport const newYahtzee = (): Omit<\n  YahtzeeState,\n  \"bestScore\" | \"lastScore\"\n> => ({\n  roll: 0,\n  values: [0, 0, 0, 0, 0],\n  saved: [],\n  turn: 0,\n  showScoreButtons: false,\n  topScores: [-1, -1, -1, -1, -1, -1],\n  bottomScores: [-1, -1, -1, -1, -1, -1, -1],\n});\n\nexport const yahtzeeAtom = atom({\n  key: \"yahtzeeAtom\",\n  default: (JSON.parse(\n    localStorage.getItem(\"yahtzee-atom\") || \"null\",\n  ) as YahtzeeState) || { ...newYahtzee(), bestScore: 0, lastScore: 0 },\n  effects: [\n    ({ onSet }) => {\n      onSet((newState) => {\n        localStorage.setItem(\"yahtzee-atom\", JSON.stringify(newState));\n      });\n    },\n  ],\n});\n\nexport const yahtzeeReadOnlyState = selector({\n  key: \"yahtzeeReadOnlyState\",\n  get: ({ get }) => {\n    const { topScores, bottomScores } = get(yahtzeeAtom);\n    const { name } = get(playerAtom)[0];\n\n    let count = 0;\n\n    const topSum = topScores.reduce((sum, score) => {\n      if (score >= 0) {\n        count += 1;\n        sum += score;\n      }\n      return sum;\n    }, 0);\n\n    const bottomSum = bottomScores.reduce((sum, score) => {\n      if (score >= 0) {\n        count += 1;\n        sum += score;\n      }\n      return sum;\n    }, 0);\n\n    let finalTopSum = topSum;\n    if (topSum >= 63) {\n      finalTopSum += 35;\n    }\n\n    const finish = count >= 13;\n\n    return {\n      topSum,\n      bottomSum,\n      finalTopSum,\n      finish,\n      name,\n    };\n  },\n});\n\nconst yahtzeeState = selector({\n  key: \"yahtzeeState\",\n  get: ({ get }) => {\n    const yahtzee = get(yahtzeeAtom);\n    const { money } = get(playerAtom)[0];\n\n    return { ...yahtzee, money };\n  },\n  set: ({ get, set }, state) => {\n    if (!(state instanceof DefaultValue)) {\n      const { money, ...yahtzee } = state;\n      set(yahtzeeAtom, yahtzee);\n\n      const players = get(playerAtom);\n      const newPlayers = [...players];\n      newPlayers[0] = { ...players[0], money };\n      set(playerAtom, newPlayers);\n    }\n  },\n});\n\nexport default yahtzeeState;\n","import { useRecoilState } from \"recoil\";\nimport yahtzeeState, { newYahtzee, Dice } from \"../../../recoil/yahtzee-state\";\n\nconst useYahtzeeState = () => {\n  const [state, setState] = useRecoilState(yahtzeeState);\n\n  const newGame = (score: number) =>\n    setState({\n      ...newYahtzee(),\n      lastScore: score,\n      bestScore: score > state.bestScore ? score : state.bestScore,\n      money: state.money + Math.ceil(score / 10),\n    });\n  const diceClick = (values: Dice[], saved: Dice[]) =>\n    setState({\n      ...state,\n      values,\n      saved,\n    });\n  const updateTop = (topScores: number[]) =>\n    setState({\n      ...state,\n      topScores,\n      showScoreButtons: false,\n      roll: 0,\n      values: [0, 0, 0, 0, 0],\n      saved: [],\n    });\n  const updateBottom = (bottomScores: number[]) =>\n    setState({\n      ...state,\n      bottomScores,\n      showScoreButtons: false,\n      roll: 0,\n      values: [0, 0, 0, 0, 0],\n      saved: [],\n    });\n  const updateRoll = (\n    values: Dice[],\n    saved: Dice[],\n    roll: Dice,\n    payToPlay: boolean,\n  ) =>\n    setState({\n      ...state,\n      values,\n      saved,\n      roll,\n      showScoreButtons: true,\n      money: payToPlay ? state.money - 25 : state.money,\n    });\n\n  return {\n    state,\n    newGame,\n    diceClick,\n    updateTop,\n    updateBottom,\n    updateRoll,\n  };\n};\n\nexport default useYahtzeeState;\n","import * as React from \"react\";\nimport Typography from \"@mui/material/Typography\";\nimport { useRecoilValue } from \"recoil\";\nimport DiceAPI from \"../../../apis/Dice\";\nimport ScoreTable from \"./score-table/ScoreTable\";\nimport { ADD_DICE, BottomGameScore } from \"./types\";\nimport Header from \"./Header\";\nimport TableHeader from \"./TableHeader\";\nimport { Dice, yahtzeeReadOnlyState } from \"../../../recoil/yahtzee-state\";\nimport useYahtzeeState from \"./use-yahtzee-state\";\n\nconst topConstants = [\n  { name: \"Aces\" },\n  { name: \"Twos\" },\n  { name: \"Threes\" },\n  { name: \"Fours\" },\n  { name: \"Fives\" },\n  { name: \"Sixes\" },\n];\nconst bottomConstants = [\n  { name: \"3 of a kind\", hint: ADD_DICE, points: ADD_DICE },\n  { name: \"4 of a kind\", hint: ADD_DICE, points: ADD_DICE },\n  { name: \"Full House\", hint: \"Score 25\", points: 25 },\n  { name: \"Sm. Straight (4)\", hint: \"Score 30\", points: 30 },\n  { name: \"Lg. Straight (5)\", hint: \"Score 40\", points: 40 },\n  { name: \"Yahtzee\", hint: \"Score 50\", points: 50 },\n  { name: \"Chance\", hint: ADD_DICE, points: ADD_DICE },\n];\n\nconst Yahtzee: React.FC = () => {\n  const { state, diceClick, newGame, updateTop, updateBottom, updateRoll } =\n    useYahtzeeState();\n\n  const {\n    topScores,\n    bottomScores,\n    values,\n    saved,\n    roll,\n    showScoreButtons,\n    bestScore,\n    lastScore,\n    money,\n  } = state;\n\n  const { topSum, bottomSum, finalTopSum, finish, name } =\n    useRecoilValue(yahtzeeReadOnlyState);\n\n  const handleDiceRoll = (): void => {\n    if (finish) {\n      newGame(finalTopSum + bottomSum);\n      return;\n    }\n    if (roll >= 3) {\n      return;\n    }\n\n    const newValues = [...values];\n    const newSaved = [...saved];\n\n    for (let i = 0; i < newValues.length; i += 1) {\n      newValues[i] = DiceAPI.roll();\n    }\n    newValues.sort();\n    newSaved.sort();\n    updateRoll(\n      newValues,\n      newSaved,\n      (roll + 1) as Dice,\n      bottomSum + topSum === 0 && roll === 0,\n    );\n  };\n\n  const handleSave = (i: number): void => {\n    if (values[i] === 0) {\n      return;\n    }\n    const newValues = [...values];\n    const newSaved = [...saved];\n    newSaved.push(newValues.splice(i, 1)[0]);\n    newSaved.sort();\n    diceClick(newValues, newSaved);\n  };\n\n  const handleUnsave = (i: number): void => {\n    const newValues = [...values];\n    const newSaved = [...saved];\n    newValues.push(newSaved.splice(i, 1)[0]);\n    newValues.sort();\n    diceClick(newValues, newSaved);\n  };\n\n  const getButtonText = React.useCallback(\n    (rollNum: Dice): string => {\n      if (finish) {\n        return \"New Game\";\n      }\n\n      switch (rollNum) {\n        case 0:\n          return \"First Roll\";\n        case 1:\n          return \"Second Roll\";\n        case 2:\n          return \"Last Roll\";\n        case 3:\n          return \"Score\";\n        default:\n          return \"Error\";\n      }\n    },\n    [finish],\n  );\n\n  const handleTopScore = (points: number, i: number): void => {\n    const newTopScores = [...topScores];\n    newTopScores[i] = points;\n    updateTop(newTopScores);\n  };\n\n  const handleBottomScore = (points: number, i: number): void => {\n    const newBottomScores = [...bottomScores];\n    newBottomScores[i] = points;\n    updateBottom(newBottomScores);\n  };\n\n  const top = topScores.map((score, i) => ({ ...topConstants[i], score }));\n  const bottom = bottomScores.map((score, i) => ({\n    ...bottomConstants[i],\n    score,\n  })) as BottomGameScore[];\n\n  return (\n    <>\n      <Header\n        bestScore={bestScore}\n        lastScore={lastScore}\n        money={money}\n        name={name}\n      />\n      <hr aria-hidden />\n      <TableHeader\n        values={values}\n        saved={saved}\n        roll={roll}\n        handleUnsave={handleUnsave}\n        handleSave={handleSave}\n        handleDiceRoll={handleDiceRoll}\n        getButtonText={getButtonText}\n      />\n      <hr aria-hidden />\n      <Typography variant=\"h4\">{`Total: ${\n        finalTopSum + bottomSum\n      }`}</Typography>\n      <ScoreTable\n        values={[...saved, ...values]}\n        bottom={bottom}\n        top={top}\n        onTopScore={handleTopScore}\n        onBottomScore={handleBottomScore}\n        showScoreButtons={showScoreButtons}\n        topSum={topSum}\n        finalTopSum={finalTopSum}\n        bottomSum={bottomSum}\n      />\n    </>\n  );\n};\n\nexport default Yahtzee;\n"],"names":["diceRoller","DiceAPI","Header","React.memo","props","jsx","TableHead","jsxs","TableRow","TableCell","TopScores","topSum","finalTopSum","sx","Fragment","getHistogram","hist","val","hasXDice","values","n","hasDice","value","isFullHouse","has3","has2","isStraight","length","count","i","canYahtzeeBonus","top","acc","key","TopTable","bottom","showScoreButtons","getScoreButton","getButtonInfo","d","yahtzeeBonus","getTopTableButtons","score","showButton","sum","name","ADD_DICE","BottomScores","bottomSum","getDiceValue","BottomTable","getBottomTableButtons","React.useCallback","points","hasYahtzee","generateBottomTable","gameScore","hint","parsedPoints","centerStyle","ScoreTable","onTopScore","onBottomScore","wasTop","Button","Table","TableBody","bestScore","lastScore","money","Typography","PlayerMenu","wrapperStyles","TableHeader","saved","roll","handleUnsave","handleSave","handleDiceRoll","getButtonText","newYahtzee","yahtzeeAtom","atom","onSet","newState","yahtzeeReadOnlyState","selector","get","topScores","bottomScores","playerAtom","finish","yahtzeeState","yahtzee","set","state","DefaultValue","players","newPlayers","useYahtzeeState","setState","useRecoilState","payToPlay","topConstants","bottomConstants","Yahtzee","diceClick","newGame","updateTop","updateBottom","updateRoll","useRecoilValue","newValues","newSaved","rollNum","handleTopScore","newTopScores","handleBottomScore","newBottomScores"],"mappings":"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"}