{"version":3,"file":"index-Cbb7-vaM.js","sources":["../../src/jotai/spades-atom.ts","../../src/components/games/spades/control-bar/AddBidPlayer.tsx","../../src/components/games/spades/control-bar/AddBid.tsx","../../src/components/games/spades/control-bar/AddPenalty.tsx","../../src/components/games/spades/control-bar/AddScorePlayer.tsx","../../src/components/games/spades/control-bar/AddScore.tsx","../../src/components/games/spades/control-bar/ControlBar.tsx","../../src/components/games/spades/ScoreTable.tsx","../../src/components/games/spades/helpers.ts","../../src/components/games/spades/useSpades.ts","../../src/components/games/spades/Spades.tsx"],"sourcesContent":["import { atomWithStorage } from \"jotai/utils\";\n\nexport const MIN_BID = 0;\nexport const MAX_BID = 13;\n\nexport interface Bid {\n  bid: number;\n  blind: boolean;\n  train: boolean;\n}\nexport type Bids = [Bid, Bid, Bid, Bid];\n\nexport interface ScoreRow {\n  start: string;\n  bid: string;\n  score1?: number;\n  bags1?: number;\n  mod1?: string;\n  score2?: number;\n  bags2?: number;\n  mod2?: string;\n}\n\ninterface SpadesState {\n  /** 0, 1, 2, 3, updates on +Score, persists over games */\n  first: number;\n  /** recent bids */\n  lastBid: Bids;\n  /** score table, updates on +Score & +Bid, resets over games */\n  data: ScoreRow[];\n}\n\nexport const defaultBid: Bid = { bid: 3, blind: false, train: false };\nconst initialState: SpadesState = {\n  first: 0,\n  lastBid: [defaultBid, defaultBid, defaultBid, defaultBid],\n  data: [],\n};\n\nconst spadesAtom = atomWithStorage(\"spadesAtom\", initialState);\n\nexport default spadesAtom;\n","import * as React from \"react\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Switch from \"@mui/material/Switch\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Add from \"@mui/icons-material/Add\";\nimport Remove from \"@mui/icons-material/Remove\";\nimport { MAX_BID, MIN_BID } from \"../../../../jotai/spades-atom\";\n\ninterface AddBidPlayerProps {\n  id: string;\n  blindTrade: number;\n  canTrain?: boolean;\n  bid: number;\n  blind: boolean;\n  train: boolean;\n  onBid: (bid: number, blind: boolean, train: boolean) => void;\n}\n\nconst AddBidPlayer = ({\n  id,\n  blindTrade,\n  canTrain,\n  bid,\n  blind,\n  train,\n  onBid,\n}: AddBidPlayerProps) => {\n  const decrBid = () => onBid(Math.max(bid - 1, MIN_BID), false, false);\n  const incrBid = () => onBid(Math.min(bid + 1, MAX_BID), false, false);\n\n  const handleBlind = (\n    _e: React.ChangeEvent<HTMLInputElement>,\n    checked: boolean,\n  ) => onBid(bid, checked, false);\n\n  const handleTrain = (\n    _e: React.ChangeEvent<HTMLInputElement>,\n    checked: boolean,\n  ) => onBid(bid, false, checked);\n\n  return (\n    <TableRow>\n      <TableCell>{id}</TableCell>\n      <TableCell align=\"center\">\n        <IconButton onClick={decrBid} disabled={bid <= MIN_BID}>\n          <Remove />\n        </IconButton>\n        {bid}\n        <IconButton onClick={incrBid} disabled={bid >= MAX_BID}>\n          <Add />\n        </IconButton>\n      </TableCell>\n      <TableCell align=\"right\">\n        <Switch\n          checked={blind}\n          inputProps={{ \"aria-label\": `P${id} Blind Nil` }}\n          onChange={handleBlind}\n          size=\"small\"\n        />\n        {blindTrade || blind ? blindTrade : \"\"}\n      </TableCell>\n      <TableCell align=\"right\">\n        {canTrain ? (\n          <Switch\n            checked={train}\n            inputProps={{ \"aria-label\": `P${id} Trains` }}\n            onChange={handleTrain}\n            size=\"small\"\n          />\n        ) : null}\n      </TableCell>\n    </TableRow>\n  );\n};\n\nexport default AddBidPlayer;\n","import * as React from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport InfoPopup from \"../../../common/info-popover/InfoPopup\";\nimport AddBidPlayer from \"./AddBidPlayer\";\nimport { Bids, defaultBid } from \"../../../../jotai/spades-atom\";\n\ninterface AddBidProps {\n  blindTrade: number;\n  first: number;\n  initials: [string, string, string, string];\n  onBidSave: (bids: Bids) => void;\n}\n\nconst getBlindTrade = (blindTrade: number, n: number) =>\n  (blindTrade < 0 && (n === 0 || n === 2)) ||\n  (blindTrade > 0 && (n === 1 || n === 3))\n    ? Math.min(Math.abs(blindTrade), 3)\n    : 0;\n\nconst AddBid = ({ blindTrade, first, initials, onBidSave }: AddBidProps) => {\n  const [bids, setBids] = React.useState<Bids>([\n    defaultBid,\n    defaultBid,\n    defaultBid,\n    defaultBid,\n  ]);\n\n  const a = (first + 0) % 4;\n  const b = (first + 1) % 4;\n  const c = (first + 2) % 4;\n  const d = (first + 3) % 4;\n\n  const handleBid =\n    (n: number) => (bid: number, blind: boolean, train: boolean) => {\n      let newBid = { bid, blind, train };\n      if (blind) {\n        newBid = { bid: 0, blind, train: false };\n      } else if (train) {\n        let trainBid = 10;\n        switch (n) {\n          case a:\n            trainBid -= bids[c].bid;\n            break;\n          case b:\n            trainBid -= bids[d].bid;\n            break;\n          case c:\n            trainBid -= bids[a].bid;\n            break;\n          case d:\n          default:\n            trainBid -= bids[b].bid;\n        }\n        newBid = {\n          bid: trainBid,\n          blind: false,\n          train,\n        };\n      } else {\n        newBid = { bid, blind: false, train: false };\n      }\n      const newBids: Bids = [...bids];\n      newBids[n] = newBid;\n      setBids(newBids);\n    };\n\n  const handleSave = () => {\n    onBidSave(bids);\n    setBids([defaultBid, defaultBid, defaultBid, defaultBid]);\n  };\n\n  const bags = bids.reduce((acc, bid) => acc - bid.bid, 13);\n\n  return (\n    <InfoPopup title=\"+ Bid\" onSave={handleSave}>\n      <Table aria-label=\"Bid Table\" padding=\"none\">\n        <TableHead>\n          <TableRow>\n            <TableCell width={\"20%\"}>P</TableCell>\n            <TableCell width={\"40%\"} align=\"center\">\n              Bid ({bags} 💰)\n            </TableCell>\n            <TableCell width={\"20%\"} align=\"center\">\n              🦮\n            </TableCell>\n            <TableCell width={\"20%\"} align=\"center\">\n              🚂\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          <AddBidPlayer\n            id={initials[a] + \" 🥇\"}\n            {...bids[a]}\n            onBid={handleBid(a)}\n            blindTrade={getBlindTrade(blindTrade, a)}\n          />\n          <AddBidPlayer\n            id={initials[b]}\n            {...bids[b]}\n            onBid={handleBid(b)}\n            blindTrade={getBlindTrade(blindTrade, b)}\n          />\n          <AddBidPlayer\n            canTrain={0 < bids[a].bid && bids[a].bid < 10}\n            id={initials[c]}\n            {...bids[c]}\n            blindTrade={getBlindTrade(blindTrade, c)}\n            onBid={handleBid(c)}\n          />\n          <AddBidPlayer\n            canTrain={0 < bids[b].bid && bids[b].bid < 10}\n            id={initials[d] + \" 🃏\"}\n            {...bids[d]}\n            blindTrade={getBlindTrade(blindTrade, d)}\n            onBid={handleBid(d)}\n          />\n        </TableBody>\n      </Table>\n    </InfoPopup>\n  );\n};\n\nexport default AddBid;\n","import Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid2\";\nimport InfoPopup from \"../../../common/info-popover/InfoPopup\";\n\ninterface AddPenaltyProps {\n  initials: [string, string, string, string];\n  onPenalty: (team: number) => () => void;\n}\n\nconst AddPenalty = ({ initials, onPenalty }: AddPenaltyProps) => (\n  <InfoPopup title=\"Penalty\">\n    <Grid container spacing={2}>\n      <Grid size={6}>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          color=\"error\"\n          onClick={onPenalty(0)}\n        >\n          Team {initials[0] + initials[2]}\n        </Button>\n      </Grid>\n      <Grid size={6}>\n        <Button\n          fullWidth\n          variant=\"contained\"\n          color=\"error\"\n          onClick={onPenalty(1)}\n        >\n          Team {initials[1] + initials[3]}\n        </Button>\n      </Grid>\n    </Grid>\n  </InfoPopup>\n);\n\nexport default AddPenalty;\n","import * as React from \"react\";\nimport { MAX_BID, MIN_BID } from \"../../../../jotai/spades-atom\";\nimport Grid from \"@mui/material/Grid2\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Add from \"@mui/icons-material/Add\";\nimport Remove from \"@mui/icons-material/Remove\";\nimport { Typography } from \"@mui/material\";\n\ninterface AddScorePlayerProps {\n  initial: string;\n  lastBid: number;\n  made: number;\n  setMade: React.Dispatch<React.SetStateAction<number>>;\n}\n\nconst AddScorePlayer = ({\n  initial,\n  lastBid,\n  made,\n  setMade,\n}: AddScorePlayerProps) => {\n  const decrMade = () => setMade(Math.max(made - 1, MIN_BID));\n  const incrMade = () => setMade(Math.min(made + 1, MAX_BID));\n\n  return (\n    <Grid size={6}>\n      <Typography>\n        {initial} Bid: {lastBid}\n      </Typography>\n      <div>\n        Made:\n        <IconButton onClick={decrMade} disabled={made <= MIN_BID}>\n          <Remove />\n        </IconButton>\n        {made}\n        <IconButton onClick={incrMade} disabled={made >= MAX_BID}>\n          <Add />\n        </IconButton>\n      </div>\n    </Grid>\n  );\n};\n\nexport default AddScorePlayer;\n","import * as React from \"react\";\nimport Grid from \"@mui/material/Grid2\";\nimport Typography from \"@mui/material/Typography\";\nimport InfoPopup from \"../../../common/info-popover/InfoPopup\";\nimport { Bids } from \"../../../../jotai/spades-atom\";\nimport AddScorePlayer from \"./AddScorePlayer\";\n\ninterface AddScoreProps {\n  initials: [string, string, string, string];\n  lastBid: Bids;\n  onScoreSave: (mades: [number, number, number, number]) => void;\n}\n\nconst AddScore = ({ initials, lastBid, onScoreSave }: AddScoreProps) => {\n  const [made0, setMade0] = React.useState(3);\n  const [made1, setMade1] = React.useState(3);\n  const [made2, setMade2] = React.useState(3);\n  const [made3, setMade3] = React.useState(3);\n\n  const total = made0 + made1 + made2 + made3;\n\n  const handleAddScore = () => {\n    onScoreSave([made0, made1, made2, made3]);\n    setMade0(3);\n    setMade1(3);\n    setMade2(3);\n    setMade3(3);\n  };\n\n  const handleSave = total === 13 ? handleAddScore : undefined;\n\n  return (\n    <InfoPopup title=\"+ Score\" onSave={handleSave}>\n      <Typography\n        color={total === 13 ? \"success\" : \"warning\"}\n        align=\"center\"\n        marginBottom={1}\n      >\n        {total !== 13 && \"⚠️\"} Tricks: {total}\n      </Typography>\n      <Grid container spacing={2}>\n        <AddScorePlayer\n          initial={initials[0]}\n          lastBid={lastBid[0].bid}\n          made={made0}\n          setMade={setMade0}\n        />\n        <AddScorePlayer\n          initial={initials[1]}\n          lastBid={lastBid[1].bid}\n          made={made1}\n          setMade={setMade1}\n        />\n        <AddScorePlayer\n          initial={initials[2]}\n          lastBid={lastBid[2].bid}\n          made={made2}\n          setMade={setMade2}\n        />\n        <AddScorePlayer\n          initial={initials[3]}\n          lastBid={lastBid[3].bid}\n          made={made3}\n          setMade={setMade3}\n        />\n      </Grid>\n    </InfoPopup>\n  );\n};\n\nexport default AddScore;\n","import { Bids } from \"../../../../jotai/spades-atom\";\nimport AddBid from \"./AddBid\";\nimport AddPenalty from \"./AddPenalty\";\nimport AddScore from \"./AddScore\";\n\ninterface ControlBarProps {\n  blindTrade: number;\n  first: number;\n  initials: [string, string, string, string];\n  lastBid: Bids;\n  showPenalty: boolean;\n  onBidSave: (bids: Bids) => void;\n  onPenalty: (team: number) => () => void;\n  onScoreSave: (mades: [number, number, number, number]) => void;\n}\n\nconst ControlBar = ({\n  blindTrade,\n  first,\n  initials,\n  lastBid,\n  showPenalty,\n  onBidSave,\n  onPenalty,\n  onScoreSave,\n}: ControlBarProps) => (\n  <div className=\"flex-container\" style={{ margin: \"20px 0\" }}>\n    <AddBid\n      blindTrade={blindTrade}\n      first={first}\n      initials={initials}\n      onBidSave={onBidSave}\n    />\n    {showPenalty && <AddPenalty initials={initials} onPenalty={onPenalty} />}\n    <AddScore initials={initials} lastBid={lastBid} onScoreSave={onScoreSave} />\n  </div>\n);\n\nexport default ControlBar;\n","import Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { ScoreRow } from \"../../../jotai/spades-atom\";\n\ninterface ScoreTableProps {\n  initials: [string, string, string, string];\n  data: ScoreRow[];\n}\n\nconst getScoreText = (score?: number, comp?: number) => {\n  if (score === undefined || comp === undefined || score === 0) {\n    return \"\";\n  } else if (score > 0) {\n    return `${score > 100 && score > comp ? \"🎉 \" : \"\"}${score}`;\n  } else {\n    return `${score}0 + `;\n  }\n};\n\nconst ScoreTable = ({ initials, data }: ScoreTableProps) => (\n  <Table aria-label=\"Bid Table\">\n    <TableHead>\n      <TableRow>\n        <TableCell width={\"10%\"}>🥇</TableCell>\n        <TableCell>\n          Bid\n          <br />({initials[0] + initials[1] + initials[2] + initials[3]})\n        </TableCell>\n        <TableCell>{initials[0] + initials[2]}</TableCell>\n        <TableCell>{initials[1] + initials[3]}</TableCell>\n      </TableRow>\n    </TableHead>\n    <TableBody>\n      {data.map((s, i) => (\n        <TableRow key={i}>\n          <TableCell\n            padding={i === data.length - 1 ? \"none\" : undefined}\n            align=\"center\"\n          >\n            {s.start}\n            {i === data.length - 1 && (s.score1 ? \"🃏\" : \"🥇\")}\n          </TableCell>\n          <TableCell>{s.bid}</TableCell>\n          <TableCell>\n            {getScoreText(s.score1, s.score2)}\n            {s.bags1}\n            {s.mod1 && ` (${s.mod1})`}\n          </TableCell>\n          <TableCell>\n            {getScoreText(s.score2, s.score1)}\n            {s.bags2}\n            {s.mod2 && ` (${s.mod2})`}\n          </TableCell>\n        </TableRow>\n      ))}\n    </TableBody>\n  </Table>\n);\n\nexport default ScoreTable;\n","interface ScoreData {\n  bid: number;\n  blind: boolean;\n  train: boolean;\n  made: number;\n}\n\nconst getScore = (\n  p1: ScoreData,\n  p2: ScoreData,\n  score: number,\n  bags: number,\n): { score: number; bags: number; mod?: string } => {\n  let newScore = 0;\n  let newBags = 0;\n  let mod = \"\";\n\n  // double blind nil\n  if (p1.blind && p2.blind) {\n    if (p1.made === 0 && p2.made === 0) {\n      // win\n      newScore = 80;\n    } else {\n      // lose\n      newBags = p1.made + p2.made;\n      mod = \"🚫🚫\";\n    }\n    // double nil\n  } else if (p1.bid === 0 && p2.bid === 0) {\n    // 1 blind 1 normal\n    if (p1.blind || p2.blind) {\n      if (p1.made === 0 && p2.made === 0) {\n        // win\n        newScore = 60;\n      } else if ((p1.blind && p1.made === 0) || (p2.blind && p2.made === 0)) {\n        // blind win\n        newScore = 30;\n        newBags = p1.made + p2.made;\n        mod = \"🚫\";\n      } else if (p1.made === 0 || p2.made === 0) {\n        // normal win\n        newBags = p1.made + p2.made;\n        mod = \"🚫\";\n      } else {\n        // lose\n        newScore = -30;\n        newBags = p1.made + p2.made;\n        mod = \"🚫🚫\";\n      }\n      // 2 normal\n    } else if (p1.made === 0 && p2.made === 0) {\n      // win\n      newScore = 40;\n    } else if (p1.made === 0 || p2.made === 0) {\n      // half win\n      newBags = p1.made + p2.made;\n      mod = \"🚫\";\n    } else {\n      // lose\n      newScore = -20;\n      newBags = p1.made + p2.made;\n      mod = \"🚫🚫\";\n    }\n    // trains\n  } else if (p1.train || p2.train) {\n    if (p1.made + p2.made >= 10) {\n      // win\n      newScore = 20;\n      newBags = p1.made + p2.made - 10;\n    } else {\n      // lose\n      newScore = -20;\n      mod = \"🚂\";\n    }\n  } else {\n    // eval nils\n    if (p1.bid === 0) {\n      if (p1.made === 0) {\n        // win\n        newScore += p1.blind ? 20 : 10;\n      } else {\n        // lose\n        newScore -= 10;\n        newBags += p1.made;\n        mod = \"🚫\";\n      }\n    } else if (p2.bid === 0) {\n      if (p2.made === 0) {\n        // win\n        newScore += p2.blind ? 20 : 10;\n      } else {\n        // lose\n        newScore -= 10;\n        newBags += p2.made;\n        mod = \"🚫\";\n      }\n    }\n    // eval group score\n    const teamBid = p1.bid + p2.bid;\n    const teamMade = (p1.bid > 0 ? p1.made : 0) + (p2.bid > 0 ? p2.made : 0);\n    if (teamMade >= teamBid) {\n      // win\n      newScore += teamBid;\n      newBags += teamMade - teamBid;\n    } else {\n      // lose\n      newScore -= teamBid;\n      mod += \"🎰\";\n    }\n  }\n  // check for bag out\n  while (bags + newBags >= 10) {\n    newScore -= 9;\n    newBags -= 10;\n    mod += \"💰\";\n  }\n  // return\n  return { score: score + newScore, bags: bags + newBags, mod };\n};\nexport default getScore;\n","import { useAtom, useAtomValue } from \"jotai\";\nimport playerAtom from \"../../../jotai/player-atom\";\nimport scoreboardAtom, { Bid, defaultBid } from \"../../../jotai/spades-atom\";\nimport getScore from \"./helpers\";\n\nconst useSpades = () => {\n  const players = useAtomValue(playerAtom);\n  const [{ first, lastBid, data }, setScoreboard] = useAtom(scoreboardAtom);\n\n  const initials: [string, string, string, string] = [\n    players[0].name[0],\n    players[1].name[0],\n    players[2].name[0],\n    players[3].name[0],\n  ];\n\n  /** sets a new data entry with first and bid info of data, updates first */\n  const addBid = (bids: [Bid, Bid, Bid, Bid]) => {\n    // can't add bid if bid already exists, or if someone won\n    if (data[data.length - 1] && data[data.length - 1]?.score1 === undefined) {\n      return;\n    }\n    // convert bid to storage data format\n    const newData = [...data];\n    const newEntry = {\n      start: initials[first],\n      bid: bids.reduce((acc, b) => {\n        if (b.train) {\n          return acc + \"🚂\";\n        } else if (b.blind) {\n          return acc + \"🦮\";\n        } else if (b.bid === 0) {\n          return acc + \"🚫\";\n        } else if (b.bid >= 10) {\n          return acc + `,${b.bid},`;\n        } else {\n          return acc + b.bid.toString();\n        }\n      }, \"\"),\n    };\n    newData.push(newEntry);\n    // update first player and add data entry\n    setScoreboard({ first, lastBid: bids, data: newData });\n  };\n\n  const penaltyHelper = (score: number, bags: number, mod: string) => {\n    // add bags\n    let newBags = bags + 3;\n    let newMod = mod + \"😈\";\n    let newScore = score;\n    // check for bag out\n    if (newBags >= 10) {\n      newScore -= 9;\n      newBags -= 10;\n      newMod += \"💰\";\n    }\n    // return;\n    return { newScore, newBags, newMod };\n  };\n\n  const addPenalty = (team: number) => () => {\n    let i = data.length - 1;\n    if (data[i]?.score1 === undefined) {\n      i -= 1;\n    }\n    if (team === 0) {\n      const { score1, bags1, mod1 } = data[i] || {};\n      if (score1 === undefined || bags1 === undefined) {\n        return;\n      }\n      const { newScore, newBags, newMod } = penaltyHelper(\n        score1,\n        bags1,\n        mod1 || \"\",\n      );\n      const newData = [...data];\n      newData[i] = {\n        ...data[i],\n        score1: newScore,\n        bags1: newBags,\n        mod1: newMod,\n      };\n      setScoreboard({ first, lastBid, data: newData });\n    } else {\n      const { score2, bags2, mod2 } = data[i] || {};\n      if (score2 === undefined || bags2 === undefined) {\n        return;\n      }\n      const { newScore, newBags, newMod } = penaltyHelper(\n        score2,\n        bags2,\n        mod2 || \"\",\n      );\n      const newData = [...data];\n      newData[i] = {\n        ...data[i],\n        score2: newScore,\n        bags2: newBags,\n        mod2: newMod,\n      };\n      setScoreboard({ first, lastBid, data: newData });\n    }\n  };\n\n  /** calculates and adds score1 and score2 finishing data entry */\n  const addScore = (mades: [number, number, number, number]) => {\n    // can't add scores if no bid exists\n    if (data[data.length - 1]?.score1 !== undefined) {\n      return;\n    }\n    // convert made tricks to scores\n    const newData = [...data];\n    const { score1, bags1, score2, bags2 } = data[data.length - 2] || {};\n    // calculate scores\n    const {\n      score: newScore1,\n      bags: newBags1,\n      mod: mod1,\n    } = getScore(\n      { ...lastBid[0], made: mades[0] },\n      { ...lastBid[2], made: mades[2] },\n      score1 || 0,\n      bags1 || 0,\n    );\n    const {\n      score: newScore2,\n      bags: newBags2,\n      mod: mod2,\n    } = getScore(\n      { ...lastBid[1], made: mades[1] },\n      { ...lastBid[3], made: mades[3] },\n      score2 || 0,\n      bags2 || 0,\n    );\n    // update scores in data entry\n    newData[data.length - 1] = {\n      ...data[data.length - 1],\n      score1: newScore1,\n      bags1: newBags1,\n      mod1,\n      score2: newScore2,\n      bags2: newBags2,\n      mod2,\n    };\n    setScoreboard({\n      first: (first + 1) % 4,\n      lastBid: [defaultBid, defaultBid, defaultBid, defaultBid],\n      data: newData,\n    });\n  };\n\n  const newGame = () =>\n    setScoreboard({\n      first,\n      lastBid: [defaultBid, defaultBid, defaultBid, defaultBid],\n      data: [],\n    });\n\n  return {\n    first,\n    lastBid,\n    data,\n    initials,\n    addBid,\n    addPenalty,\n    addScore,\n    newGame,\n  };\n};\n\nexport default useSpades;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport PlayerMenu from \"../../common/header/PlayerMenu\";\nimport ControlBar from \"./control-bar/ControlBar\";\nimport ScoreTable from \"./ScoreTable\";\nimport useSpades from \"./useSpades\";\n\nconst Spades = React.memo(() => {\n  const {\n    first,\n    lastBid,\n    data,\n    initials,\n    addBid,\n    addPenalty,\n    addScore,\n    newGame,\n  } = useSpades();\n\n  let i = data.length - 1;\n  if (data[i]?.score1 === undefined) {\n    i -= 1;\n  }\n  const diff =\n    (data[i]?.score1 || 0) * 10 +\n    (data[i]?.bags1 || 0) -\n    ((data[i]?.score2 || 0) * 10 + (data[i]?.bags2 || 0));\n  const blindTrade = diff > 0 ? Math.floor(diff / 100) : Math.ceil(diff / 100);\n\n  return (\n    <>\n      <div className=\"flex-container\">\n        <Typography variant=\"h2\" component=\"h1\">\n          ♠️ Scores\n        </Typography>\n        <PlayerMenu />\n      </div>\n      {(data[data.length - 1]?.score1 || 0) >= 100 ||\n      (data[data.length - 1]?.score2 || 0) >= 100 ? (\n        <Button\n          fullWidth\n          color=\"error\"\n          onClick={newGame}\n          variant=\"contained\"\n          sx={{ marginTop: 2 }}\n        >\n          Reset\n        </Button>\n      ) : (\n        <ControlBar\n          blindTrade={blindTrade}\n          first={first}\n          initials={initials}\n          lastBid={lastBid}\n          showPenalty={!(data[i]?.score1 === undefined)}\n          onBidSave={addBid}\n          onPenalty={addPenalty}\n          onScoreSave={addScore}\n        />\n      )}\n      <ScoreTable initials={initials} data={data} />\n    </>\n  );\n});\n\nSpades.displayName = \"Spades\";\n\nexport default Spades;\n"],"names":["MIN_BID","MAX_BID","defaultBid","initialState","spadesAtom","atomWithStorage","AddBidPlayer","id","blindTrade","canTrain","bid","blind","train","onBid","decrBid","incrBid","handleBlind","_e","checked","handleTrain","TableRow","jsx","TableCell","jsxs","IconButton","Remove","Add","Switch","getBlindTrade","n","AddBid","first","initials","onBidSave","bids","setBids","React.useState","a","b","d","handleBid","newBid","trainBid","newBids","handleSave","bags","acc","InfoPopup","Table","TableHead","TableBody","AddPenalty","onPenalty","Grid","Button","AddScorePlayer","initial","lastBid","made","setMade","decrMade","incrMade","Typography","AddScore","onScoreSave","made0","setMade0","made1","setMade1","made2","setMade2","made3","setMade3","total","ControlBar","showPenalty","getScoreText","score","comp","ScoreTable","data","s","i","getScore","p1","p2","newScore","newBags","mod","teamBid","teamMade","useSpades","players","useAtomValue","playerAtom","setScoreboard","useAtom","scoreboardAtom","addBid","_a","newData","newEntry","penaltyHelper","newMod","team","score1","bags1","mod1","score2","bags2","mod2","mades","newScore1","newBags1","newScore2","newBags2","Spades","React.memo","addPenalty","addScore","newGame","diff","_b","_c","_d","Fragment","PlayerMenu","_f","_g","_h"],"mappings":"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"}