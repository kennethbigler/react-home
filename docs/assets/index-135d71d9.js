import{J as F,a1 as Y,a7 as Z,K as H,r as P,j as e,a3 as V}from"./index-2cf40ff9.js";import{D as q}from"./Dropdown-f6105acc.js";import{t as E,p as Q,P as X,q as ee}from"./MenuItem-76281072.js";import{D as ae,a as ne,b as te,c as se}from"./DialogActions-cd4a7d1b.js";import{a as oe,b as I,c as B,T as re}from"./TableRow-b0654333.js";import{T as ce}from"./TableContainer-17664c45.js";import{T as le}from"./TableHead-d1b5c536.js";import{S as $}from"./Stack-a30ded20.js";import{F as ie}from"./FormControlLabel-58d6aed0.js";import{C as J}from"./Chip-92e91774.js";const N=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]}],de=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9"],L=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth","Consolidated"],U=6,G=(n=U)=>({matches:N[n].ladies.map(()=>-1),noMatch:N[n].ladies.map(()=>N[n].gents.map(()=>!1)),roundPairings:[]}),z=F({key:"areYouTheOneAtom",default:JSON.parse(localStorage.getItem("are-you-the-one-atom")||"null")||G(),effects:[({onSet:n})=>{n(o=>{localStorage.setItem("are-you-the-one-atom",JSON.stringify(o))})}]}),O=F({key:"aytoSeason",default:JSON.parse(localStorage.getItem("ayto-season-atom")||"null")||U,effects:[({onSet:n})=>{n(o=>{localStorage.setItem("ayto-season-atom",JSON.stringify(o))})}]}),he=Y({key:"aytoSeasonSelector",get:({get:n})=>n(O),set:({set:n},o)=>{o instanceof Z||(n(O,o),n(z,G(o)))}}),ue=Y({key:"aytoPlayerSelector",get:({get:n})=>{const o=n(O);return[...L],{...N[o],options:L}}}),W=n=>isNaN(n)?-1:n,pe=n=>{var x;const{options:o,onSelect:r,roundNumber:g,roundPairings:p,onBlackout:C,updateScore:j}=n,[d,T]=H(he),[y,f]=P.useState(W((x=p[g])==null?void 0:x.score)),u=t=>T(t),l=t=>{var s;f(W((s=p[t])==null?void 0:s.score)),r(t)},S=()=>C(p[g].pairs),i=t=>{f(parseInt(t.target.value,10)||0),j(parseInt(t.target.value,10))};return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em"},children:[e.jsx(q,{ariaLabel:"select season",value:d,options:de,onSelect:u}),e.jsx(q,{ariaLabel:"select matchup",value:g,options:o,onSelect:l}),g<o.length-2&&e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"outlined",color:"secondary",onClick:S,children:"Blackout"}),e.jsx(Q,{id:"score-input",label:"Score",variant:"outlined",type:"number",value:y,onChange:i})]})]})},me=({open:n,content:o,onMatch:r,onNoMatch:g,onCancel:p})=>e.jsxs(ae,{onClose:p,open:n,children:[e.jsx(ne,{children:"TB Result"}),e.jsxs(te,{children:["Are ",o," a perfect match?"]}),e.jsxs(se,{children:[e.jsx(E,{onClick:r,children:"Match"}),e.jsx(E,{onClick:g,color:"error",children:"No Match"}),e.jsx(E,{onClick:p,color:"warning",children:"Cancel"})]})]}),fe=n=>{const{gents:o,hist:r,ladies:g,matches:p,noMatch:C,options:j,roundNumber:d,roundPairings:T,updateMatch:y,updateNoMatch:f,updatePairs:u}=n,l=j.length===d+2,S=j.length===d+1,[i,x]=P.useState(!1),[t,s]=P.useState([-1,-1]),c=(A,a,b)=>()=>{var R;if(S)return;if(l){s([a,b]),x(!0);return}const w=(R=T[A])==null?void 0:R.pairs.indexOf(b);w!==-1&&u(A,w,-1),u(A,a,b)},h=()=>{x(!1)},m=()=>{const[A,a]=t;y(A,a),h()},M=()=>{const[A,a]=t;f(A,a),h()};return e.jsxs(oe,{children:[g.map((A,a)=>e.jsxs(I,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(B,{component:"th",scope:"row",children:A}),o.map((b,w)=>{var v,K,_;let R="outlined",D="primary";l?(C[a]&&C[a][w]||p[a]===w)&&(R="contained"):((v=T[d])==null?void 0:v.pairs[a])===w&&(R="contained"),C[a]&&C[a][w]&&(D="error"),p[a]===w&&(D="success");const k=r[a]&&((_=(K=r[a][w])==null?void 0:K.rounds)==null?void 0:_.length)||0;return S&&k>0&&(R="contained"),e.jsx(B,{sx:{padding:0,textAlign:"center"},children:e.jsx(E,{variant:R,color:D,onClick:c(d,a,w),children:S?k:`${A[0]}-${b[0]}`})},b)})]},`ayto-table-row-${A}`)),e.jsx(me,{open:i,content:`${g[t[0]]} & ${o[t[1]]}`,onCancel:h,onMatch:m,onNoMatch:M})]})},xe=({gents:n,...o})=>e.jsx(ce,{component:X,children:e.jsxs(re,{"aria-label":"are you the one data entry table",children:[e.jsx(le,{children:e.jsxs(I,{children:[e.jsx(B,{children:"-"}),n.map(r=>e.jsx(B,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:r},r))]})}),e.jsx(fe,{gents:n,...o})]})}),Se=n=>{const{gents:o,ladies:r,matches:g,noMatch:p,roundPairings:C,hist:j,tempScore:d,calculatedEquations:T}=n,[y,f]=P.useState(!1),u=l=>{f(l.target.checked)};return e.jsxs("div",{children:[e.jsxs($,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(ie,{control:e.jsx(ee,{checked:y,onChange:u,name:"show-all"}),label:"Show All Couples"})]}),e.jsx($,{spacing:1,direction:"row",flexWrap:"wrap",children:C.map(({pairs:l,score:S},i)=>{const x=l.map((t,s)=>{if(s<0||t<0)return null;const c=j[s][t].rounds.length>1;let h=c?"primary":"default";if(y)p[s][t]&&(h="error"),g[s]===t&&(h="success");else if(p[s][t]||g[s]===t)return null;const m=`${r[s]}-${o[t]}${c?` ${j[s][t].rounds.length}`:""} - ${j[s][t].odds}%`;return e.jsx(J,{label:m,color:h},`eq-r${i}-l${s}-g${t}`)});return x.every(t=>t===null)?null:e.jsxs($,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",i+1]}),x,e.jsx(J,{label:y?S:S-d[i],color:"warning"})]},`equation-${i}`)})}),T.length>0&&e.jsx("hr",{}),e.jsx($,{spacing:1,direction:"row",flexWrap:"wrap",children:T.map(({pairs:l,score:S},i)=>e.jsxs($,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",i+1]}),l.map((x,t)=>e.jsx(J,{label:`${r[t]}-${o[x]} ${j[t][x].rounds.length} - ${j[t][x].odds}%`,color:"primary"},`eq-calc-l${t}-g${x}`)),e.jsx(J,{label:`max ${S}`,color:"warning"})]},`equation-${i}`))})]})},ye=(n,o,r,g)=>{const p=[],C=[],j=[];g.forEach(({pairs:y},f)=>{C[f]=0,j[f]=n,y.forEach((u,l)=>{(l<0||u<0||r[l][u])&&(j[f]-=1),o[l]===u&&(C[f]+=1,j[f]-=1),!p[l]&&(p[l]=[]),!p[l][u]&&(p[l][u]={odds:0,oddsWeight:0,rounds:[]}),p[l][u].rounds.push(f)})});const d={};g.forEach(({pairs:y,score:f},u)=>{y.forEach((l,S)=>{const i=p[S][l];if(r[S][l])return;if(o[S]===l){i.odds=100;return}const x=j[u]?(f-C[u])*100/j[u]:0;if(i.oddsWeight===0?i.odds=Math.floor(x):!x||!i.odds?i.odds=0:i.odds=Math.floor((i.odds*i.oddsWeight+x)/(i.oddsWeight+1)),i.oddsWeight+=1,i.rounds.length<2)return;const t=[i.rounds.reduce((s,c)=>s+c.toString(),"")];for(let s=u+1;s<i.rounds.length;s+=1)t.push(`${i.rounds[u]}${i.rounds[s]}`);t.forEach(s=>{!d[s]&&(d[s]={couples:[],score:f});let c=!0;d[s].couples.forEach(([h,m])=>{c=c&&h!==S&&m!==l}),c&&d[s].couples.push([S,l]),d[s].score=Math.min(f-C[u],d[s].score)})})});const T=[];return Object.keys(d).forEach(y=>{if(d[y].couples.length>1&&d[y].couples.length>d[y].score){const f=[];d[y].couples.forEach(([l,S])=>{f[l]=S});let u=!1;T.forEach(({pairs:l,score:S},i)=>{let x=!0,t=!0;for(let s=0;s<l.length;s+=1)f[s]!==l[s]&&(f[s]?(x=!1,t=!1):x=!1);u=u||x||t&&d[y].score>=S,x&&(T[i].score=Math.min(S,d[y].score))}),!u&&T.push({pairs:f,score:d[y].score})}}),{hist:p,tempScore:C,calculatedEquations:T}},ge=()=>{const[{matches:n,noMatch:o,roundPairings:r},g]=H(z),{ladies:p,gents:C,options:j}=V(ue),[d,T]=P.useState(0),{hist:y,tempScore:f,calculatedEquations:u}=ye(p.length,n,o,r),l=c=>{T(c)},S=c=>{const h=r[d]?{...r[d]}:{pairs:[],score:0};h.score=c;const m=[...r];m[d]=h,g({matches:n,noMatch:o,roundPairings:m})},i=(c,h)=>{const m=o.map(M=>[...M]);!m[c]&&(m[c]=[]),m[c][h]=!m[c][h],g({matches:n,noMatch:m,roundPairings:r})},x=c=>{const h=o.map(m=>[...m]);c.forEach((m,M)=>{n[M]!==m&&!o[M][m]&&(!h[M]&&(h[M]=[]),h[M][m]=!0)}),g({matches:n,noMatch:h,roundPairings:r})},t=(c,h,m)=>{const M=r[c]?{...r[c],pairs:[...r[c].pairs]}:{pairs:[],score:0};M.pairs[h]=m;const A=[...r];A[d]=M,g({matches:n,noMatch:o,roundPairings:A})},s=(c,h)=>{const m=[...n],M=o.map(a=>[...a]);!M[c]&&(M[c]=[]),m[c]=h;for(let a=0;a<C.length;a+=1)M[c][a]=a!==h;for(let a=0;a<p.length;a+=1)!M[a]&&(M[a]=[]),M[a][h]=a!==c;const A=[...r];for(let a=0;a<j.length-2;a+=1)if(!r[a]||r[a].pairs[c]<0||r[a].pairs[c]===void 0){const b=A[a]?{...r[a],pairs:[...r[a].pairs]}:{pairs:[],score:0};b.pairs[c]=h,A[a]=b}g({matches:m,noMatch:M,roundPairings:A})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(pe,{onSelect:l,options:j,roundNumber:d,roundPairings:r,onBlackout:x,updateScore:S}),e.jsx("br",{}),e.jsx(xe,{gents:C,hist:y,ladies:p,matches:n,noMatch:o,options:j,roundNumber:d,roundPairings:r,updateMatch:s,updateNoMatch:i,updatePairs:t}),e.jsx(Se,{calculatedEquations:u,gents:C,hist:y,ladies:p,matches:n,noMatch:o,roundPairings:r,tempScore:f})]})},Pe=ge;export{Pe as default};
//# sourceMappingURL=index-135d71d9.js.map
