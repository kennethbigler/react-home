import{P as I,O as Y,A as H,j as e,r as B,M as z}from"./index-YjvXMwAe.js";import{F as O,I as D,S as K}from"./Select-D7AeiOOh.js";import{M as W,P as Z,T as k,S as _}from"./Header-CVgMWi9H.js";import{B as w}from"./Button-DJfYjV4H.js";import{B as Q}from"./ButtonGroup-CqCh-dpf.js";import{D as X,a as ee,b as ae,c as se}from"./DialogTitle-CJi0EiP3.js";import{b as U,c as E,a as ne,T as te}from"./TableRow-BjldIzFc.js";import{T as oe}from"./TableContainer-BSYuIq23.js";import{T as re}from"./TableHead-BFmBsNLp.js";import{S as R}from"./Stack-CA1gVJ6V.js";import{C as $}from"./Chip-C8mxPaU7.js";import{F as ce}from"./FormControlLabel-BezO_KJ8.js";import"./isMuiElement-P1FLybK7.js";import"./useSlotProps-Cz1dbOeb.js";import"./useThemeProps-zizEJNGY.js";const J=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]},{ladies:["Libby","Olivia","Robyn","Sapphia","Shae","Taofiqah","Tasha","Thea","Therese","Vic"],gents:["Cacherel","Charlie","Ismail","Jack","Jacob","Jordan","Josh","Joshy","Juan","Theo"]}],le=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9","UK 1"],F=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth"],L=7,G=(n=L)=>({matches:J[n].ladies.map(()=>-1),noMatch:J[n].ladies.map(()=>J[n].gents.map(()=>!1)),roundPairings:[]}),N=Y("aytoSeasonAtom",L),q=Y("areYouTheOneAtom",G()),ie=I(n=>n(N),(n,o,a)=>{o(N,a),o(q,G(a))}),he=I(n=>{const o=n(N);return[...F],{...J[o],options:F}}),de=n=>isNaN(n)?-1:n,ue={display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em",alignItems:"center"},pe=({options:n,onSelect:o,ri:a,roundPairings:x,onBlackout:p,updateScore:m})=>{const[d,t]=H(ie),g=de(x[a]?.score),u=s=>t(Number(s.target.value)),l=s=>o(Number(s.target.value)),c=()=>p(x[a].pairs),h=()=>m(g+1),r=()=>m(g-1);return e.jsxs("div",{style:ue,children:[e.jsxs(O,{children:[e.jsx(D,{id:"season-select",children:"Season"}),e.jsx(K,{labelId:"season-select",label:"Season",value:d,onChange:u,children:le.map((s,M)=>e.jsx(W,{value:M,children:s},s))})]}),e.jsxs(O,{children:[e.jsx(D,{id:"matchup-select",children:"Matchup"}),e.jsx(K,{labelId:"matchup-select",label:"Matchup",value:a,onChange:l,children:n.map((s,M)=>e.jsx(W,{value:M,children:s},s))})]}),a<n.length-1&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outlined",color:"secondary",onClick:c,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",g]}),e.jsxs(Q,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(w,{"aria-label":"decrement score",onClick:r,children:"-"}),e.jsx(w,{"aria-label":"increment score",onClick:h,children:"+"})]})]})]})]})},me=({open:n,content:o,onMatch:a,onNoMatch:x,onCancel:p})=>e.jsxs(X,{onClose:p,open:n,children:[e.jsx(ee,{children:"TB Result"}),e.jsxs(ae,{children:["Are ",o," a perfect match?"]}),e.jsxs(se,{children:[e.jsx(w,{onClick:a,children:"Match"}),e.jsx(w,{onClick:x,color:"error",children:"No Match"}),e.jsx(w,{onClick:p,color:"warning",children:"Cancel"})]})]}),fe=(n,o,a,x,p)=>{let m="outlined",d="primary";return(n&&(o||a)||x||n&&p>0)&&(m="contained"),o?d="error":a&&(d="success"),{variant:m,color:d,histValue:p}},xe=({gents:n,histLi:o,lMatch:a,noMatchLi:x,isTB:p,lPair:m,ladyName:d,onClick:t})=>e.jsxs(U,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(E,{component:"th",scope:"row",children:d}),n.map((g,u)=>{let l=0,c=0;if(o&&o[u])l=o[u].rounds.length,c=o[u].odds;else if(!x[u]){const s=x.reduce((M,A)=>A?M:M+1,0);c=Math.floor(1/s*100)}const{variant:h,color:r}=fe(p,x&&x[u],a===u,m===u,l);return e.jsx(E,{sx:{padding:0,textAlign:"center"},children:e.jsxs(w,{variant:h,color:r,onClick:t(u),children:[c,"%"]})},g)})]}),je=({gents:n,hist:o,ladies:a,matches:x,noMatch:p,options:m,ri:d,roundPairings:t,updateMatch:g,updateNoMatch:u,updatePairs:l})=>{const c=m.length===d+1,[h,r]=B.useState(!1),[s,M]=B.useState([-1,-1]),A=(f,y)=>T=>()=>{if(c){M([y,T]),r(!0);return}const b=t[f]?.pairs.indexOf(T);b!==-1&&l(f,b,-1),l(f,y,T)},S=()=>{r(!1)},i=()=>{const[f,y]=s;g(f,y),S()},C=()=>{const[f,y]=s;u(f,y),S()};return e.jsxs(ne,{children:[a.map((f,y)=>e.jsx(xe,{gents:n,histLi:o[y],noMatchLi:p[y],isTB:c,ladyName:f,lMatch:x[y],lPair:t[d]?.pairs[y],onClick:A(d,y)},`ayto-table-row-${f}`)),e.jsx(me,{open:h,content:`${a[s[0]]} & ${n[s[1]]}`,onCancel:S,onMatch:i,onNoMatch:C})]})},ye=({gents:n,...o})=>e.jsx(oe,{component:Z,children:e.jsxs(te,{"aria-label":"are you the one data entry table",children:[e.jsx(re,{children:e.jsxs(U,{children:[e.jsx(E,{children:"-"}),n.map(a=>e.jsx(E,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:a},a))]})}),e.jsx(je,{gents:n,...o})]})}),Se=({gents:n,ladies:o,matches:a,noMatch:x,pairs:p,score:m,ri:d,hist:t,tempScore:g,showAll:u})=>{const l=[];let c=0,h=0;return p.forEach((r,s)=>{if(s<0||r<0||s===void 0||r===void 0||!u&&(x[s][r]||a[s]===r))return;const M=t[s][r].rounds.length>1;let A=M?"primary":"default";x[s][r]?A="error":a[s]===r&&(A="success");const S=`${o[s]}-${n[r]}${M?` ${t[s][r].rounds.length}`:""} - ${t[s][r].odds}%`,i=e.jsx($,{label:S,color:A},`match-r${d}-l${s}-g${r}`);switch(A){case"success":h+=1,l.unshift(i);return;case"error":c+=1,l.push(i);return;case"primary":l.splice(h,0,i),h+=1;return;default:l.splice(l.length-c,0,i)}}),l.every(r=>r===null)?null:e.jsxs(R,{spacing:1,children:[e.jsxs(k,{variant:"h4",component:"h3",style:{textAlign:"center"},children:["Matchup ",d+1]}),l,e.jsx($,{label:u?m:m-g[d],color:"warning"})]})},Me=({cei:n,pairs:o,score:a,gents:x,ladies:p,hist:m})=>e.jsxs(R,{spacing:1,children:[e.jsxs(k,{variant:"h4",component:"h3",style:{textAlign:"center"},children:["Calculated ",n+1]}),o.map((d,t)=>e.jsx($,{label:`${p[t]}-${x[d]} ${m[t][d].rounds.length} - ${m[t][d].odds}%`,color:"primary"},`calc-l${t}-g${d}`)),e.jsx($,{label:`max ${a}`,color:"warning"})]}),Ce=({gents:n,ladies:o,matches:a,noMatch:x,roundPairings:p,hist:m,tempScore:d,calculatedEquations:t})=>{const[g,u]=B.useState(!1),l=c=>{u(c.target.checked)};return e.jsxs("div",{children:[e.jsxs(R,{direction:"row",justifyContent:"space-between",children:[e.jsx(k,{variant:"h2",children:"Analysis"}),e.jsx(ce,{control:e.jsx(_,{checked:g,onChange:l}),label:"Show All Couples"})]}),e.jsx(R,{spacing:1,direction:"row-reverse",flexWrap:"wrap-reverse",justifyContent:"flex-end",children:p.map(({pairs:c,score:h},r)=>e.jsx(Se,{gents:n,ladies:o,matches:a,noMatch:x,pairs:c,score:h,ri:r,hist:m,tempScore:d,showAll:g},`matched-stack-${r}`))}),t.length>0&&e.jsx("hr",{"aria-hidden":!0}),e.jsx(R,{spacing:1,direction:"row",flexWrap:"wrap",children:t.map(({pairs:c,score:h},r)=>e.jsx(Me,{cei:r,pairs:c,score:h,gents:n,ladies:o,hist:m},`calculated-stack-${r}`))})]})},ge=(n,o,a,x)=>{const p=[],m=[],d=[];x.forEach(({pairs:u},l)=>{m[l]=0,d[l]=n,u.forEach((c,h)=>{(h<0||c<0||a[h][c])&&(d[l]-=1),o[h]===c&&(m[l]+=1,d[l]-=1),p[h]||(p[h]=[]),p[h][c]||(p[h][c]={odds:0,oddsWeight:0,rounds:[]}),p[h][c].rounds.push(l)})});const t={};x.forEach(({pairs:u,score:l},c)=>{u.forEach((h,r)=>{const s=p[r][h];if(a[r][h])return;if(o[r]===h||l===n){s.odds=100;return}const M=d[c]?(l-m[c])*100/d[c]:0;if(s.oddsWeight===0?s.odds=Math.floor(M):!M||!s.odds?s.odds=0:s.odds=Math.floor((s.odds*s.oddsWeight+M)/(s.oddsWeight+1)),s.oddsWeight+=1,s.rounds.length<2)return;const A=[s.rounds.reduce((S,i)=>S+i.toString(),"")];for(let S=c+1;S<s.rounds.length;S+=1)A.push(`${s.rounds[c]}${s.rounds[S]}`);A.forEach(S=>{t[S]||(t[S]={couples:[],score:l});let i=!0;t[S].couples.forEach(([C,f])=>{i=i&&C!==r&&f!==h}),i&&t[S].couples.push([r,h]),t[S].score=Math.min(l-m[c],t[S].score)})})});const g=[];return Object.keys(t).forEach(u=>{if(t[u].couples.length>1&&t[u].couples.length>t[u].score){const l=[];t[u].couples.forEach(([h,r])=>{l[h]=r});let c=!1;g.forEach(({pairs:h,score:r},s)=>{let M=!0,A=!0;for(let S=0;S<h.length;S+=1)l[S]!==h[S]&&(l[S]?(M=!1,A=!1):M=!1);c=c||M||A&&t[u].score>=r,M&&(g[s].score=Math.min(r,t[u].score))}),c||g.push({pairs:l,score:t[u].score})}}),{hist:p,tempScore:m,calculatedEquations:g}},Ke=()=>{const[{matches:n,noMatch:o,roundPairings:a},x]=H(q),{ladies:p,gents:m,options:d}=z(he),[t,g]=B.useState(0),{hist:u,tempScore:l,calculatedEquations:c}=ge(p.length,n,o,a),h=i=>{g(i)},r=i=>{const C=a[t]?{...a[t]}:{pairs:[],score:0};C.score=i;const f=[...a];f[t]=C,x({matches:n,noMatch:o,roundPairings:f})},s=(i,C)=>{const f=o.map(y=>[...y]);f[i]||(f[i]=[]),f[i][C]=!f[i][C],x({matches:n,noMatch:f,roundPairings:a})},M=i=>{const C=o.map(b=>[...b]);let f=0;i.forEach((b,j)=>{n[j]===b?f+=1:o[j][b]||(C[j]||(C[j]=[]),C[j][b]=!0)});const y={...a[t],score:f},T=[...a];T[t]=y,x({matches:n,noMatch:C,roundPairings:T})},A=(i,C,f)=>{const y=a[i]?{...a[i],pairs:[...a[i].pairs]}:{pairs:[],score:0};y.pairs[C]=f;const T=[...a];T[t]=y,x({matches:n,noMatch:o,roundPairings:T})},S=(i,C)=>{const f=[...n],y=o.map(j=>[...j]);y[i]||(y[i]=[]),f[i]=C;for(let j=0;j<m.length;j+=1)y[i][j]=j!==C;for(let j=0;j<p.length;j+=1)y[j]||(y[j]=[]),y[j][C]=j!==i;const T=f.reduce((j,v)=>v>=0?j+1:j,0),b=[...a];for(let j=0;j<d.length-1;j+=1){const{pairs:v,score:V}=a[j]||{pairs:[],score:T};if(!a[j]||v[i]<0||v[i]===void 0){const P={pairs:[...v],score:Math.max(V,T)};P.pairs[i]=C,b[j]=P}}x({matches:f,noMatch:y,roundPairings:b})};return e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"h2",component:"h1",children:"Are You The One?"}),e.jsx(pe,{onSelect:h,options:d,ri:t,roundPairings:a,onBlackout:M,updateScore:r}),e.jsx("br",{}),e.jsx(ye,{gents:m,hist:u,ladies:p,matches:n,noMatch:o,options:d,ri:t,roundPairings:a,updateMatch:S,updateNoMatch:s,updatePairs:A}),e.jsx(Ce,{calculatedEquations:c,gents:m,hist:u,ladies:p,matches:n,noMatch:o,roundPairings:a,tempScore:l})]})};export{Ke as default};
//# sourceMappingURL=index-CjbezcEV.js.map
