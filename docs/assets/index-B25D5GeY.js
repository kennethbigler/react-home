import{g as ot,b as at,s as rt,t as lt,r as u,e as ct,j as t,c as it,f as dt,M as L,O as ht,A as F,B as Q,P as mt}from"./index-eG4mc5yy.js";import{d as I,C as ut,a as U,m as pt}from"./DateHelper-BL5QNkII.js";import{G as E}from"./Grid2-CYzsE65K.js";import{C as xt}from"./Card-CER2wT1p.js";import{C as Y}from"./CardContent-DqBiZTAR.js";import{T as m,D as B,M as _}from"./Header-coIKKBJv.js";import{D as q,a as V,b as X,c as Z}from"./DialogTitle-DkjHuajt.js";import{F as z,I as W,S as H}from"./Select-BVaMFeaV.js";import{T as w}from"./TextField-C5acFA7O.js";import{B as N}from"./Button-CZHw6MZX.js";import{C as jt}from"./Chip-Cu82ya0m.js";import{h as K,H as G,a as tt}from"./highcharts-react.min-C3Mdx-wj.js";import"./useThemeProps-CaCqvqq2.js";import"./isMuiElement-C0zqtK3c.js";import"./useId-C0qAzL6S.js";import"./useSlotProps-BF82it9S.js";function gt(e){return at("MuiDialogContentText",e)}ot("MuiDialogContentText",["root"]);const ft=e=>{const{classes:s}=e,n=dt({root:["root"]},gt,s);return{...s,...n}},St=rt(m,{shouldForwardProp:e=>lt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),Ct=u.forwardRef(function(s,o){const n=ct({props:s,name:"MuiDialogContentText"}),{children:a,className:d,...r}=n,c=ft(r);return t.jsx(St,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:r,className:it(c.root,d),...n,classes:c})}),yt={},et=L({key:"stockAtom",default:JSON.parse(localStorage.getItem("stock-atom")||"null")||yt,effects:[({onSet:e})=>{e(s=>{localStorage.setItem("stock-atom",JSON.stringify(s))})}]}),st=L({key:"compCalcAtom",default:JSON.parse(localStorage.getItem("comp-calc-atom")||"null")||[],effects:[({onSet:e})=>{e(s=>{localStorage.setItem("comp-calc-atom",JSON.stringify(s))})}]}),kt=ht({key:"compCalcReadOnlyState",get:({get:e})=>{const s=e(st),o=e(et),n={},a=s.map(({bonus:r,entryDate:c,grantDuration:i,grantQty:l,priceThen:f,salary:x,stockTick:h})=>{const S=o[h]||0,C=f*l/i;let b=0,y=0;const v=S*l/i,D=I(c);D.year+=i,n[h]||(n[h]=[]),C>0&&n[h].push({cs:C,csa:v,exp:D}),n[h].forEach(g=>{I(c).diff(g.exp,"days")<0&&(b+=g.cs,y+=g.csa)});const T=x+r+b,M=x+r+y,A=f*l,j=S*l;return{stock:b,stockAdj:y,total:T,totalAdj:M,grantThen:A,grantNow:j}});return a.map(({totalAdj:r,...c},i)=>{const l=i===0?0:r-a[i-1].totalAdj;return{totalAdj:r,netDiff:l,...c}})}}),k=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),bt=({compEntries:e,compCalcEntries:s,stockEntries:o,onClick:n})=>t.jsx(E,{container:!0,spacing:1,children:e.map((a,d)=>{const{entryDate:r,salary:c,bonus:i,stockTick:l,priceThen:f,grantDuration:x,grantQty:h}=a,{stock:S,stockAdj:C,total:b,totalAdj:y,netDiff:v,grantThen:D,grantNow:T}=s[d];return t.jsx(E,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(xt,{children:t.jsx(ut,{onClick:n(d),children:t.jsxs(E,{container:!0,children:[t.jsxs(E,{size:h>0?6:12,children:[t.jsx(U,{title:"Salary"}),t.jsxs(Y,{children:[t.jsxs(m,{children:["Date - ",I(r).format("MMMM Y")]}),t.jsxs(m,{children:["Salary: ",k.format(c)]}),t.jsxs(m,{children:["Bonus: ",k.format(i)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Stock (Adj): ",k.format(C)]}),t.jsxs(m,{children:["*Stock: ",k.format(S)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Total: ",k.format(b)]}),t.jsxs(m,{children:["*Total (Adj): ",k.format(y)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Net: ",k.format(v)]})]})]}),h>0?t.jsxs(E,{size:6,children:[t.jsx(U,{title:"Stock"}),t.jsxs(Y,{children:[t.jsxs(m,{children:["Stock Ticker: ",l]}),t.jsxs(m,{children:["Price Then: ",k.format(f)]}),t.jsxs(m,{children:["*Price Now:"," ",o[l]?k.format(o[l]):"Enter Stock"]}),t.jsxs(m,{children:["Grant Qty: ",h," stocks"]}),t.jsxs(m,{children:["Duration: ",x," years"]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Grant Then: ",k.format(D)]}),t.jsxs(m,{children:["*Grant Now: ",k.format(T)]})]})]}):null]})})})},`comp-calc-entry-${d}`)}).reverse()}),O={variant:"standard",fullWidth:!0,margin:"dense"},vt=new Date().getFullYear()-2e3,R=[];for(let e=0;e<=vt;e+=1)R.push(2e3+e);R.reverse();const Dt=({open:e,compEntry:s,onClose:o,addCompEntry:n})=>{const[a,d]=u.useState("1"),[r,c]=u.useState(R[0].toString()),[i,l]=u.useState(0),[f,x]=u.useState(0),[h,S]=u.useState(""),[C,b]=u.useState(0),[y,v]=u.useState(4),[D,T]=u.useState(0),M=()=>{d("1"),c(R[0].toString()),l(0),x(0),S(""),b(0),v(4),T(0)};u.useEffect(()=>{if(s){const{month:p,year:P}=I(s.entryDate);d((p+1).toString()),c(P.toString()),l(s.salary),x(s.bonus),S(s.stockTick),b(s.priceThen),v(s.grantDuration),T(s.grantQty)}else M()},[s,s==null?void 0:s.salary]);const A=p=>P=>p(parseFloat(P.target.value)),j=p=>S(p.target.value),g=p=>d(p.target.value),$=p=>c(p.target.value),nt=()=>{n({entryDate:`${r}-${a.length<2?"0":""}${a}`,salary:i,bonus:f,stockTick:h,priceThen:C,grantDuration:y,grantQty:D}),M()};return t.jsxs(q,{open:e,onClose:o,children:[t.jsxs(V,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(X,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(z,{fullWidth:!0,children:[t.jsx(W,{id:"month-select",children:"Month"}),t.jsx(H,{labelId:"month-select",label:"Month",value:a,onChange:g,children:pt.map((p,P)=>t.jsx(_,{value:P+1,children:p},P))})]}),t.jsxs(z,{fullWidth:!0,children:[t.jsx(W,{id:"year-select",children:"Year"}),t.jsx(H,{labelId:"year-select",label:"Year",value:r,onChange:$,children:R.map(p=>t.jsx(_,{value:p,children:p},p))})]})]}),t.jsx(w,{label:"Salary",value:i,type:"number",onChange:A(l),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(w,{label:"Bonus",value:f,type:"number",onChange:A(x),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(Ct,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:h,onChange:j,...O}),t.jsx(w,{label:"Grant Quantity",value:D,type:"number",onChange:A(T),...O}),t.jsx(w,{label:"Grant Duration",value:y,type:"number",onChange:A(v),...O}),t.jsx(w,{label:"Stock Price Then",value:C,type:"number",onChange:A(b),slotProps:{input:{startAdornment:"$"}},...O})]}),t.jsxs(Z,{children:[t.jsx(N,{onClick:o,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:nt,children:s?"Update":"Add"})]})]})},J={variant:"standard",fullWidth:!0,margin:"dense"},Tt=({open:e,price:s,stock:o,onClose:n,addStockEntry:a,removeStockEntry:d})=>{const[r,c]=u.useState(0),[i,l]=u.useState(""),f=()=>{c(0),l("")};u.useEffect(()=>{o&&s!==void 0?(c(s),l(o)):f()},[s,o]);const x=C=>l(C.target.value),h=C=>c(parseFloat(C.target.value)),S=()=>{a(i,r),f()};return t.jsxs(q,{open:e,onClose:n,children:[t.jsxs(V,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(X,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:i,onChange:x,...J}),t.jsx(w,{label:"Price Now",value:r,type:"number",onChange:h,slotProps:{input:{startAdornment:"$"}},...J})]})}),t.jsxs(Z,{children:[t.jsx(N,{onClick:d(i),color:"error",children:"Delete"}),t.jsx(N,{onClick:n,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:S,children:o?"Update":"Add"})]})]})},At=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,n)=>t.jsx(jt,{color:"primary",label:`${o}: ${k.format(e[o])}`,onClick:s(o),sx:{margin:.5}},`stock-entry-${n}`))});K(G);const wt=0,Et=1,Nt=2,Mt=({compCalcEntries:e,compEntries:s})=>{const[o]=F(Q),n=o.mode==="light"?"black":"white",a=[[],[],[]];s.forEach((r,c)=>{a[wt].push(e[c].stockAdj),a[Et].push(r.bonus),a[Nt].push(r.salary)});const d={chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:n}},xAxis:{visible:!1},yAxis:{labels:{style:{color:n}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />"},plotOptions:{area:{stacking:"normal",lineColor:n,lineWidth:1,marker:{lineWidth:1,lineColor:n}}},series:[{name:"Stock",data:[...a[0]]},{name:"Bonus",data:[...a[1]]},{name:"Salary",data:[...a[2]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(tt,{highcharts:G,options:d})})};K(G);const Pt=({bonus:e,salary:s,stock:o})=>{const[n]=F(Q),a=n.mode==="light"?"black":"white",d={chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:a}},tooltip:{pointFormat:"<b>${point.y}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Salary",y:s},{name:"Bonus",y:e},{name:"Stock",y:o}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(tt,{highcharts:G,options:d})})},qt=()=>{const[e,s]=F(st),o=mt(kt),[n,a]=F(et),[d,r]=u.useState(!1),[c,i]=u.useState(!1),[l,f]=u.useState(-1),[x,h]=u.useState(""),S=()=>r(!1),C=()=>{f(-1),r(!0)},b=j=>()=>{f(j),r(!0)},y=()=>i(!1),v=()=>{h(""),i(!0)},D=j=>()=>{h(j),i(!0)},T=j=>{const g=[...e];l===-1?g.push(j):g[l]=j,s(g),S()},M=(j,g)=>{const $={...n};$[j]=g,a($),y()},A=j=>()=>{const g={...n};delete g[j],a(g),y()};return t.jsxs(t.Fragment,{children:[t.jsx(m,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(At,{stockEntries:n,openStockModal:D}),t.jsxs("div",{children:[t.jsx(N,{onClick:v,children:"+ Stock"}),t.jsx(N,{onClick:C,children:"+ Entry"})]})]}),e.length>0?t.jsxs(E,{container:!0,children:[t.jsx(E,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Mt,{compCalcEntries:o,compEntries:e})}),t.jsx(E,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(Pt,{salary:e[e.length-1].salary,bonus:e[e.length-1].bonus,stock:o[o.length-1].stockAdj})})]}):null,t.jsx(bt,{compEntries:e,compCalcEntries:o,stockEntries:n,onClick:b}),t.jsx(Tt,{open:c,price:x?n[x]:void 0,stock:x,onClose:y,addStockEntry:M,removeStockEntry:A}),t.jsx(Dt,{open:d,compEntry:l!==-1?e[l]:void 0,onClose:S,addCompEntry:T})]})};export{qt as default};
//# sourceMappingURL=index-B25D5GeY.js.map
