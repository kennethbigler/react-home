{"version":3,"file":"index-DgtOIwxo.js","sources":["../../src/jotai/tic-tac-toe-atom.ts","../../src/components/games/tictactoe/Header.tsx","../../src/components/games/tictactoe/helpers.ts","../../src/components/games/tictactoe/History.tsx","../../src/components/games/tictactoe/Cell.tsx","../../src/components/games/tictactoe/Board.tsx","../../src/components/games/tictactoe/TicTacToe.tsx"],"sourcesContent":["import { atomWithStorage } from \"jotai/utils\";\n\nexport interface HistoryEntry {\n  board: string[] | null[];\n  location?: number;\n}\nexport interface TicTacToeState {\n  history: HistoryEntry[];\n  turn: string;\n  step: number;\n}\n\nexport const X = \"X\";\nexport const O = \"O\";\nexport const EMPTY = null;\nexport const newTicTacToe = (): TicTacToeState => ({\n  history: [{ board: Array(9).fill(EMPTY) }],\n  turn: X,\n  step: 0,\n});\n\nconst tikTacToeAtom = atomWithStorage(\"tikTacToeAtom\", newTicTacToe());\n\nexport default tikTacToeAtom;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Typography from \"@mui/material/Typography\";\n\ninterface HeaderProps {\n  newGame: React.MouseEventHandler;\n  turn: string;\n  winner: string | null;\n}\n\nconst Header = React.memo(({ winner, turn, newGame }: HeaderProps) => (\n  <Toolbar>\n    <Typography style={{ flex: 1 }} variant=\"h4\" component=\"h2\">\n      {winner ? `Winner: ${winner}` : `Turn: ${turn}`}\n    </Typography>\n    <Button onClick={newGame} variant=\"contained\">\n      Reset Game\n    </Button>\n  </Toolbar>\n));\n\nHeader.displayName = \"Header\";\n\nexport default Header;\n","import { O, X, EMPTY } from \"../../../jotai/tic-tac-toe-atom\";\n\nexport const getTurn = (n: number): string => (n % 2 ? O : X);\n\n/** function to check if there are 3 in a row\n * @return value of winner and positions for winner */\nexport function calculateWinner(board: string[] | null[]): {\n  winner: string | null;\n  winRow: [number?, number?, number?];\n} {\n  const lines: [number, number, number][] = [\n    // horizontal\n    [0, 1, 2],\n    [3, 4, 5],\n    [6, 7, 8],\n    // vertical\n    [0, 3, 6],\n    [1, 4, 7],\n    [2, 5, 8],\n    // diagonal\n    [0, 4, 8],\n    [2, 4, 6],\n  ];\n  // check each win condition\n  for (let i = 0; i < lines.length; i += 1) {\n    const [a, b, c] = lines[i];\n    // if all 3 match and aren't empty\n    if (board[a] !== EMPTY && board[a] === board[b] && board[a] === board[c]) {\n      // return winner and winning positions\n      return { winner: board[a], winRow: lines[i] };\n    }\n  }\n  return { winner: null, winRow: [] };\n}\n\nexport default getTurn;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport { getTurn } from \"./helpers\";\nimport { HistoryEntry } from \"../../../jotai/tic-tac-toe-atom\";\n\ninterface HistoryProps {\n  history: HistoryEntry[];\n  jumpToStep: (move: number) => void;\n  step: number;\n}\n\nconst History = ({ history, step, jumpToStep }: HistoryProps) => {\n  const [ascend, setAscend] = React.useState(true);\n\n  /** function that generates text for the history tracker */\n  const getHistoryText = (\n    round: HistoryEntry,\n    move: number,\n  ): React.ReactElement => {\n    const location = round.location || 0;\n    // generate description text\n    const description = !move\n      ? \"Game Start (Turn, Col, Row)\"\n      : `Move #${move} (${getTurn(move - 1)}, ` +\n        `${Math.floor(location / 3)}, ${location % 3})`;\n    // highlight current turn displayed on board\n    const color = step === move ? \"secondary\" : \"primary\";\n\n    return (\n      <Button\n        key={move}\n        color={color}\n        onClick={(): void => jumpToStep(move)}\n        style={{ display: \"block\" }}\n      >\n        {description}\n      </Button>\n    );\n  };\n\n  // move history\n  const moves = history.map(getHistoryText);\n  // asc vs. desc\n  if (!ascend) {\n    moves.reverse();\n  }\n\n  return (\n    <>\n      <Button\n        onClick={(): void => {\n          setAscend(!ascend);\n        }}\n        style={{ marginTop: 20, marginBottom: 20 }}\n        variant=\"contained\"\n      >\n        {ascend ? \"Asc\" : \"Desc\"}\n      </Button>\n      {moves}\n    </>\n  );\n};\n\nexport default History;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport { useTheme } from \"@mui/material/styles\";\n\ninterface CellProps {\n  onClick: React.MouseEventHandler;\n  value: string | null;\n  winner: boolean;\n}\n\nconst Cell = React.memo(({ value, winner, onClick }: CellProps) => {\n  const {\n    palette: {\n      primary: { main },\n    },\n  } = useTheme();\n  // add attributes if cell is a winner\n  const attr: React.CSSProperties = winner\n    ? { color: \"white\", backgroundColor: main }\n    : {};\n\n  return (\n    <Button\n      onClick={onClick}\n      style={attr}\n      aria-label={`Tic Tac Toe Play Button ${\n        value ? `${value} selected` : \"available\"\n      }`}\n    >\n      {value || <br />}\n    </Button>\n  );\n});\n\nCell.displayName = \"Cell\";\n\nexport default Cell;\n","import * as React from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { grey } from \"@mui/material/colors\";\nimport Cell from \"./Cell\";\n\ninterface BoardProps {\n  board: string[] | null[];\n  onClick: (cell: number) => void;\n  winRow: [number?, number?, number?];\n}\n\nconst tableCellStyle: React.CSSProperties = {\n  padding: 0,\n  textAlign: \"center\",\n  border: `1px solid ${grey[400]}`,\n};\n\nconst Board = ({ board, onClick, winRow }: BoardProps) => {\n  const cells = [];\n  // create 3 rows\n  for (let i = 0; i < 3; i += 1) {\n    // create 3 cells in a row\n    const row = [];\n    for (let j = 0; j < 3; j += 1) {\n      const c = i * 3 + j;\n      // check if winning position\n      const winner = winRow.includes(c);\n      row.push(\n        <TableCell key={`${i},${j}`} style={tableCellStyle}>\n          <Cell\n            onClick={(): void => onClick(c)}\n            value={board[c]}\n            winner={winner}\n          />\n        </TableCell>,\n      );\n    }\n    const boardRow = <TableRow key={`row${i}`}>{row}</TableRow>;\n    // separate into rows\n    cells.push(boardRow);\n  }\n\n  return (\n    <Table aria-label=\"game of Tik Tac Toe in a 3 by 3 grid\">\n      <TableBody>{cells}</TableBody>\n    </Table>\n  );\n};\n\nexport default Board;\n","import * as React from \"react\";\nimport { useAtom } from \"jotai\";\nimport Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\nimport ticTacToeAtom, {\n  TicTacToeState,\n  X,\n  O,\n  EMPTY,\n  newTicTacToe,\n} from \"../../../jotai/tic-tac-toe-atom\";\nimport Header from \"./Header\";\nimport History from \"./History\";\nimport Board from \"./Board\";\nimport { getTurn, calculateWinner } from \"./helpers\";\n\nconst paperStyles: React.CSSProperties = {\n  width: 343,\n  display: \"block\",\n  margin: \"auto\",\n};\n\n/* TicTacToe  ->  Header\n *           |->  Board  ->  Cell\n *           |->  History */\nconst TicTacToe = React.memo(() => {\n  const [{ turn, step, history }, setState] = useAtom(ticTacToeAtom);\n\n  /** function that modifies board with appropriate turn\n   * @param location - location of board click (row * 3 + col) */\n  const handleClick = (location: number): void => {\n    const newHistory = history.slice(0, step + 1);\n    const current = newHistory[step];\n    const board = current.board.slice();\n\n    // game is over or cell is full\n    if (!calculateWinner(board).winner && board[location] === EMPTY) {\n      // place marker, then update turn\n      board[location] = turn;\n\n      setState({\n        history: newHistory.concat([{ board, location }]),\n        step: newHistory.length,\n        turn: turn === X ? O : X,\n      });\n    }\n  };\n\n  /** function that resets game back to it's initial state */\n  const newTTTGame = (): void => setState(newTicTacToe());\n\n  /** function that modifies board to go back to a previous point in history\n   * @param step - desired point in history */\n  const jumpToStep = (stepNo: number): void => {\n    const newTurn: TicTacToeState = {\n      step: stepNo,\n      turn: getTurn(stepNo),\n      history,\n    };\n    // Double click will eliminate all other history if there is any\n    if (step === stepNo) {\n      newTurn.history = history.slice(0, step + 1);\n    }\n    // update board to previous turn, non-permanent, history exists still\n    setState(newTurn);\n  };\n\n  const current = history[step];\n  const board = current.board.slice();\n  const { winner, winRow } = calculateWinner(board);\n\n  return (\n    <>\n      <Typography variant=\"h2\" component=\"h1\" gutterBottom>\n        Tic-Tac-Toe\n      </Typography>\n      <Paper elevation={2} style={paperStyles}>\n        <Header newGame={newTTTGame} turn={turn} winner={winner} />\n        <Board board={board} onClick={handleClick} winRow={winRow} />\n      </Paper>\n      <History history={history} jumpToStep={jumpToStep} step={step} />\n    </>\n  );\n});\n\nTicTacToe.displayName = \"TicTacToe\";\n\nexport default TicTacToe;\n"],"names":["X","O","EMPTY","newTicTacToe","tikTacToeAtom","atomWithStorage","Header","React.memo","winner","turn","newGame","jsxs","Toolbar","jsx","Typography","Button","getTurn","n","calculateWinner","board","lines","i","a","b","c","History","history","step","jumpToStep","ascend","setAscend","React.useState","getHistoryText","round","move","location","description","color","moves","Fragment","Cell","value","onClick","main","useTheme","attr","tableCellStyle","grey","Board","winRow","cells","row","j","TableCell","boardRow","TableRow","Table","TableBody","paperStyles","TicTacToe","setState","useAtom","ticTacToeAtom","handleClick","newHistory","newTTTGame","stepNo","newTurn","Paper"],"mappings":"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"}