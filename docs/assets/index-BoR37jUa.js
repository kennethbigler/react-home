import{O as _,P as mt,j as t,e as pt,f as xt,s as gt,v as jt,r as d,h as ft,c as yt,i as St,J as O,I as Ct,M as I,B as tt,A as U}from"./index-D9Q2e5iW.js";import{d as $,m as kt}from"./DateHelper-b37KTdR-.js";import{G as w}from"./Grid2-Ch4aHi69.js";import{T as p,D as G,M as L}from"./Header-xXWqeY7H.js";import{C as bt}from"./Card-DrOjTxH7.js";import{C as vt,a as R}from"./CardActionArea-TWzPuSkb.js";import{C as z}from"./CardContent-CYoQBoRT.js";import{D as et,a as st,b as nt,c as ot}from"./DialogTitle-D4hZhnBn.js";import{F as H,I as Q,S as J}from"./Select-DjzgRRcr.js";import{T as M}from"./TextField-Dt1EjBSe.js";import{B as N}from"./Button-CCO7SrwO.js";import{C as Dt}from"./Chip-DEk6KEWX.js";import{H as at,a as rt}from"./highcharts-react.min-Cz91PJEO.js";import{l as Tt}from"./lightGreen-Czsbt-f6.js";import"./useThemeProps-D_osEmUU.js";import"./isMuiElement-DyMP2eY_.js";import"./useId-5UdpZQWN.js";import"./useSlotProps-CARyuB0S.js";const lt=_("stockAtom",{}),it=_("compCalcAtom",[]),At=mt(e=>{const s=e(it),n=e(lt),a={},h=s.map(({bonus:o,entryDate:c,grantDuration:r,grantQty:l,priceThen:x,salary:u,stockTick:g})=>{const f=n[g]||0;let m=0,j=0;const y=$(c);y.year+=r,a[g]||(a[g]=[]),l>0&&a[g].push({grantQty:l,grantDuration:r,exp:y}),a[g].forEach(C=>{$(c).diff(C.exp,"days")<0&&(m+=x*C.grantQty/C.grantDuration,j+=f*C.grantQty/C.grantDuration)});const b=u+o+m,D=u+o+j,A=x*l,B=f*l;return{stock:m,stockAdj:j,total:b,totalAdj:D,grantThen:A,grantNow:B}});return h.map(({totalAdj:o,...c},r)=>{const l=r===0?0:o-h[r-1].totalAdj;return{totalAdj:o,netDiff:l,...c}})}),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),wt=({compEntries:e,compCalcEntries:s,onClick:n})=>t.jsxs(w,{container:!0,spacing:1,children:[t.jsx(w,{size:12,children:t.jsx(p,{children:"*value computed from latest stock price above"})}),e.map((a,h)=>{const{entryDate:i,salary:o,bonus:c,stockTick:r,priceThen:l,grantDuration:x,grantQty:u}=a,{stock:g,stockAdj:f,total:m,totalAdj:j,netDiff:y,grantThen:b,grantNow:D}=s[h];return t.jsx(w,{size:{xs:12,md:6,lg:4,xl:3,xxl:e.length>4?2:void 0,xxxl:e.length>6?1:void 0},children:t.jsx(bt,{children:t.jsx(vt,{onClick:n(h),children:t.jsxs(w,{container:!0,children:[t.jsxs(w,{size:r?6:12,children:[t.jsx(R,{title:"Salary"}),t.jsxs(z,{children:[t.jsxs(p,{children:["Date: ",$(i).format("MMMM Y")]}),t.jsxs(p,{children:["Salary: ",v.format(o)]}),t.jsxs(p,{children:["Bonus: ",v.format(c)]}),t.jsx(G,{"aria-hidden":!0}),t.jsxs(p,{children:["Stock: ",v.format(g)]}),t.jsxs(p,{children:["*Stock: ",v.format(f)]}),t.jsx(G,{"aria-hidden":!0}),t.jsxs(p,{children:["Total: ",v.format(m)]}),t.jsx(p,{sx:{display:"inline"},children:"*Total:"}),t.jsx(p,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(j)}),y!==0&&t.jsxs(t.Fragment,{children:[t.jsx(G,{"aria-hidden":!0}),t.jsx(p,{sx:{display:"inline"},children:"Net:"}),t.jsx(p,{color:y>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(y)})]})]})]}),r&&t.jsxs(w,{size:6,children:[t.jsx(R,{title:"Stock Grant"}),t.jsxs(z,{children:[t.jsx(p,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(p,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:r}),u>0&&t.jsxs(t.Fragment,{children:[t.jsxs(p,{children:["Price: ",v.format(l)]}),t.jsxs(p,{children:["Grant Qty: ",u]}),t.jsxs(p,{children:["Duration: ",x," years"]}),t.jsx(G,{"aria-hidden":!0}),t.jsxs(p,{children:["Grant: ",v.format(b)]}),t.jsxs(p,{children:["*Grant: ",v.format(D)]})]})]})]})]})})})},`comp-calc-entry-${h}`)}).reverse()]});function Mt(e){return xt("MuiDialogContentText",e)}pt("MuiDialogContentText",["root"]);const Nt=e=>{const{classes:s}=e,a=St({root:["root"]},Mt,s);return{...s,...a}},Bt=gt(p,{shouldForwardProp:e=>jt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),Ft=d.forwardRef(function(s,n){const a=ft({props:s,name:"MuiDialogContentText"}),{children:h,className:i,...o}=a,c=Nt(o);return t.jsx(Bt,{component:"p",variant:"body1",color:"textSecondary",ref:n,ownerState:o,className:yt(c.root,i),...a,classes:c})}),P={variant:"standard",fullWidth:!0,margin:"dense"},Pt=new Date().getFullYear()-2e3,W=[];for(let e=0;e<=Pt;e+=1)W.push(2e3+e);W.reverse();const $t=({open:e,compEntry:s,onClose:n,addCompEntry:a})=>{const[h,i]=d.useState("1"),[o,c]=d.useState(W[0].toString()),[r,l]=d.useState(0),[x,u]=d.useState(0),[g,f]=d.useState(""),[m,j]=d.useState(0),[y,b]=d.useState(4),[D,A]=d.useState(0),B=()=>{i("1"),c(W[0].toString()),l(0),u(0),f(""),j(0),b(4),A(0)};d.useEffect(()=>{if(s){const{month:S,year:F}=$(s.entryDate);i((S+1).toString()),c(F.toString()),l(s.salary),u(s.bonus),f(s.stockTick),j(s.priceThen),b(s.grantDuration),A(s.grantQty)}else B()},[s,s==null?void 0:s.salary]);const C=S=>F=>S(parseFloat(F.target.value)),k=S=>f(S.target.value),T=S=>i(S.target.value),E=S=>c(S.target.value),ut=()=>{a({entryDate:`${o}-${h.length<2?"0":""}${h}`,salary:r,bonus:x,stockTick:g,priceThen:m,grantDuration:y,grantQty:D}),B()};return t.jsxs(et,{open:e,onClose:n,children:[t.jsxs(st,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(nt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(H,{fullWidth:!0,children:[t.jsx(Q,{id:"month-select",children:"Month"}),t.jsx(J,{labelId:"month-select",label:"Month",value:h,onChange:T,children:kt.map((S,F)=>t.jsx(L,{value:F+1,children:S},F))})]}),t.jsxs(H,{fullWidth:!0,children:[t.jsx(Q,{id:"year-select",children:"Year"}),t.jsx(J,{labelId:"year-select",label:"Year",value:o,onChange:E,children:W.map(S=>t.jsx(L,{value:S,children:S},S))})]})]}),t.jsx(M,{label:"Salary",value:r,type:"number",onChange:C(l),slotProps:{input:{startAdornment:"$"}},...P}),t.jsx(M,{label:"Bonus",value:x,type:"number",onChange:C(u),slotProps:{input:{startAdornment:"$"}},...P}),t.jsx(Ft,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(M,{label:"Stock Ticker",value:g,onChange:k,...P}),t.jsx(M,{label:"Grant Quantity",value:D,type:"number",onChange:C(A),...P}),t.jsx(M,{label:"Grant Duration",value:y,type:"number",onChange:C(b),...P}),t.jsx(M,{label:"Stock Price Then",value:m,type:"number",onChange:C(j),slotProps:{input:{startAdornment:"$"}},...P})]}),t.jsxs(ot,{children:[t.jsx(N,{onClick:n,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:ut,children:s?"Update":"Add"})]})]})},V={variant:"standard",fullWidth:!0,margin:"dense"},ct=d.memo(({open:e,price:s,stock:n,onClose:a,addStockEntry:h,removeStockEntry:i})=>{const[o,c]=d.useState(0),[r,l]=d.useState(""),x=()=>{c(0),l("")};d.useEffect(()=>{n&&s!==void 0?(c(s),l(n)):x()},[s,n]);const u=m=>l(m.target.value),g=m=>c(parseFloat(m.target.value)),f=()=>{h(r,o),x()};return t.jsxs(et,{open:e,onClose:a,children:[t.jsxs(st,{children:[n?"Edit":"New"," Stock Entry"]}),t.jsx(nt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(M,{label:"Stock",value:r,onChange:u,...V}),t.jsx(M,{label:"Price Now",value:o,type:"number",onChange:g,slotProps:{input:{startAdornment:"$"}},...V})]})}),t.jsxs(ot,{children:[t.jsx(N,{onClick:i(r),color:"error",children:"Delete"}),t.jsx(N,{onClick:a,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:f,children:n?"Update":"Add"})]})]})});ct.displayName="StockDialog";const Wt=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((n,a)=>t.jsx(Dt,{color:"primary",label:`${n}: ${v.format(e[n])}`,onClick:s(n),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${a}`))}),dt=[Tt[500],O[500],Ct[500],O[900]],q=0,K=1,X=2,Z=3,Y=4,Et={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},Gt=({startIdx:e,compCalcEntries:s,compEntries:n,onClick:a})=>{const i=I(tt).mode==="light"?"black":"white",o=[[],[],[],[],[]];if(n.length>0){let r=$(n[e].entryDate).year,l=n[e].salary+n[e].bonus+(s[e].stockAdj||s[e].stock);n.forEach(({bonus:x,salary:u,entryDate:g},f)=>{const{stock:m,stockAdj:j}=s[f];o[q].push(j||m),o[K].push(x),o[X].push(u),o[Z].push(m+x+u);const y=$(g).year;if(y>=r){for(;r<y;r+=1)l*=Et[r];o[Y].push(l)}else o[Y].push(x+u+(j||m))})}const c={colors:[...dt,i],chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:i}},xAxis:{visible:!1},yAxis:{labels:{style:{color:i}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"},plotOptions:{area:{stacking:"normal",lineColor:i,lineWidth:1,marker:{lineWidth:1,lineColor:i}},series:{cursor:"pointer",events:{click:a}}},series:[{type:"area",name:"Stock",data:[...o[q]]},{type:"area",name:"Bonus",data:[...o[K]]},{type:"area",name:"Salary",data:[...o[X]]},{type:"spline",name:"Total",data:[...o[Z]]},{type:"spline",name:"Inflation",data:[...o[Y]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(at,{highcharts:rt,options:c})})},ht=d.memo(({bonus:e,salary:s,stock:n})=>{const h=I(tt).mode==="light"?"black":"white",i={colors:dt,chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:h}},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:n},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(at,{highcharts:rt,options:i})})});ht.displayName="BreakdownChart";const Yt=({compEntries:e,compCalcEntries:s})=>{const{stock:n,stockAdj:a}=s[s.length-1],{bonus:h,salary:i}=e[e.length-1],[o,c]=d.useState(0),[r,l]=d.useState(a||n),[x,u]=d.useState(h),[g,f]=d.useState(i);d.useEffect(()=>{c(0),l(a||n),u(h),f(i)},[a,n,h,i]);const m=({point:{index:j}})=>{const{stock:y,stockAdj:b}=s[j],{bonus:D,salary:A}=e[j];c(j>=e.length-1?0:j),l(b||y),u(D),f(A)};return t.jsxs(w,{container:!0,children:[t.jsx(w,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Gt,{startIdx:o,compCalcEntries:s,compEntries:e,onClick:m})}),t.jsx(w,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(ht,{stock:r,bonus:x,salary:g})})]})},ne=()=>{const[e,s]=U(it),n=I(At),[a,h]=U(lt),[i,o]=d.useState(!1),[c,r]=d.useState(!1),[l,x]=d.useState(-1),[u,g]=d.useState(""),f=()=>o(!1),m=()=>{x(-1),o(!0)},j=k=>()=>{x(k),o(!0)},y=()=>r(!1),b=()=>{g(""),r(!0)},D=k=>()=>{g(k),r(!0)},A=k=>{const T=[...e];l===-1?T.push(k):T[l]=k,s(T),f()},B=(k,T)=>{const E={...a};E[k]=T,h(E),y()},C=k=>()=>{const T={...a};delete T[k],h(T),y()};return t.jsxs(t.Fragment,{children:[t.jsx(p,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Wt,{stockEntries:a,openStockModal:D}),t.jsxs("div",{children:[t.jsx(N,{onClick:b,children:"+ Stock"}),t.jsx(N,{onClick:m,children:"+ Entry"})]})]}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Yt,{compEntries:e,compCalcEntries:n}),t.jsx(wt,{compEntries:e,compCalcEntries:n,onClick:j})]}),t.jsx(ct,{open:c,price:u?a[u]:void 0,stock:u,onClose:y,addStockEntry:B,removeStockEntry:C}),t.jsx($t,{open:i,compEntry:l!==-1?e[l]:void 0,onClose:f,addCompEntry:A})]})};export{ne as default};
//# sourceMappingURL=index-BoR37jUa.js.map
