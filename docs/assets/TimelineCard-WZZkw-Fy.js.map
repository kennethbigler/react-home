{"version":3,"file":"TimelineCard-WZZkw-Fy.js","sources":["../../src/components/common/timeline-card/Segment.tsx","../../src/components/common/timeline-card/YearMarkers.tsx","../../src/components/common/timeline-card/Row.tsx","../../src/components/common/timeline-card/Timeline.tsx","../../src/components/common/timeline-card/TimelineCard.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { useTheme } from \"@mui/material/styles\";\nimport { grey } from \"@mui/material/colors\";\nimport { SegmentType } from \"./types\";\n\nconst bodyStyles: React.CSSProperties = {\n  cursor: \"default\",\n  paddingTop: \"5px\",\n  paddingBottom: \"5px\",\n  textAlign: \"center\",\n  borderRadius: 2,\n};\n\nconst Segment = React.memo((props: SegmentType): React.ReactElement => {\n  const {\n    palette: { mode },\n  } = useTheme();\n  const { body, width, color, title, inverted } = props;\n\n  // variables for empty segment\n  let style: React.CSSProperties = {\n    display: \"inline-block\",\n    width: `${width}%`,\n    color: inverted ? \"black\" : grey[50],\n  };\n  if (body) {\n    style = {\n      ...style,\n      ...bodyStyles,\n      backgroundColor: color,\n      boxShadow: `2px 3px 4px 1px ${mode !== \"dark\" ? grey[400] : grey[700]}`,\n    };\n  }\n\n  return (\n    <div style={style} title={title}>\n      {body || <br />}\n    </div>\n  );\n});\n\nSegment.displayName = \"Segment\";\n\nexport default Segment;\n","import * as React from \"react\";\nimport { grey } from \"@mui/material/colors\";\nimport { SegmentType } from \"./types\";\n\ninterface YearMarkersProps {\n  data: SegmentType;\n}\n\nconst boxStyles: React.CSSProperties = {\n  cursor: \"default\",\n  height: 500,\n  marginBottom: -500,\n  minWidth: 1,\n};\nconst markerStyles: React.CSSProperties = {\n  ...boxStyles,\n  backgroundColor: grey[200],\n  width: \"100%\",\n  maxWidth: 2.5,\n};\nconst labelStyles: React.CSSProperties = {\n  position: \"relative\",\n  right: 22,\n};\n\nconst YearMarkers = (props: YearMarkersProps): React.ReactElement => {\n  const {\n    data: { body, width },\n  } = props;\n\n  // variables for empty segment\n  const style: React.CSSProperties = {\n    display: \"inline-block\",\n    width: `${width}%`,\n  };\n\n  return !body ? (\n    <div title=\"year\" style={style}>\n      <br />\n    </div>\n  ) : (\n    <div style={{ ...style, ...boxStyles }} title={body}>\n      <div style={markerStyles} title=\"year-marker\">\n        <div style={labelStyles}>{body}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default YearMarkers;\n","import * as React from \"react\";\nimport Segment from \"./Segment\";\nimport YearMarkers from \"./YearMarkers\";\nimport { SegmentType } from \"./types\";\n\ninterface RowProps {\n  segments: SegmentType[];\n  yearMarkers?: boolean;\n  first?: boolean;\n}\n\nconst smMarginTop: React.CSSProperties = { marginTop: 10 };\nconst lgMarginTop: React.CSSProperties = { marginTop: 20 };\nconst noStyle: React.CSSProperties = { height: 0 };\n\nconst Row = (props: RowProps): React.ReactElement => {\n  const { segments, yearMarkers = false, first = false } = props;\n\n  let style = smMarginTop;\n  if (yearMarkers) {\n    style = noStyle;\n  } else if (first) {\n    style = lgMarginTop;\n  }\n\n  return (\n    <div style={style} title=\"timeline-row\">\n      {segments.map((data, j) =>\n        yearMarkers ? (\n          <YearMarkers key={j} data={data} />\n        ) : (\n          <Segment key={j} {...data} />\n        ),\n      )}\n    </div>\n  );\n};\n\nexport default Row;\n","import * as React from \"react\";\nimport dateObj, { DateObj } from \"../../../apis/DateHelper\";\nimport Row from \"./Row\";\nimport { SegmentType } from \"./types\";\nimport { DataEntry, MONTH_SORT } from \"./timeline-consts\";\n\ninterface TimelineProps {\n  /** reads [selector] from each array entry and creates segments */\n  data: DataEntry[];\n  /** key to be used to read data */\n  selector: string;\n  /** start of the timeline */\n  start: DateObj;\n  /** end of the timeline */\n  end: DateObj;\n  /** reduce year markers */\n  yearMarkerFrequency: number;\n  /** enables title field to be long version */\n  enableLongTitles?: boolean;\n}\n\nconst WIDTH = 99;\nconst MIN_LONG_WIDTH = 269;\nconst MIN_TEXT_WIDTH = 85;\nconst MIN_SHORT_WIDTH = 54;\nconst YEAR_WIDTH = 0.3;\n\n/** function to add empty space between start and elm segment */\nconst addEmptySegment = (segments: SegmentType[], width: number): void => {\n  if (width > 0) {\n    segments.push({ width });\n  }\n};\n\nconst Timeline = (props: TimelineProps): React.ReactElement => {\n  const {\n    start,\n    end,\n    selector,\n    data: propsData,\n    yearMarkerFrequency,\n    enableLongTitles,\n  } = props;\n  // get immutable data from props and sort by start date\n  const data: DataEntry[] = React.useMemo(\n    () => [...propsData].sort(MONTH_SORT),\n    [propsData],\n  );\n  // track elements added already\n  const added: boolean[] = [];\n\n  /** Get the width from the beginning of the graph to this bar */\n  const getTimeFromStart = React.useCallback(\n    (val: DateObj): number => {\n      // get max length\n      const totalDuration = end.diff(start, \"months\");\n      const timeFromStart = val.diff(start, \"months\");\n      const width = Math.floor((timeFromStart / totalDuration) * WIDTH);\n      return width > 0 ? width : 0;\n    },\n    [end, start],\n  );\n\n  /** function to add elm segment */\n  const addSegment = React.useCallback(\n    (\n      segments: SegmentType[],\n      elm: DataEntry,\n      beginning: number,\n      ending: number,\n    ): void => {\n      const { color, inverted, title, short, char } = elm;\n      const width = ending - beginning;\n      const textWidth = (width * (window.innerWidth - 64)) / WIDTH;\n      const payload = {\n        color,\n        inverted,\n        width,\n        title,\n      };\n      // check if name has room\n      if (textWidth < MIN_SHORT_WIDTH) {\n        segments.push({\n          body: char || (elm[selector] as string).substr(0, 1),\n          ...payload,\n        });\n      } else if (textWidth < MIN_TEXT_WIDTH) {\n        segments.push({\n          body: short,\n          ...payload,\n        });\n      } else if (!enableLongTitles || textWidth < MIN_LONG_WIDTH) {\n        segments.push({\n          body: elm[selector] as string,\n          ...payload,\n        });\n      } else {\n        segments.push({\n          body: title,\n          ...payload,\n        });\n      }\n    },\n    [selector, enableLongTitles],\n  );\n\n  /** break data up into segments */\n  const getSegments = (elm: DataEntry, i: number): SegmentType[] => {\n    // skip if added already\n    if (added[i]) {\n      return [];\n    }\n\n    // local variables\n    const segments: SegmentType[] = [];\n    const { start: segStart, end: segEnd } = elm;\n    let beginning = getTimeFromStart(segStart);\n    let ending = getTimeFromStart(segEnd);\n\n    // add main segments\n    addEmptySegment(segments, beginning);\n    addSegment(segments, elm, beginning, ending);\n\n    // track that segments have been added\n    added[i] = true;\n\n    // find any other segments that will fit\n    for (let j = i + 1; j < data.length; j += 1) {\n      // skip if added already\n      if (!added[j]) {\n        // test segment\n        const { start: jStart, end: jEnd } = data[j];\n        beginning = getTimeFromStart(jStart);\n\n        // if start is after end of main segment\n        if (beginning >= ending) {\n          // add filler in between end/start\n          addEmptySegment(segments, beginning - ending);\n          // add next segment\n          ending = getTimeFromStart(jEnd);\n          addSegment(segments, data[j], beginning, ending);\n          // mark as already added\n          added[j] = true;\n        }\n      }\n    }\n\n    // get last segment\n    addEmptySegment(segments, WIDTH - ending);\n\n    return [...segments];\n  };\n\n  /** adds gray lines to indicate years */\n  const getYearMarkers = React.useCallback((): SegmentType[] => {\n    const startYear = Number(start.format(\"YYYY\"));\n    const endYear = Number(end.format(\"YYYY\"));\n\n    const years = [];\n    for (\n      let year = startYear + 1;\n      year <= endYear;\n      year += yearMarkerFrequency\n    ) {\n      years.push(dateObj(`${year}`));\n    }\n\n    const marker = { width: YEAR_WIDTH, body: years[0].format(\"'YY\") };\n    const yearMarkers = [\n      { width: getTimeFromStart(years[0]) - YEAR_WIDTH },\n      marker,\n    ];\n\n    for (let i = 1; i < years.length; i += 1) {\n      const previousYear = getTimeFromStart(years[i - 1]);\n      const thisYear = getTimeFromStart(years[i]);\n      yearMarkers.push({ width: thisYear - previousYear - YEAR_WIDTH });\n      yearMarkers.push({ width: YEAR_WIDTH, body: years[i].format(\"'YY\") });\n    }\n\n    return yearMarkers;\n  }, [end, getTimeFromStart, start, yearMarkerFrequency]);\n\n  return (\n    <div style={{ width: \"100%\", paddingBottom: 7 }}>\n      <Row key={data.length} segments={getYearMarkers()} yearMarkers />\n      {data.map((elm, i) => {\n        const segments = getSegments(elm, i);\n        return segments.length ? (\n          <Row key={i} segments={segments} first={i === 0} />\n        ) : null;\n      })}\n    </div>\n  );\n};\n\nexport default Timeline;\n","import * as React from \"react\";\nimport { grey } from \"@mui/material/colors\";\nimport dateObj, { DateObj, FormatOutput } from \"../../../apis/DateHelper\";\nimport ExpandableCard from \"../expandable-card\";\nimport Timeline from \"./Timeline\";\nimport { TIMELINE_TITLE, DataEntry } from \"./timeline-consts\";\nimport workExperience from \"../../../constants/work\";\n\ninterface TimelineCardProps {\n  /** background color of the expandable card top bar */\n  backgroundColor?: string;\n  /** reads [selector] from each array entry and creates segments */\n  data?: DataEntry[];\n  /** title content */\n  title?: string;\n  /** key to be used to read data */\n  selector?: string;\n  /** start of the timeline */\n  start?: DateObj;\n  /** end of the timeline */\n  end?: DateObj;\n  /** reduce year markers */\n  yearMarkerFrequency?: number;\n  /** enables title field to be long version */\n  enableLongTitles?: boolean;\n}\n\nconst DATE_FORMAT: FormatOutput = \"MMMM Y\";\n\n/* TimelineCard  ->  Timeline  ->  Row  ->  Segment\n *                                     |->  YearMarkers */\n/** function to generate timeline card */\nconst TimelineCard = (props: TimelineCardProps): React.ReactElement | null => {\n  const {\n    data = workExperience,\n    backgroundColor = grey[800],\n    title = TIMELINE_TITLE,\n    selector = \"company\",\n    start = dateObj(\"2011-09\"),\n    end = dateObj(),\n    yearMarkerFrequency = 1,\n    enableLongTitles,\n  } = props;\n\n  return (\n    <ExpandableCard\n      backgroundColor={backgroundColor}\n      subtitle={`${start.format(DATE_FORMAT)} - ${end.format(DATE_FORMAT)}`}\n      title={title}\n    >\n      <Timeline\n        data={data}\n        selector={selector}\n        start={start}\n        end={end}\n        yearMarkerFrequency={yearMarkerFrequency}\n        enableLongTitles={enableLongTitles}\n      />\n    </ExpandableCard>\n  );\n};\n\nexport default TimelineCard;\n"],"names":["bodyStyles","Segment","React.memo","props","mode","useTheme","body","width","color","title","inverted","style","grey","jsx","boxStyles","markerStyles","labelStyles","YearMarkers","smMarginTop","lgMarginTop","noStyle","Row","segments","yearMarkers","first","data","j","WIDTH","MIN_LONG_WIDTH","MIN_TEXT_WIDTH","MIN_SHORT_WIDTH","YEAR_WIDTH","addEmptySegment","Timeline","start","end","selector","propsData","yearMarkerFrequency","enableLongTitles","React.useMemo","MONTH_SORT","added","getTimeFromStart","React.useCallback","val","totalDuration","timeFromStart","addSegment","elm","beginning","ending","short","char","textWidth","payload","getSegments","i","segStart","segEnd","jStart","jEnd","getYearMarkers","startYear","endYear","years","year","dateObj","marker","previousYear","thisYear","jsxs","DATE_FORMAT","TimelineCard","workExperience","backgroundColor","TIMELINE_TITLE","ExpandableCard"],"mappings":"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"}