import{r as k,j as l,E as G,O as W,P as w,W as z,A as I,M as J}from"./index-CXH5PJAX.js";import{P as S,T as g}from"./Header-GvylGjxW.js";import{a as Y}from"./amber-D7aVlNg3.js";import{D as F,a as H,b as L,c as N}from"./DialogTitle-dFZDOpg5.js";import{B as h}from"./Button-CFdI_Fmb.js";import{G as O}from"./Grid2-BQTch28q.js";import{p as j,P as q}from"./PlayerMenu-v7KbM9ow.js";import"./useId-OlN40uZa.js";import"./useThemeProps-zp0kfiu8.js";import"./isMuiElement-CKPetrCJ.js";import"./Select-BhZ8L7FE.js";import"./useSlotProps-CGpai8QW.js";import"./TextField-IHRxVwn6.js";const p=(e=0)=>{const o=e.toString().split(""),t=o[0]==="-"?1:0;for(let n=o.length-3;n>t;n-=3)o.splice(n,0,",");return o.splice(t,0,"$"),o.join("")},K={width:"90%",marginLeft:"5%",marginRight:"5%",marginBottom:5,padding:5,textAlign:"center",color:"white"},B=k.memo(({on:e,val:o})=>{const t={backgroundColor:e?Y[500]:G[700]},n={...K,...t};return l.jsx(S,{style:n,children:e?p(o):l.jsx("del",{children:p(o)})})});B.displayName="Money";const M={width:"50%",display:"inline-block"},b=(e,o,t=e.length)=>e.slice(o,t).map(n=>l.jsx(B,{on:n.on,val:n.val},n.loc)),Q=({deal:e,noDeal:o,offer:t,open:n,swap:s,numCases:r,board:m})=>{const a=[...m].sort((v,i)=>v.val-i.val),x=b(a,0,a.length/2),f=b(a,a.length/2);return l.jsxs(F,{fullWidth:!0,open:n,children:[l.jsx(H,{children:`${p(t)} - Deal or No Deal?`}),l.jsxs(L,{children:[l.jsx("div",{style:M,children:x}),l.jsx("div",{style:M,children:f})]}),r>2?l.jsxs(N,{children:[l.jsx(h,{color:"success",onClick:e,children:"Deal"}),l.jsx(h,{color:"error",onClick:o,children:"No Deal"})]}):l.jsxs(N,{children:[l.jsx(h,{color:"success",onClick:e,children:"Deal"}),l.jsx(h,{color:"secondary",onClick:o,children:"My Case"}),l.jsx(h,{color:"error",onClick:s,children:"Other Case"})]})]})},U=({briefcase:e,isOver:o,onClick:t,secondary:n})=>{const s=n?"secondary":"primary",r=e.on&&!o?e.loc:p(e.val);return l.jsx(h,{color:s,disabled:!e.on,onClick:t,style:{margin:10},variant:"contained",children:r})},V={maxWidth:796,padding:9,textAlign:"center",display:"block",margin:"auto",marginTop:20},X=({board:e,isOver:o,onClick:t,playerChoice:n})=>l.jsx(S,{elevation:2,style:V,children:e.map((s,r)=>l.jsx(U,{briefcase:s,isOver:o,onClick:()=>t(r),secondary:n&&n.loc===s.loc},r))}),Z=({playerChoice:e,casesToOpen:o,isOver:t,newGame:n,name:s,money:r,dndOpen:m})=>l.jsxs(O,{container:!0,spacing:1,children:[l.jsxs(O,{size:{xs:12,sm:6},children:[l.jsx(g,{variant:"h3",component:"h2",gutterBottom:!0,children:`Your Case: ${e?e.loc:"?"}${t?` - ${p(e&&e.val)}`:""}`}),l.jsx(g,{variant:"h4",component:"h3",gutterBottom:!0,children:!m&&(t?`You Won ${p(t)}`:`Number of Cases to Open: ${o}`)}),t&&l.jsx(h,{onClick:n,variant:"contained",children:"New Game"})]}),l.jsx(O,{size:{xs:12,sm:6},children:l.jsx(g,{variant:"h3",align:"right",gutterBottom:!0,children:`${s}: ${p(r)}`})})]}),C=6,ee=()=>({board:[{val:1,loc:1,on:!0},{val:2,loc:2,on:!0},{val:5,loc:3,on:!0},{val:10,loc:4,on:!0},{val:25,loc:5,on:!0},{val:50,loc:6,on:!0},{val:75,loc:7,on:!0},{val:100,loc:8,on:!0},{val:200,loc:9,on:!0},{val:300,loc:10,on:!0},{val:400,loc:11,on:!0},{val:500,loc:12,on:!0},{val:750,loc:13,on:!0},{val:1e3,loc:14,on:!0},{val:5e3,loc:15,on:!0},{val:1e4,loc:16,on:!0},{val:25e3,loc:17,on:!0},{val:5e4,loc:18,on:!0},{val:75e3,loc:19,on:!0},{val:1e5,loc:20,on:!0},{val:2e5,loc:21,on:!0},{val:3e5,loc:22,on:!0},{val:4e5,loc:23,on:!0},{val:5e5,loc:24,on:!0},{val:75e4,loc:25,on:!0},{val:1e6,loc:26,on:!0}],turn:1,playerChoice:void 0,casesToOpen:C,dndOpen:!1,isOver:0}),oe=e=>{for(let o=0;o<100;o+=1){const t=Math.floor(Math.random()*e.length),n=Math.floor(Math.random()*e.length),s=e[t].loc;e[t].loc=e[n].loc,e[n].loc=s}},T=()=>{const e=ee();return oe(e.board),e.board.forEach(o=>{o.on=!0}),e.board.sort((o,t)=>o.loc-t.loc),e},D=W({key:"dealOrNoDealAtom",default:JSON.parse(localStorage.getItem("deal-or-no-deal-atom")||"null")||T(),effects:[({onSet:e})=>{e(o=>{localStorage.setItem("deal-or-no-deal-atom",JSON.stringify(o))})}]}),ne=w({key:"dndReadOnlyState",get:({get:e})=>{const{board:o,turn:t}=e(D),{name:n}=e(j)[0];let s=0,r=0;o.forEach(a=>{a.on&&(s+=1,r+=a.val)});const m=Math.round(r/s*(t/10));return{numCases:s,offer:m,name:n}}}),te=w({key:"dealOrNoDealState",get:({get:e})=>{const o=e(D),{money:t,status:n}=e(j)[0];return{dnd:o,money:t,status:n}},set:({get:e,set:o},t)=>{if(!(t instanceof z)){const{dnd:n,money:s,status:r}=t;o(D,n);const m=e(j),a=[...m];a[0]={...m[0],money:s,status:r},o(j,a)}}}),le=k.memo(()=>{const[{dnd:e,money:o,status:t},n]=I(te),{numCases:s,offer:r,name:m}=J(ne),{board:a,dndOpen:x,isOver:f,turn:v,playerChoice:i,casesToOpen:y}=e,_=()=>n({dnd:T(),money:o,status:t}),R=c=>{const d=a[c];if(i){if(!f&&y>0&&d.loc!==i.loc&&d.on){const u=[...a],E={...u[c],on:!1};u[c]=E,n({dnd:{...e,board:u,dndOpen:y===1,casesToOpen:y-1},money:o,status:t})}}else n({dnd:{...e,playerChoice:d},money:o-100,status:t})},$=()=>{const c=Math.ceil(r/1e3);n({dnd:{...e,dndOpen:!1,isOver:c},money:o+c,status:c>100?"win":"lose"})},A=()=>{if(s<=2){const c=(i==null?void 0:i.val)||0,d=Math.ceil(c/1e3);n({dnd:{...e,dndOpen:!1,isOver:d},money:o+d,status:d>100?"win":"lose"})}else n({dnd:{...e,dndOpen:!1,turn:v+1,casesToOpen:v<C-1?C-v:1},money:o,status:t})},P=()=>{for(let c=0;c<a.length;c+=1){const d=a[c];if(d.on&&i&&d.loc!==i.loc){const u=Math.ceil(d.val/1e3);n({dnd:{...e,dndOpen:!1,isOver:u},money:o+u,status:u>100?"win":"lose"});return}}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex-container",children:[l.jsx(g,{variant:"h2",component:"h1",gutterBottom:!0,children:"Deal or No Deal"}),l.jsx(q,{})]}),l.jsx(Z,{casesToOpen:y,isOver:f,newGame:_,name:m,money:o,playerChoice:i,dndOpen:x}),l.jsx(X,{board:a,isOver:!!f,onClick:R,playerChoice:i}),l.jsx(Q,{board:a,deal:$,noDeal:A,numCases:s,offer:r,open:x,swap:P})]})});le.displayName="DealOrNoDeal";export{le as default};
//# sourceMappingURL=index-gtSrueyR.js.map
