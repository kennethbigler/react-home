{"version":3,"file":"PlayerMenu-pxESjlXP.js","sources":["../../src/jotai/player-atom.ts","../../src/components/common/header/ButtonPopover.tsx","../../src/components/common/header/PlayerMenu.tsx"],"sourcesContent":["import { atomWithStorage } from \"jotai/utils\";\nimport { DBCard } from \"./deck-state\";\n\n/**\n * weight?: number;\n * soft?: boolean;\n * cards: DBCard[];\n */\nexport interface DBHand {\n  weight?: number;\n  soft?: boolean;\n  cards: DBCard[];\n}\n\n/**\n * hands: DBHand[];\n * id: number;\n * isBot: boolean;\n * money: number;\n * status: string;\n * name: string;\n * bet: number;\n */\nexport interface DBPlayer {\n  hands: DBHand[];\n  id: number;\n  isBot: boolean;\n  money: number;\n  status: string;\n  name: string;\n  bet: number;\n}\n\nexport const newPlayer = (\n  id: number,\n  name = `Bot-${id}`,\n  isBot = true,\n): DBPlayer => ({\n  id,\n  name,\n  isBot,\n  status: \"\",\n  money: 100,\n  bet: 5,\n  hands: [],\n});\n\nconst initialState: DBPlayer[] = [\n  newPlayer(1, \"Ken\", false),\n  newPlayer(2),\n  newPlayer(3),\n  newPlayer(4),\n  newPlayer(5),\n  newPlayer(6),\n  newPlayer(0, \"Dealer\", true),\n];\n\nconst playerAtom = atomWithStorage(\"playerAtom\", initialState);\n\nexport default playerAtom;\n","import {\n  useState,\n  MouseEventHandler,\n  MouseEvent,\n  CSSProperties,\n  ReactElement,\n} from \"react\";\nimport { Button, Popover } from \"@mui/material\";\n\ninterface AnchorElHook {\n  anchorEl: null | HTMLElement;\n  setAnchor: MouseEventHandler;\n  clearAnchor: MouseEventHandler;\n}\n\nconst useAnchorEl = (): AnchorElHook => {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const setAnchor = (e: MouseEvent<HTMLButtonElement>): void => {\n    setAnchorEl(e.currentTarget);\n  };\n  const clearAnchor = (): void => {\n    setAnchorEl(null);\n  };\n  return { anchorEl, setAnchor, clearAnchor };\n};\n\ninterface ButtonPopoverProps {\n  children: ReactElement;\n  buttonText: string;\n}\n\nconst contentStyle: CSSProperties = { padding: 15 };\n\nconst ButtonPopover = ({ children, buttonText }: ButtonPopoverProps) => {\n  const { anchorEl, setAnchor, clearAnchor } = useAnchorEl();\n  const open = Boolean(anchorEl);\n\n  return (\n    <>\n      <Button\n        aria-haspopup=\"true\"\n        variant=\"contained\"\n        component=\"button\"\n        onClick={setAnchor}\n      >\n        {buttonText}\n      </Button>\n      <Popover\n        id=\"player-popover\"\n        open={open}\n        anchorEl={anchorEl}\n        onClose={clearAnchor}\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n        title=\"player-popover\"\n      >\n        <div style={contentStyle}>{children}</div>\n      </Popover>\n    </>\n  );\n};\n\nexport default ButtonPopover;\n","import { memo, Fragment, FocusEvent } from \"react\";\nimport { useAtom } from \"jotai\";\nimport SimplePopover from \"./ButtonPopover\";\nimport playerAtom from \"../../../jotai/player-atom\";\nimport { Switch, TextField, Grid, Typography } from \"@mui/material\";\n\nconst PlayerMenu = memo(() => {\n  const [players, setPlayers] = useAtom(playerAtom);\n\n  /** toggle between bot and human player */\n  const handleToggle = (id: number, isChecked: boolean): void => {\n    const pi = players.findIndex((p) => p.id === id);\n    if (pi !== -1) {\n      if (isChecked) {\n        const newPlayers = [...players];\n        for (let i = pi; i < players.length - 1; i += 1) {\n          const newPlayer = { ...newPlayers[i], isBot: isChecked };\n          newPlayers[i] = newPlayer;\n        }\n        setPlayers(newPlayers);\n      } else {\n        const newPlayers = [...players];\n        const newPlayer = { ...newPlayers[pi], isBot: isChecked };\n        newPlayers[pi] = newPlayer;\n        setPlayers(newPlayers);\n      }\n    }\n  };\n\n  /** update player name onBlur */\n  const handleBlur =\n    (id: number) =>\n    (e: FocusEvent<HTMLInputElement>): void => {\n      const pi = players.findIndex((p) => p.id === id);\n      if (pi !== -1) {\n        const newPlayers = [...players];\n        const newPlayer = { ...newPlayers[pi], name: e.target.value || \"\" };\n        newPlayers[pi] = newPlayer;\n        setPlayers(newPlayers);\n      }\n    };\n\n  return (\n    <SimplePopover buttonText=\"Players\">\n      <Grid container spacing={1} sx={{ maxWidth: 310 }}>\n        <Grid size={8}>\n          <Typography variant=\"h5\">Edit Player Names</Typography>\n        </Grid>\n        <Grid size={4}>\n          <Typography variant=\"h5\">Is Bot?</Typography>\n        </Grid>\n        {players.map((p, i) =>\n          p.id !== 0 ? (\n            <Fragment key={`${p.name},${i}`}>\n              <Grid size={9}>\n                <TextField\n                  defaultValue={p.name}\n                  onBlur={handleBlur(p.id)}\n                  placeholder=\"Enter Player Name\"\n                  title={`player ${i} name`}\n                />\n              </Grid>\n              <Grid size={3}>\n                {(i === 0 || !players[i].isBot || !players[i - 1].isBot) && (\n                  <Switch\n                    checked={players[i].isBot}\n                    value={players[i].isBot}\n                    onChange={(_e, isC): void => handleToggle(p.id, isC)}\n                    title={`isBot-switch-${i}`}\n                  />\n                )}\n              </Grid>\n            </Fragment>\n          ) : (\n            <Fragment key={`${p.name},${i}`}>\n              <Grid size={9}>\n                <Typography variant=\"h5\">{p.name}</Typography>\n              </Grid>\n              <Grid size={3}>\n                <Switch checked disabled />\n              </Grid>\n            </Fragment>\n          ),\n        )}\n      </Grid>\n    </SimplePopover>\n  );\n});\n\nPlayerMenu.displayName = \"PlayerMenu\";\n\nexport default PlayerMenu;\n"],"names":["newPlayer","id","name","isBot","initialState","playerAtom","atomWithStorage","useAnchorEl","anchorEl","setAnchorEl","useState","e","contentStyle","ButtonPopover","children","buttonText","setAnchor","clearAnchor","open","jsxs","Fragment","jsx","Button","Popover","PlayerMenu","memo","players","setPlayers","useAtom","handleToggle","isChecked","pi","p","newPlayers","i","handleBlur","SimplePopover","Grid","Typography","TextField","Switch","_e","isC"],"mappings":"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"}