import{O as K,P as mt,c as pt,e as xt,r as u,f as jt,j as t,s as gt,h as yt,i as ft,v as Ct,A as X,J as Y,Q as St,M as G,E as Z}from"./index-CSmRUDq4.js";import{d as M,m as kt}from"./DateHelper-hKADhxz5.js";import{D as _,a as tt,b as et,c as st}from"./DialogTitle-CianMlC6.js";import{F as U,I as L,S as O}from"./Select-CnUrpXHo.js";import{T as x,M as z,D as W}from"./Header-BZfF8GjO.js";import{T as w}from"./TextField-BDkruXwu.js";import{B as F}from"./Button-DSQDgla7.js";import{C as bt}from"./Chip-BT8VqFyN.js";import{H as nt,a as ot}from"./highcharts-react.min-Dp3C-ZvS.js";import{l as vt}from"./lightGreen-D8V8X1J-.js";import{G as v}from"./Grid-CnwPcS-4.js";import{C as Dt}from"./Card-CcOsc-S4.js";import{C as Tt,a as R}from"./CardActionArea-CnxzzInm.js";import{C as H}from"./CardContent-B8y3pWMY.js";import"./isMuiElement-CS0hqTur.js";import"./useSlotProps-qR8S9eC-.js";import"./useThemeProps-B9t7fQuE.js";const at=K("stockAtom",{}),rt=K("compCalcAtom",[]),At=mt(e=>{const s=e(rt),o=e(at),a={},r=s.map(({bonus:n,entryDate:c,grantDuration:l,grantQty:d,priceThen:j,salary:m,stockTick:g})=>{const f=o[g]||0;let h=0,y=0;const S=M(c);S.year+=l,a[g]||(a[g]=[]),d>0&&a[g].push({grantQty:d,grantDuration:l,exp:S}),a[g].forEach(p=>{M(c).diff(p.exp,"days")<0&&(h+=j*p.grantQty/p.grantDuration,y+=f*p.grantQty/p.grantDuration)});const D=m+n+h,T=m+n+y,A=j*d,k=f*d;return{stock:h,stockAdj:y,total:D,totalAdj:T,grantThen:A,grantNow:k}});return r.map(({totalAdj:n,...c},l)=>{const d=l===0?0:n-r[l-1].totalAdj;return{totalAdj:n,netDiff:d,...c}})});function wt(e){return pt("MuiDialogContentText",e)}xt("MuiDialogContentText",["root"]);const Ft=e=>{const{classes:s}=e,a=ft({root:["root"]},wt,s);return{...s,...a}},Mt=gt(x,{shouldForwardProp:e=>Ct(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Nt=u.forwardRef(function(s,o){const a=jt({props:s,name:"MuiDialogContentText"}),{children:r,className:i,...n}=a,c=Ft(n);return t.jsx(Mt,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:n,className:yt(c.root,i),...a,classes:c})}),N={variant:"standard",fullWidth:!0,margin:"dense"},Bt=new Date().getFullYear()-2e3,B=[];for(let e=0;e<=Bt;e+=1)B.push(2e3+e);B.reverse();const Pt=({open:e,compEntry:s,onClose:o,addCompEntry:a})=>{const[r,i]=u.useState(s&&(M(s.entryDate).month+1).toString()||"1"),[n,c]=u.useState(s&&M(s.entryDate).year.toString()||B[0].toString()),[l,d]=u.useState(s?.salary||0),[j,m]=u.useState(s?.bonus||0),[g,f]=u.useState(s?.stockTick||""),[h,y]=u.useState(s?.priceThen||0),[S,D]=u.useState(s?.grantDuration||4),[T,A]=u.useState(s?.grantQty||0),k=()=>{i("1"),c(B[0].toString()),d(0),m(0),f(""),y(0),D(4),A(0)},p=C=>$=>C(parseFloat($.target.value)),P=C=>f(C.target.value),dt=C=>i(C.target.value),ht=C=>c(C.target.value),ut=()=>{a({entryDate:`${n}-${r.length<2?"0":""}${r}`,salary:l,bonus:j,stockTick:g,priceThen:h,grantDuration:S,grantQty:T}),k()};return t.jsxs(_,{open:e,onClose:o,children:[t.jsxs(tt,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(et,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(U,{fullWidth:!0,children:[t.jsx(L,{id:"month-select",children:"Month"}),t.jsx(O,{labelId:"month-select",label:"Month",value:r,onChange:dt,children:kt.map((C,$)=>t.jsx(z,{value:$+1,children:C},$))})]}),t.jsxs(U,{fullWidth:!0,children:[t.jsx(L,{id:"year-select",children:"Year"}),t.jsx(O,{labelId:"year-select",label:"Year",value:n,onChange:ht,children:B.map(C=>t.jsx(z,{value:C,children:C},C))})]})]}),t.jsx(w,{label:"Salary",value:l,type:"number",onChange:p(d),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(w,{label:"Bonus",value:j,type:"number",onChange:p(m),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(Nt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:g,onChange:P,...N}),t.jsx(w,{label:"Grant Quantity",value:T,type:"number",onChange:p(A),...N}),t.jsx(w,{label:"Grant Duration",value:S,type:"number",onChange:p(D),...N}),t.jsx(w,{label:"Stock Price Then",value:h,type:"number",onChange:p(y),slotProps:{input:{startAdornment:"$"}},...N})]}),t.jsxs(st,{children:[t.jsx(F,{onClick:o,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:ut,children:s?"Update":"Add"})]})]})},I={variant:"standard",fullWidth:!0,margin:"dense"},lt=u.memo(({open:e,price:s,stock:o,onClose:a,addStockEntry:r,removeStockEntry:i})=>{const[n,c]=u.useState(s||0),[l,d]=u.useState(o||""),j=()=>{c(0),d("")},m=h=>d(h.target.value),g=h=>c(parseFloat(h.target.value)),f=()=>{r(l,n),j()};return t.jsxs(_,{open:e,onClose:a,children:[t.jsxs(tt,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(et,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:l,onChange:m,...I}),t.jsx(w,{label:"Price Now",value:n,type:"number",onChange:g,slotProps:{input:{startAdornment:"$"}},...I})]})}),t.jsxs(st,{children:[t.jsx(F,{onClick:i(l),color:"error",children:"Delete"}),t.jsx(F,{onClick:a,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:f,children:o?"Update":"Add"})]})]})});lt.displayName="StockDialog";const b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),$t=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,a)=>t.jsx(bt,{color:"primary",label:`${o}: ${b.format(e[o])}`,onClick:s(o),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${a}`))}),Wt=({compEntries:e,setCompEntries:s,openEntry:o,setOpenEntry:a,editEntryIdx:r,setEditEntryIdx:i})=>{const[n,c]=X(at),[l,d]=u.useState(!1),[j,m]=u.useState(""),g=()=>a(!1),f=()=>{i(-1),a(!0)},h=()=>d(!1),y=()=>{m(""),d(!0)},S=k=>()=>{m(k),d(!0)},D=k=>{const p=[...e];r===-1?p.push(k):p[r]=k,s(p),g()},T=(k,p)=>{const P={...n};P[k]=p,c(P),h()},A=k=>()=>{const p={...n};delete p[k],c(p),h()};return t.jsxs(t.Fragment,{children:[t.jsx(x,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx($t,{stockEntries:n,openStockModal:S}),t.jsxs("div",{children:[t.jsx(F,{onClick:y,children:"+ Stock"}),t.jsx(F,{onClick:f,children:"+ Entry"})]})]}),l&&t.jsx(lt,{open:l,price:j?n[j]:void 0,stock:j,onClose:h,addStockEntry:T,removeStockEntry:A}),o&&t.jsx(Pt,{open:o,compEntry:r!==-1?e[r]:void 0,onClose:g,addCompEntry:D})]})},ct=[vt[500],Y[500],St[500],Y[900]],Q=0,J=1,V=2,q=3,E=4,Et={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},Gt=({startIdx:e,compCalcEntries:s,compEntries:o,onClick:a})=>{const i=G(Z).mode==="light"?"black":"white",n=[[],[],[],[],[]];if(o.length>0){let l=M(o[e].entryDate).year,d=o[e].salary+o[e].bonus+(s[e].stockAdj||s[e].stock);o.forEach(({bonus:j,salary:m,entryDate:g},f)=>{const{stock:h,stockAdj:y}=s[f];n[Q].push(y||h),n[J].push(j),n[V].push(m),n[q].push(h+j+m);const S=M(g).year;if(S>=l){for(;l<S;l+=1)d*=Et[l];n[E].push(d)}else n[E].push(j+m+(y||h))})}const c={accessibility:{enabled:!0},colors:[...ct,i],chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:i}},xAxis:{visible:!1},yAxis:{labels:{style:{color:i}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"},plotOptions:{area:{stacking:"normal",lineColor:i,lineWidth:1,marker:{lineWidth:1,lineColor:i}},series:{cursor:"pointer",events:{click:a}}},series:[{type:"area",name:"Stock",data:[...n[Q]]},{type:"area",name:"Bonus",data:[...n[J]]},{type:"area",name:"Salary",data:[...n[V]]},{type:"spline",name:"Total",data:[...n[q]]},{type:"spline",name:"Inflation",data:[...n[E]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:ot,options:c})})},it=u.memo(({bonus:e,salary:s,stock:o})=>{const r=G(Z).mode==="light"?"black":"white",i={accessibility:{enabled:!0},colors:ct,chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:r}},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:o},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(nt,{highcharts:ot,options:i})})});it.displayName="BreakdownChart";const Yt=({compEntries:e,compCalcEntries:s})=>{const{stock:o,stockAdj:a}=s[s.length-1],{bonus:r,salary:i}=e[e.length-1],[n,c]=u.useState(0),[l,d]=u.useState(a||o),[j,m]=u.useState(r),[g,f]=u.useState(i),h=({point:{index:y}})=>{const{stock:S,stockAdj:D}=s[y],{bonus:T,salary:A}=e[y];c(y>=e.length-1?0:y),d(D||S),m(T),f(A)};return t.jsxs(v,{container:!0,children:[t.jsx(v,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Gt,{startIdx:n,compCalcEntries:s,compEntries:e,onClick:h})}),t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(it,{stock:l,bonus:j,salary:g})})]})},Ut=({compEntry:{entryDate:e,salary:s,bonus:o,stockTick:a,priceThen:r,grantDuration:i,grantQty:n},compCalcEntry:{stock:c,stockAdj:l,total:d,totalAdj:j,netDiff:m,grantThen:g,grantNow:f},compEntryCount:h,onClick:y})=>t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3,xxl:h>4?2:void 0,xxxl:h>6?1:void 0},children:t.jsx(Dt,{children:t.jsx(Tt,{onClick:y,children:t.jsxs(v,{container:!0,children:[t.jsxs(v,{size:a?6:12,children:[t.jsx(R,{title:"Salary"}),t.jsxs(H,{children:[t.jsxs(x,{children:["Date: ",M(e).format("MMMM Y")]}),t.jsxs(x,{children:["Salary: ",b.format(s)]}),t.jsxs(x,{children:["Bonus: ",b.format(o)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Stock: ",b.format(c)]}),t.jsxs(x,{children:["*Stock: ",b.format(l)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Total: ",b.format(d)]}),t.jsx(x,{sx:{display:"inline"},children:"*Total:"}),t.jsx(x,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(j)}),m!==0&&t.jsxs(t.Fragment,{children:[t.jsx(W,{"aria-hidden":!0}),t.jsx(x,{sx:{display:"inline"},children:"Net:"}),t.jsx(x,{color:m>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(m)})]})]})]}),a&&t.jsxs(v,{size:6,children:[t.jsx(R,{title:"Stock Grant"}),t.jsxs(H,{children:[t.jsx(x,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(x,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:a}),n>0&&t.jsxs(t.Fragment,{children:[t.jsxs(x,{children:["Price: ",b.format(r)]}),t.jsxs(x,{children:["Grant Qty: ",n]}),t.jsxs(x,{children:["Duration: ",i," years"]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Grant: ",b.format(g)]}),t.jsxs(x,{children:["*Grant: ",b.format(f)]})]})]})]})]})})})}),Lt=({compEntries:e,compCalcEntries:s,onClick:o})=>t.jsxs(v,{container:!0,spacing:1,children:[t.jsx(v,{size:12,children:t.jsx(x,{children:"*value computed from latest stock price above"})}),e.map((a,r)=>t.jsx(Ut,{compEntry:a,compCalcEntry:s[r],compEntryCount:e.length,onClick:o(r)},`comp-calc-entry-${r}`)).reverse()]}),oe=()=>{const[e,s]=X(rt),o=G(At),[a,r]=u.useState(!1),[i,n]=u.useState(-1),c=l=>()=>{n(l),r(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(Wt,{compEntries:e,setCompEntries:s,openEntry:a,setOpenEntry:r,editEntryIdx:i,setEditEntryIdx:n}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Yt,{compEntries:e,compCalcEntries:o}),t.jsx(Lt,{compEntries:e,compCalcEntries:o,onClick:c})]})]})};export{oe as default};
//# sourceMappingURL=index-DR1vAfrE.js.map
