import{M as W,O as _,W as q,A as F,j as e,r as v,P as z}from"./index-eG4mc5yy.js";import{F as P,I as $,S as D}from"./Select-BVaMFeaV.js";import{M as K,P as V,S as Z}from"./Header-coIKKBJv.js";import{B as w}from"./Button-CZHw6MZX.js";import{B as Q}from"./ButtonGroup-BxwIP5T5.js";import{D as X,a as ee,b as ae,c as se}from"./DialogTitle-DkjHuajt.js";import{b as Y,c as N,a as ne,T as te}from"./TableRow-CAdaDep8.js";import{T as oe}from"./TableContainer-q_mshjsl.js";import{T as re}from"./TableHead-asAwP27W.js";import{S as J}from"./Stack-qqnMivdO.js";import{C as B}from"./Chip-Cu82ya0m.js";import{F as ce}from"./FormControlLabel-90IQq0l7.js";import"./isMuiElement-C0zqtK3c.js";import"./useSlotProps-BF82it9S.js";import"./useId-C0qAzL6S.js";import"./useThemeProps-CaCqvqq2.js";const k=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]},{ladies:["Libby","Olivia","Robyn","Sapphia","Shae","Taofiqah","Tasha","Thea","Therese","Vic"],gents:["Cacherel","Charlie","Ismail","Jack","Jacob","Jordan","Josh","Joshy","Juan","Theo"]}],le=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9","UK 1"],I=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth"],H=7,U=(a=H)=>({matches:k[a].ladies.map(()=>-1),noMatch:k[a].ladies.map(()=>k[a].gents.map(()=>!1)),roundPairings:[]}),L=W({key:"areYouTheOneAtom",default:JSON.parse(localStorage.getItem("are-you-the-one-atom")||"null")||U(),effects:[({onSet:a})=>{a(s=>{localStorage.setItem("are-you-the-one-atom",JSON.stringify(s))})}]}),E=W({key:"aytoSeason",default:JSON.parse(localStorage.getItem("ayto-season-atom")||"null")||H,effects:[({onSet:a})=>{a(s=>{localStorage.setItem("ayto-season-atom",JSON.stringify(s))})}]}),ie=_({key:"aytoSeasonSelector",get:({get:a})=>a(E),set:({set:a},s)=>{s instanceof q||(a(E,s),a(L,U(s)))}}),he=_({key:"aytoPlayerSelector",get:({get:a})=>{const s=a(E);return[...I],{...k[s],options:I}}}),de=a=>isNaN(a)?-1:a,ue={display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em",alignItems:"center"},pe=({options:a,onSelect:s,ri:n,roundPairings:y,onBlackout:m,updateScore:f})=>{var o;const[d,t]=F(ie),A=de((o=y[n])==null?void 0:o.score),u=S=>t(Number(S.target.value)),l=S=>s(Number(S.target.value)),c=()=>m(y[n].pairs),h=()=>f(A+1),r=()=>f(A-1);return e.jsxs("div",{style:ue,children:[e.jsxs(P,{children:[e.jsx($,{id:"season-select",children:"Season"}),e.jsx(D,{labelId:"season-select",label:"Season",value:d,onChange:u,children:le.map((S,C)=>e.jsx(K,{value:C,children:S},S))})]}),e.jsxs(P,{children:[e.jsx($,{id:"matchup-select",children:"Matchup"}),e.jsx(D,{labelId:"matchup-select",label:"Matchup",value:n,onChange:l,children:a.map((S,C)=>e.jsx(K,{value:C,children:S},S))})]}),n<a.length-1&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outlined",color:"secondary",onClick:c,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",A]}),e.jsxs(Q,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(w,{"aria-label":"decrement score",onClick:r,children:"-"}),e.jsx(w,{"aria-label":"increment score",onClick:h,children:"+"})]})]})]})]})},me=({open:a,content:s,onMatch:n,onNoMatch:y,onCancel:m})=>e.jsxs(X,{onClose:m,open:a,children:[e.jsx(ee,{children:"TB Result"}),e.jsxs(ae,{children:["Are ",s," a perfect match?"]}),e.jsxs(se,{children:[e.jsx(w,{onClick:n,children:"Match"}),e.jsx(w,{onClick:y,color:"error",children:"No Match"}),e.jsx(w,{onClick:m,color:"warning",children:"Cancel"})]})]}),fe=(a,s,n,y,m)=>{let f="outlined",d="primary";return(a&&(s||n)||y||a&&m>0)&&(f="contained"),s?d="error":n&&(d="success"),{variant:f,color:d,histValue:m}},xe=({gents:a,histLi:s,lMatch:n,noMatchLi:y,isTB:m,lPair:f,ladyName:d,onClick:t})=>e.jsxs(Y,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(N,{component:"th",scope:"row",children:d}),a.map((A,u)=>{let l=0,c=0;if(s&&s[u])l=s[u].rounds.length,c=s[u].odds;else if(!y[u]){const o=y.reduce((S,C)=>C?S:S+1,0);c=Math.floor(1/o*100)}const{variant:h,color:r}=fe(m,y&&y[u],n===u,f===u,l);return e.jsx(N,{sx:{padding:0,textAlign:"center"},children:e.jsxs(w,{variant:h,color:r,onClick:t(u),children:[c,"%"]})},A)})]}),ye=({gents:a,hist:s,ladies:n,matches:y,noMatch:m,options:f,ri:d,roundPairings:t,updateMatch:A,updateNoMatch:u,updatePairs:l})=>{const c=f.length===d+1,[h,r]=v.useState(!1),[o,S]=v.useState([-1,-1]),C=(x,j)=>T=>()=>{var p;if(c){S([j,T]),r(!0);return}const b=(p=t[x])==null?void 0:p.pairs.indexOf(T);b!==-1&&l(x,b,-1),l(x,j,T)},g=()=>{r(!1)},i=()=>{const[x,j]=o;A(x,j),g()},M=()=>{const[x,j]=o;u(x,j),g()};return e.jsxs(ne,{children:[n.map((x,j)=>{var T;return e.jsx(xe,{gents:a,histLi:s[j],noMatchLi:m[j],isTB:c,ladyName:x,lMatch:y[j],lPair:(T=t[d])==null?void 0:T.pairs[j],onClick:C(d,j)},`ayto-table-row-${x}`)}),e.jsx(me,{open:h,content:`${n[o[0]]} & ${a[o[1]]}`,onCancel:g,onMatch:i,onNoMatch:M})]})},Se=({gents:a,...s})=>e.jsx(oe,{component:V,children:e.jsxs(te,{"aria-label":"are you the one data entry table",children:[e.jsx(re,{children:e.jsxs(Y,{children:[e.jsx(N,{children:"-"}),a.map(n=>e.jsx(N,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:n},n))]})}),e.jsx(ye,{gents:a,...s})]})}),je=({gents:a,ladies:s,matches:n,noMatch:y,pairs:m,score:f,ri:d,hist:t,tempScore:A,showAll:u})=>{const l=[];let c=0,h=0;return m.forEach((r,o)=>{if(o<0||r<0||o===void 0||r===void 0||!u&&(y[o][r]||n[o]===r))return;const S=t[o][r].rounds.length>1;let C=S?"primary":"default";y[o][r]?C="error":n[o]===r&&(C="success");const g=`${s[o]}-${a[r]}${S?` ${t[o][r].rounds.length}`:""} - ${t[o][r].odds}%`,i=e.jsx(B,{label:g,color:C},`match-r${d}-l${o}-g${r}`);switch(C){case"success":h+=1,l.unshift(i);return;case"error":c+=1,l.push(i);return;case"primary":l.splice(h,0,i),h+=1;return;default:l.splice(l.length-c,0,i)}}),l.every(r=>r===null)?null:e.jsxs(J,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",d+1]}),l,e.jsx(B,{label:u?f:f-A[d],color:"warning"})]})},ge=({cei:a,pairs:s,score:n,gents:y,ladies:m,hist:f})=>e.jsxs(J,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",a+1]}),s.map((d,t)=>e.jsx(B,{label:`${m[t]}-${y[d]} ${f[t][d].rounds.length} - ${f[t][d].odds}%`,color:"primary"},`calc-l${t}-g${d}`)),e.jsx(B,{label:`max ${n}`,color:"warning"})]}),Me=({gents:a,ladies:s,matches:n,noMatch:y,roundPairings:m,hist:f,tempScore:d,calculatedEquations:t})=>{const[A,u]=v.useState(!1),l=c=>{u(c.target.checked)};return e.jsxs("div",{children:[e.jsxs(J,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(ce,{control:e.jsx(Z,{checked:A,onChange:l}),label:"Show All Couples"})]}),e.jsx(J,{spacing:1,direction:"row-reverse",flexWrap:"wrap-reverse",justifyContent:"flex-end",children:m.map(({pairs:c,score:h},r)=>e.jsx(je,{gents:a,ladies:s,matches:n,noMatch:y,pairs:c,score:h,ri:r,hist:f,tempScore:d,showAll:A},`matched-stack-${r}`))}),t.length>0&&e.jsx("hr",{"aria-hidden":!0}),e.jsx(J,{spacing:1,direction:"row",flexWrap:"wrap",children:t.map(({pairs:c,score:h},r)=>e.jsx(ge,{cei:r,pairs:c,score:h,gents:a,ladies:s,hist:f},`calculated-stack-${r}`))})]})},Ce=(a,s,n,y)=>{const m=[],f=[],d=[];y.forEach(({pairs:u},l)=>{f[l]=0,d[l]=a,u.forEach((c,h)=>{(h<0||c<0||n[h][c])&&(d[l]-=1),s[h]===c&&(f[l]+=1,d[l]-=1),m[h]||(m[h]=[]),m[h][c]||(m[h][c]={odds:0,oddsWeight:0,rounds:[]}),m[h][c].rounds.push(l)})});const t={};y.forEach(({pairs:u,score:l},c)=>{u.forEach((h,r)=>{const o=m[r][h];if(n[r][h])return;if(s[r]===h||l===a){o.odds=100;return}const S=d[c]?(l-f[c])*100/d[c]:0;if(o.oddsWeight===0?o.odds=Math.floor(S):!S||!o.odds?o.odds=0:o.odds=Math.floor((o.odds*o.oddsWeight+S)/(o.oddsWeight+1)),o.oddsWeight+=1,o.rounds.length<2)return;const C=[o.rounds.reduce((g,i)=>g+i.toString(),"")];for(let g=c+1;g<o.rounds.length;g+=1)C.push(`${o.rounds[c]}${o.rounds[g]}`);C.forEach(g=>{t[g]||(t[g]={couples:[],score:l});let i=!0;t[g].couples.forEach(([M,x])=>{i=i&&M!==r&&x!==h}),i&&t[g].couples.push([r,h]),t[g].score=Math.min(l-f[c],t[g].score)})})});const A=[];return Object.keys(t).forEach(u=>{if(t[u].couples.length>1&&t[u].couples.length>t[u].score){const l=[];t[u].couples.forEach(([h,r])=>{l[h]=r});let c=!1;A.forEach(({pairs:h,score:r},o)=>{let S=!0,C=!0;for(let g=0;g<h.length;g+=1)l[g]!==h[g]&&(l[g]?(S=!1,C=!1):S=!1);c=c||S||C&&t[u].score>=r,S&&(A[o].score=Math.min(r,t[u].score))}),c||A.push({pairs:l,score:t[u].score})}}),{hist:m,tempScore:f,calculatedEquations:A}},Ie=()=>{const[{matches:a,noMatch:s,roundPairings:n},y]=F(L),{ladies:m,gents:f,options:d}=z(he),[t,A]=v.useState(0),{hist:u,tempScore:l,calculatedEquations:c}=Ce(m.length,a,s,n),h=i=>{A(i)},r=i=>{const M=n[t]?{...n[t]}:{pairs:[],score:0};M.score=i;const x=[...n];x[t]=M,y({matches:a,noMatch:s,roundPairings:x})},o=(i,M)=>{const x=s.map(j=>[...j]);x[i]||(x[i]=[]),x[i][M]=!x[i][M],y({matches:a,noMatch:x,roundPairings:n})},S=i=>{const M=s.map(b=>[...b]);let x=0;i.forEach((b,p)=>{a[p]===b?x+=1:s[p][b]||(M[p]||(M[p]=[]),M[p][b]=!0)});const j={...n[t],score:x},T=[...n];T[t]=j,y({matches:a,noMatch:M,roundPairings:T})},C=(i,M,x)=>{const j=n[i]?{...n[i],pairs:[...n[i].pairs]}:{pairs:[],score:0};j.pairs[M]=x;const T=[...n];T[t]=j,y({matches:a,noMatch:s,roundPairings:T})},g=(i,M)=>{const x=[...a],j=s.map(p=>[...p]);j[i]||(j[i]=[]),x[i]=M;for(let p=0;p<f.length;p+=1)j[i][p]=p!==M;for(let p=0;p<m.length;p+=1)j[p]||(j[p]=[]),j[p][M]=p!==i;const T=x.reduce((p,R)=>R>=0?p+1:p,0),b=[...n];for(let p=0;p<d.length-1;p+=1){const{pairs:R,score:G}=n[p]||{pairs:[],score:T};if(!n[p]||R[i]<0||R[i]===void 0){const O={pairs:[...R],score:Math.max(G,T)};O.pairs[i]=M,b[p]=O}}y({matches:x,noMatch:j,roundPairings:b})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(pe,{onSelect:h,options:d,ri:t,roundPairings:n,onBlackout:S,updateScore:r}),e.jsx("br",{}),e.jsx(Se,{gents:f,hist:u,ladies:m,matches:a,noMatch:s,options:d,ri:t,roundPairings:n,updateMatch:g,updateNoMatch:o,updatePairs:C}),e.jsx(Me,{calculatedEquations:c,gents:f,hist:u,ladies:m,matches:a,noMatch:s,roundPairings:n,tempScore:l})]})};export{Ie as default};
//# sourceMappingURL=index-C7I3dru_.js.map
