import{g as xt,b as jt,r as m,c as gt,j as t,s as yt,e as Ct,h as ft,y as St,O as Z,P as kt,A as _,J as O,Q as bt,M as Y,E as tt}from"./index-BFZliOI1.js";import{d as M,m as vt}from"./DateHelper-hKADhxz5.js";import{D as et,a as st,b as nt,c as ot}from"./DialogTitle-DvFQPVYa.js";import{F as U,I as L,S as z}from"./Select-CBeyoQVt.js";import{T as x,M as R,D as W}from"./Header-B5PuGYmb.js";import{T as w}from"./TextField-BunnVexZ.js";import{B as F}from"./Button-D-W1Mo_F.js";import{C as Dt}from"./Chip-CkCsRFuZ.js";import{H as at,a as rt}from"./highcharts-react.min-DeXjj5so.js";import{l as At}from"./lightGreen-D8V8X1J-.js";import{G as v}from"./Grid-CtTWcj-a.js";import{C as Tt}from"./Card-CPCZZxmo.js";import{C as wt,a as H}from"./CardHeader-HxiokOVU.js";import{C as I}from"./CardContent-DvDZ2EhG.js";import"./isMuiElement-Bi9BTn_8.js";import"./useSlotProps-ChPFFpkZ.js";import"./useThemeProps-DyDflj3s.js";function Ft(e){return xt("MuiDialogContentText",e)}jt("MuiDialogContentText",["root"]);const Mt=e=>{const{classes:s}=e,a=ft({root:["root"]},Ft,s);return{...s,...a}},Nt=yt(x,{shouldForwardProp:e=>St(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Bt=m.forwardRef(function(s,o){const a=gt({props:s,name:"MuiDialogContentText"}),{children:r,className:c,...n}=a,i=Mt(n);return t.jsx(Nt,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:n,className:Ct(i.root,c),...a,classes:i})}),lt=Z("stockAtom",{}),it=Z("compCalcAtom",[]),Pt=kt(e=>{const s=e(it),o=e(lt),a={},r=s.map(({bonus:n,entryDate:i,grantDuration:l,grantQty:d,priceThen:j,salary:u,stockTick:g})=>{const C=o[g]||0;let h=0,y=0;const S=M(i);S.year+=l,a[g]||(a[g]=[]),d>0&&a[g].push({grantQty:d,grantDuration:l,exp:S}),a[g].forEach(p=>{M(i).diff(p.exp,"days")<0&&(h+=j*p.grantQty/p.grantDuration,y+=C*p.grantQty/p.grantDuration)});const D=u+n+h,A=u+n+y,T=j*d,k=C*d;return{stock:h,stockAdj:y,total:D,totalAdj:A,grantThen:T,grantNow:k}});return r.map(({totalAdj:n,...i},l)=>{const d=l===0?0:n-r[l-1].totalAdj;return{totalAdj:n,netDiff:d,...i}})}),N={variant:"standard",fullWidth:!0,margin:"dense"},$t=new Date().getFullYear()-2e3,B=[];for(let e=0;e<=$t;e+=1)B.push(2e3+e);B.reverse();const Wt=({open:e,compEntry:s,onClose:o,addCompEntry:a})=>{const[r,c]=m.useState(s&&(M(s.entryDate).month+1).toString()||"1"),[n,i]=m.useState(s&&M(s.entryDate).year.toString()||B[0].toString()),[l,d]=m.useState(s?.salary||0),[j,u]=m.useState(s?.bonus||0),[g,C]=m.useState(s?.stockTick||""),[h,y]=m.useState(s?.priceThen||0),[S,D]=m.useState(s?.grantDuration||4),[A,T]=m.useState(s?.grantQty||0),k=()=>{c("1"),i(B[0].toString()),d(0),u(0),C(""),y(0),D(4),T(0)},p=f=>$=>f(parseFloat($.target.value)),P=f=>C(f.target.value),mt=f=>c(f.target.value),ut=f=>i(f.target.value),pt=()=>{a({entryDate:`${n}-${r.length<2?"0":""}${r}`,salary:l,bonus:j,stockTick:g,priceThen:h,grantDuration:S,grantQty:A}),k()};return t.jsxs(et,{open:e,onClose:o,children:[t.jsxs(st,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(nt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(U,{fullWidth:!0,children:[t.jsx(L,{id:"month-select",children:"Month"}),t.jsx(z,{labelId:"month-select",label:"Month",value:r,onChange:mt,children:vt.map((f,$)=>t.jsx(R,{value:$+1,children:f},$))})]}),t.jsxs(U,{fullWidth:!0,children:[t.jsx(L,{id:"year-select",children:"Year"}),t.jsx(z,{labelId:"year-select",label:"Year",value:n,onChange:ut,children:B.map(f=>t.jsx(R,{value:f,children:f},f))})]})]}),t.jsx(w,{label:"Salary",value:l,type:"number",onChange:p(d),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(w,{label:"Bonus",value:j,type:"number",onChange:p(u),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(Bt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:g,onChange:P,...N}),t.jsx(w,{label:"Grant Quantity",value:A,type:"number",onChange:p(T),...N}),t.jsx(w,{label:"Grant Duration",value:S,type:"number",onChange:p(D),...N}),t.jsx(w,{label:"Stock Price Then",value:h,type:"number",onChange:p(y),slotProps:{input:{startAdornment:"$"}},...N})]}),t.jsxs(ot,{children:[t.jsx(F,{onClick:o,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:pt,children:s?"Update":"Add"})]})]})},Q={variant:"standard",fullWidth:!0,margin:"dense"},ct=m.memo(({open:e,price:s,stock:o,onClose:a,addStockEntry:r,removeStockEntry:c})=>{const[n,i]=m.useState(s||0),[l,d]=m.useState(o||""),j=()=>{i(0),d("")},u=h=>d(h.target.value),g=h=>i(parseFloat(h.target.value)),C=()=>{r(l,n),j()};return t.jsxs(et,{open:e,onClose:a,children:[t.jsxs(st,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(nt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:l,onChange:u,...Q}),t.jsx(w,{label:"Price Now",value:n,type:"number",onChange:g,slotProps:{input:{startAdornment:"$"}},...Q})]})}),t.jsxs(ot,{children:[t.jsx(F,{onClick:c(l),color:"error",children:"Delete"}),t.jsx(F,{onClick:a,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:C,children:o?"Update":"Add"})]})]})});ct.displayName="StockDialog";const b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Et=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,a)=>t.jsx(Dt,{color:"primary",label:`${o}: ${b.format(e[o])}`,onClick:s(o),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${a}`))}),Gt=({compEntries:e,setCompEntries:s,openEntry:o,setOpenEntry:a,editEntryIdx:r,setEditEntryIdx:c})=>{const[n,i]=_(lt),[l,d]=m.useState(!1),[j,u]=m.useState(""),g=()=>a(!1),C=()=>{c(-1),a(!0)},h=()=>d(!1),y=()=>{u(""),d(!0)},S=k=>()=>{u(k),d(!0)},D=k=>{const p=[...e];r===-1?p.push(k):p[r]=k,s(p),g()},A=(k,p)=>{const P={...n};P[k]=p,i(P),h()},T=k=>()=>{const p={...n};delete p[k],i(p),h()};return t.jsxs(t.Fragment,{children:[t.jsx(x,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Et,{stockEntries:n,openStockModal:S}),t.jsxs("div",{children:[t.jsx(F,{onClick:y,children:"+ Stock"}),t.jsx(F,{onClick:C,children:"+ Entry"})]})]}),l&&t.jsx(ct,{open:l,price:j?n[j]:void 0,stock:j,onClose:h,addStockEntry:A,removeStockEntry:T}),o&&t.jsx(Wt,{open:o,compEntry:r!==-1?e[r]:void 0,onClose:g,addCompEntry:D})]})},dt=[At[500],O[500],bt[500],O[900]],J=0,V=1,q=2,K=3,E=4,Yt={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},G={accessibility:{enabled:!0},chart:{type:"area",backgroundColor:"transparent"},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp"},xAxis:{visible:!1},yAxis:{title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"}},Ot=({startIdx:e,compCalcEntries:s,compEntries:o,onClick:a})=>{const c=Y(tt).mode==="light"?"black":"white",n=[[],[],[],[],[]];if(o.length>0){let l=M(o[e].entryDate).year,d=o[e].salary+o[e].bonus+(s[e].stockAdj||s[e].stock);o.forEach(({bonus:j,salary:u,entryDate:g},C)=>{const{stock:h,stockAdj:y}=s[C];n[J].push(y||h),n[V].push(j),n[q].push(u),n[K].push(h+j+u);const S=M(g).year;if(S>=l){for(;l<S;l+=1)d*=Yt[l];n[E].push(d)}else n[E].push(j+u+(y||h))})}const i={...G,colors:[...dt,c],title:{...G.title,style:{color:c}},yAxis:{...G.yAxis,labels:{style:{color:c}}},plotOptions:{area:{stacking:"normal",lineColor:c,lineWidth:1,marker:{lineWidth:1,lineColor:c}},series:{cursor:"pointer",events:{click:a}}},series:[{type:"area",name:"Stock",data:[...n[J]]},{type:"area",name:"Bonus",data:[...n[V]]},{type:"area",name:"Salary",data:[...n[q]]},{type:"spline",name:"Total",data:[...n[K]]},{type:"spline",name:"Inflation",data:[...n[E]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(at,{highcharts:rt,options:i})})},X={accessibility:{enabled:!0},colors:dt,chart:{type:"pie",backgroundColor:"transparent"},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown"},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}}},ht=m.memo(({bonus:e,salary:s,stock:o})=>{const r=Y(tt).mode==="light"?"black":"white",c={...X,title:{...X.title,style:{color:r}},series:[{data:[{name:"Stock",y:o},{name:"Bonus",y:e},{name:"Salary",y:s}],type:"pie"}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(at,{highcharts:rt,options:c})})});ht.displayName="BreakdownChart";const Ut=({compEntries:e,compCalcEntries:s})=>{const{stock:o,stockAdj:a}=s[s.length-1],{bonus:r,salary:c}=e[e.length-1],[n,i]=m.useState(0),[l,d]=m.useState(a||o),[j,u]=m.useState(r),[g,C]=m.useState(c),h=({point:{index:y}})=>{const{stock:S,stockAdj:D}=s[y],{bonus:A,salary:T}=e[y];i(y>=e.length-1?0:y),d(D||S),u(A),C(T)};return t.jsxs(v,{container:!0,children:[t.jsx(v,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Ot,{startIdx:n,compCalcEntries:s,compEntries:e,onClick:h})}),t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(ht,{stock:l,bonus:j,salary:g})})]})},Lt=({compEntry:{entryDate:e,salary:s,bonus:o,stockTick:a,priceThen:r,grantDuration:c,grantQty:n},compCalcEntry:{stock:i,stockAdj:l,total:d,totalAdj:j,netDiff:u,grantThen:g,grantNow:C},compEntryCount:h,onClick:y})=>t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3,xxl:h>4?2:void 0,xxxl:h>6?1:void 0},children:t.jsx(Tt,{children:t.jsx(wt,{onClick:y,children:t.jsxs(v,{container:!0,children:[t.jsxs(v,{size:a?6:12,children:[t.jsx(H,{title:"Salary"}),t.jsxs(I,{children:[t.jsxs(x,{children:["Date: ",M(e).format("MMMM Y")]}),t.jsxs(x,{children:["Salary: ",b.format(s)]}),t.jsxs(x,{children:["Bonus: ",b.format(o)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Stock: ",b.format(i)]}),t.jsxs(x,{children:["*Stock: ",b.format(l)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Total: ",b.format(d)]}),t.jsx(x,{sx:{display:"inline"},children:"*Total:"}),t.jsx(x,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(j)}),u!==0&&t.jsxs(t.Fragment,{children:[t.jsx(W,{"aria-hidden":!0}),t.jsx(x,{sx:{display:"inline"},children:"Net:"}),t.jsx(x,{color:u>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(u)})]})]})]}),a&&t.jsxs(v,{size:6,children:[t.jsx(H,{title:"Stock Grant"}),t.jsxs(I,{children:[t.jsx(x,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(x,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:a}),n>0&&t.jsxs(t.Fragment,{children:[t.jsxs(x,{children:["Price: ",b.format(r)]}),t.jsxs(x,{children:["Grant Qty: ",n]}),t.jsxs(x,{children:["Duration: ",c," years"]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(x,{children:["Grant: ",b.format(g)]}),t.jsxs(x,{children:["*Grant: ",b.format(C)]})]})]})]})]})})})}),zt=({compEntries:e,compCalcEntries:s,onClick:o})=>t.jsxs(v,{container:!0,spacing:1,children:[t.jsx(v,{size:12,children:t.jsx(x,{children:"*value computed from latest stock price above"})}),e.map((a,r)=>t.jsx(Lt,{compEntry:a,compCalcEntry:s[r],compEntryCount:e.length,onClick:o(r)},`comp-calc-entry-${r}`)).reverse()]}),re=()=>{const[e,s]=_(it),o=Y(Pt),[a,r]=m.useState(!1),[c,n]=m.useState(-1),i=l=>()=>{n(l),r(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(Gt,{compEntries:e,setCompEntries:s,openEntry:a,setOpenEntry:r,editEntryIdx:c,setEditEntryIdx:n}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Ut,{compEntries:e,compCalcEntries:o}),t.jsx(zt,{compEntries:e,compCalcEntries:o,onClick:i})]})]})};export{re as default};
//# sourceMappingURL=index-BlFdjlOA.js.map
