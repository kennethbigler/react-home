import{g as lt,b as ct,s as it,t as dt,r as u,e as ht,j as t,c as mt,f as ut,M as V,O as pt,A as F,B as X,P as xt}from"./index-BXxIC_2G.js";import{d as I,m as jt}from"./DateHelper-b37KTdR-.js";import{G as E}from"./Grid2-cymhEfYk.js";import{C as gt}from"./Card-CuW81Br7.js";import{C as ft,a as U}from"./CardActionArea-HPsh-Ajj.js";import{C as Y}from"./CardContent-w7Tn1DlI.js";import{T as m,D as B,M as _}from"./Header-BM76AREH.js";import{D as Z,a as K,b as tt,c as et}from"./DialogTitle-CRVAiSBd.js";import{F as z,I as W,S as H}from"./Select-DAbGp_xE.js";import{T as w}from"./TextField-CIqArbcM.js";import{B as N}from"./Button-OSONjkod.js";import{C as St}from"./Chip-D0u5in61.js";import{h as st,H as G,a as ot}from"./highcharts-react.min-DwlZdzZ3.js";import"./useThemeProps-lkfevBbx.js";import"./isMuiElement-Bds7UeVw.js";import"./useId-BrX4DF-7.js";import"./useSlotProps-BmFXpiR1.js";function Ct(e){return ct("MuiDialogContentText",e)}lt("MuiDialogContentText",["root"]);const yt=e=>{const{classes:s}=e,n=ut({root:["root"]},Ct,s);return{...s,...n}},kt=it(m,{shouldForwardProp:e=>dt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),bt=u.forwardRef(function(s,o){const n=ht({props:s,name:"MuiDialogContentText"}),{children:a,className:d,...r}=n,c=yt(r);return t.jsx(kt,{component:"p",variant:"body1",color:"textSecondary",ref:o,ownerState:r,className:mt(c.root,d),...n,classes:c})}),vt={},nt=V({key:"stockAtom",default:JSON.parse(localStorage.getItem("stock-atom")||"null")||vt,effects:[({onSet:e})=>{e(s=>{localStorage.setItem("stock-atom",JSON.stringify(s))})}]}),at=V({key:"compCalcAtom",default:JSON.parse(localStorage.getItem("comp-calc-atom")||"null")||[],effects:[({onSet:e})=>{e(s=>{localStorage.setItem("comp-calc-atom",JSON.stringify(s))})}]}),Dt=pt({key:"compCalcReadOnlyState",get:({get:e})=>{const s=e(at),o=e(nt),n={},a=s.map(({bonus:r,entryDate:c,grantDuration:i,grantQty:l,priceThen:f,salary:x,stockTick:h})=>{const S=o[h]||0,C=f*l/i;let b=0,y=0;const v=S*l/i,D=I(c);D.year+=i,n[h]||(n[h]=[]),C>0&&n[h].push({cs:C,csa:v,exp:D}),n[h].forEach(g=>{I(c).diff(g.exp,"days")<0&&(b+=g.cs,y+=g.csa)});const T=x+r+b,M=x+r+y,A=f*l,j=S*l;return{stock:b,stockAdj:y,total:T,totalAdj:M,grantThen:A,grantNow:j}});return a.map(({totalAdj:r,...c},i)=>{const l=i===0?0:r-a[i-1].totalAdj;return{totalAdj:r,netDiff:l,...c}})}}),k=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Tt=({compEntries:e,compCalcEntries:s,stockEntries:o,onClick:n})=>t.jsx(E,{container:!0,spacing:1,children:e.map((a,d)=>{const{entryDate:r,salary:c,bonus:i,stockTick:l,priceThen:f,grantDuration:x,grantQty:h}=a,{stock:S,stockAdj:C,total:b,totalAdj:y,netDiff:v,grantThen:D,grantNow:T}=s[d];return t.jsx(E,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(gt,{children:t.jsx(ft,{onClick:n(d),children:t.jsxs(E,{container:!0,children:[t.jsxs(E,{size:h>0?6:12,children:[t.jsx(U,{title:"Salary"}),t.jsxs(Y,{children:[t.jsxs(m,{children:["Date - ",I(r).format("MMMM Y")]}),t.jsxs(m,{children:["Salary: ",k.format(c)]}),t.jsxs(m,{children:["Bonus: ",k.format(i)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Stock (Adj): ",k.format(C)]}),t.jsxs(m,{children:["*Stock: ",k.format(S)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Total: ",k.format(b)]}),t.jsxs(m,{children:["*Total (Adj): ",k.format(y)]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Net: ",k.format(v)]})]})]}),h>0?t.jsxs(E,{size:6,children:[t.jsx(U,{title:"Stock"}),t.jsxs(Y,{children:[t.jsxs(m,{children:["Stock Ticker: ",l]}),t.jsxs(m,{children:["Price Then: ",k.format(f)]}),t.jsxs(m,{children:["*Price Now:"," ",o[l]?k.format(o[l]):"Enter Stock"]}),t.jsxs(m,{children:["Grant Qty: ",h," stocks"]}),t.jsxs(m,{children:["Duration: ",x," years"]}),t.jsx(B,{"aria-hidden":!0}),t.jsxs(m,{children:["*Grant Then: ",k.format(D)]}),t.jsxs(m,{children:["*Grant Now: ",k.format(T)]})]})]}):null]})})})},`comp-calc-entry-${d}`)}).reverse()}),O={variant:"standard",fullWidth:!0,margin:"dense"},At=new Date().getFullYear()-2e3,R=[];for(let e=0;e<=At;e+=1)R.push(2e3+e);R.reverse();const wt=({open:e,compEntry:s,onClose:o,addCompEntry:n})=>{const[a,d]=u.useState("1"),[r,c]=u.useState(R[0].toString()),[i,l]=u.useState(0),[f,x]=u.useState(0),[h,S]=u.useState(""),[C,b]=u.useState(0),[y,v]=u.useState(4),[D,T]=u.useState(0),M=()=>{d("1"),c(R[0].toString()),l(0),x(0),S(""),b(0),v(4),T(0)};u.useEffect(()=>{if(s){const{month:p,year:P}=I(s.entryDate);d((p+1).toString()),c(P.toString()),l(s.salary),x(s.bonus),S(s.stockTick),b(s.priceThen),v(s.grantDuration),T(s.grantQty)}else M()},[s,s==null?void 0:s.salary]);const A=p=>P=>p(parseFloat(P.target.value)),j=p=>S(p.target.value),g=p=>d(p.target.value),$=p=>c(p.target.value),rt=()=>{n({entryDate:`${r}-${a.length<2?"0":""}${a}`,salary:i,bonus:f,stockTick:h,priceThen:C,grantDuration:y,grantQty:D}),M()};return t.jsxs(Z,{open:e,onClose:o,children:[t.jsxs(K,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(tt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(z,{fullWidth:!0,children:[t.jsx(W,{id:"month-select",children:"Month"}),t.jsx(H,{labelId:"month-select",label:"Month",value:a,onChange:g,children:jt.map((p,P)=>t.jsx(_,{value:P+1,children:p},P))})]}),t.jsxs(z,{fullWidth:!0,children:[t.jsx(W,{id:"year-select",children:"Year"}),t.jsx(H,{labelId:"year-select",label:"Year",value:r,onChange:$,children:R.map(p=>t.jsx(_,{value:p,children:p},p))})]})]}),t.jsx(w,{label:"Salary",value:i,type:"number",onChange:A(l),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(w,{label:"Bonus",value:f,type:"number",onChange:A(x),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(bt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:h,onChange:j,...O}),t.jsx(w,{label:"Grant Quantity",value:D,type:"number",onChange:A(T),...O}),t.jsx(w,{label:"Grant Duration",value:y,type:"number",onChange:A(v),...O}),t.jsx(w,{label:"Stock Price Then",value:C,type:"number",onChange:A(b),slotProps:{input:{startAdornment:"$"}},...O})]}),t.jsxs(et,{children:[t.jsx(N,{onClick:o,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:rt,children:s?"Update":"Add"})]})]})},J={variant:"standard",fullWidth:!0,margin:"dense"},Et=({open:e,price:s,stock:o,onClose:n,addStockEntry:a,removeStockEntry:d})=>{const[r,c]=u.useState(0),[i,l]=u.useState(""),f=()=>{c(0),l("")};u.useEffect(()=>{o&&s!==void 0?(c(s),l(o)):f()},[s,o]);const x=C=>l(C.target.value),h=C=>c(parseFloat(C.target.value)),S=()=>{a(i,r),f()};return t.jsxs(Z,{open:e,onClose:n,children:[t.jsxs(K,{children:[o?"Edit":"New"," Stock Entry"]}),t.jsx(tt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:i,onChange:x,...J}),t.jsx(w,{label:"Price Now",value:r,type:"number",onChange:h,slotProps:{input:{startAdornment:"$"}},...J})]})}),t.jsxs(et,{children:[t.jsx(N,{onClick:d(i),color:"error",children:"Delete"}),t.jsx(N,{onClick:n,children:"Cancel"}),t.jsx(N,{type:"submit",onClick:S,children:o?"Update":"Add"})]})]})},Nt=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((o,n)=>t.jsx(St,{color:"primary",label:`${o}: ${k.format(e[o])}`,onClick:s(o),sx:{margin:.5}},`stock-entry-${n}`))});st(G);const L=0,Q=1,q=2,Mt=({compCalcEntries:e,compEntries:s})=>{const[o]=F(X),n=o.mode==="light"?"black":"white",a=[[],[],[]];s.forEach((r,c)=>{a[L].push(e[c].stockAdj||e[c].stock),a[Q].push(r.bonus),a[q].push(r.salary)});const d={chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:n}},xAxis:{visible:!1},yAxis:{labels:{style:{color:n}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />"},plotOptions:{area:{stacking:"normal",lineColor:n,lineWidth:1,marker:{lineWidth:1,lineColor:n}}},series:[{name:"Stock",data:[...a[L]]},{name:"Bonus",data:[...a[Q]]},{name:"Salary",data:[...a[q]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(ot,{highcharts:G,options:d})})};st(G);const Pt=({bonus:e,salary:s,stock:o})=>{const[n]=F(X),a=n.mode==="light"?"black":"white",d={chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:a}},tooltip:{pointFormat:"<b>${point.y}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:o},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(ot,{highcharts:G,options:d})})},Vt=()=>{const[e,s]=F(at),o=xt(Dt),[n,a]=F(nt),[d,r]=u.useState(!1),[c,i]=u.useState(!1),[l,f]=u.useState(-1),[x,h]=u.useState(""),S=()=>r(!1),C=()=>{f(-1),r(!0)},b=j=>()=>{f(j),r(!0)},y=()=>i(!1),v=()=>{h(""),i(!0)},D=j=>()=>{h(j),i(!0)},T=j=>{const g=[...e];l===-1?g.push(j):g[l]=j,s(g),S()},M=(j,g)=>{const $={...n};$[j]=g,a($),y()},A=j=>()=>{const g={...n};delete g[j],a(g),y()};return t.jsxs(t.Fragment,{children:[t.jsx(m,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Nt,{stockEntries:n,openStockModal:D}),t.jsxs("div",{children:[t.jsx(N,{onClick:v,children:"+ Stock"}),t.jsx(N,{onClick:C,children:"+ Entry"})]})]}),e.length>0?t.jsxs(E,{container:!0,children:[t.jsx(E,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Mt,{compCalcEntries:o,compEntries:e})}),t.jsx(E,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(Pt,{salary:e[e.length-1].salary,bonus:e[e.length-1].bonus,stock:o[o.length-1].stockAdj||o[o.length-1].stock})})]}):null,t.jsx(Tt,{compEntries:e,compCalcEntries:o,stockEntries:n,onClick:b}),t.jsx(Et,{open:c,price:x?n[x]:void 0,stock:x,onClose:y,addStockEntry:M,removeStockEntry:A}),t.jsx(wt,{open:d,compEntry:l!==-1?e[l]:void 0,onClose:S,addCompEntry:T})]})};export{Vt as default};
//# sourceMappingURL=index-0Ue5vTlw.js.map
