import{g as ut,b as mt,s as pt,t as xt,r as c,e as gt,j as t,c as ft,f as jt,O as Z,P as yt,M as G,B as tt,A as Y}from"./index-DhVGG_NW.js";import{d as P,m as St}from"./DateHelper-b37KTdR-.js";import{G as w}from"./Grid2-YuZ42mY6.js";import{T as m,D as R,M as U}from"./Header-_9woOApa.js";import{C as kt}from"./Card-D4Y94udQ.js";import{C as Ct,a as L}from"./CardActionArea-D9AL6yVE.js";import{C as _}from"./CardContent-BJFRgfUI.js";import{D as et,a as st,b as nt,c as ot}from"./DialogTitle-C90siRV0.js";import{F as z,I as H,S as Q}from"./Select-CB1fBJ4I.js";import{T as N}from"./TextField-B9k9V_fq.js";import{B as M}from"./Button-Dj3HxRuo.js";import{C as bt}from"./Chip-Ra7_jbcB.js";import{h as at,H as W,a as rt}from"./highcharts-react.min-BXicxcDm.js";import"./useThemeProps-CYeelXC8.js";import"./isMuiElement-Ck9jPB8g.js";import"./useId-CPd3QfSM.js";import"./useSlotProps-kF76sogf.js";function vt(e){return mt("MuiDialogContentText",e)}ut("MuiDialogContentText",["root"]);const Dt=e=>{const{classes:s}=e,a=jt({root:["root"]},vt,s);return{...s,...a}},Tt=pt(m,{shouldForwardProp:e=>xt(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),At=c.forwardRef(function(s,n){const a=gt({props:s,name:"MuiDialogContentText"}),{children:d,className:h,...o}=a,i=Dt(o);return t.jsx(Tt,{component:"p",variant:"body1",color:"textSecondary",ref:n,ownerState:o,className:ft(i.root,h),...a,classes:i})}),wt={},lt=Z({key:"stockAtom",default:JSON.parse(localStorage.getItem("stock-atom")||"null")||wt,effects:[({onSet:e})=>{e(s=>{localStorage.setItem("stock-atom",JSON.stringify(s))})}]}),it=Z({key:"compCalcAtom",default:JSON.parse(localStorage.getItem("comp-calc-atom")||"null")||[],effects:[({onSet:e})=>{e(s=>{localStorage.setItem("comp-calc-atom",JSON.stringify(s))})}]}),Nt=yt({key:"compCalcReadOnlyState",get:({get:e})=>{const s=e(it),n=e(lt),a={},d=s.map(({bonus:o,entryDate:i,grantDuration:r,grantQty:l,priceThen:g,salary:u,stockTick:p})=>{const f=n[p]||0;let x=0,y=0;const j=P(i);j.year+=r,a[p]||(a[p]=[]),l>0&&a[p].push({grantQty:l,grantDuration:r,exp:j}),a[p].forEach(k=>{P(i).diff(k.exp,"days")<0&&(x+=g*k.grantQty/k.grantDuration,y+=f*k.grantQty/k.grantDuration)});const b=u+o+x,D=u+o+y,A=g*l,B=f*l;return{stock:x,stockAdj:y,total:b,totalAdj:D,grantThen:A,grantNow:B}});return d.map(({totalAdj:o,...i},r)=>{const l=r===0?0:o-d[r-1].totalAdj;return{totalAdj:o,netDiff:l,...i}})}}),v=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Mt=({compEntries:e,compCalcEntries:s,onClick:n})=>t.jsxs(w,{container:!0,spacing:1,children:[t.jsx(w,{size:12,children:t.jsx(m,{children:"*value computed from latest stock price above"})}),e.map((a,d)=>{const{entryDate:h,salary:o,bonus:i,stockTick:r,priceThen:l,grantDuration:g,grantQty:u}=a,{stock:p,stockAdj:f,total:x,totalAdj:y,netDiff:j,grantThen:b,grantNow:D}=s[d];return t.jsx(w,{size:{xs:12,md:6,lg:4,xl:3,xxl:e.length>4?2:void 0,xxxl:e.length>6?1:void 0},children:t.jsx(kt,{children:t.jsx(Ct,{onClick:n(d),children:t.jsxs(w,{container:!0,children:[t.jsxs(w,{size:r?6:12,children:[t.jsx(L,{title:"Salary"}),t.jsxs(_,{children:[t.jsxs(m,{children:["Date: ",P(h).format("MMMM Y")]}),t.jsxs(m,{children:["Salary: ",v.format(o)]}),t.jsxs(m,{children:["Bonus: ",v.format(i)]}),t.jsx(R,{"aria-hidden":!0}),t.jsxs(m,{children:["Stock: ",v.format(p)]}),t.jsxs(m,{children:["*Stock: ",v.format(f)]}),t.jsx(R,{"aria-hidden":!0}),t.jsxs(m,{children:["Total: ",v.format(x)]}),t.jsx(m,{sx:{display:"inline"},children:"*Total:"}),t.jsx(m,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(y)}),j!==0&&t.jsxs(t.Fragment,{children:[t.jsx(R,{"aria-hidden":!0}),t.jsx(m,{sx:{display:"inline"},children:"Net:"}),t.jsx(m,{color:j>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:v.format(j)})]})]})]}),r&&t.jsxs(w,{size:6,children:[t.jsx(L,{title:"Stock Grant"}),t.jsxs(_,{children:[t.jsx(m,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(m,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:r}),u>0&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{children:["Price: ",v.format(l)]}),t.jsxs(m,{children:["Grant Qty: ",u]}),t.jsxs(m,{children:["Duration: ",g," years"]}),t.jsx(R,{"aria-hidden":!0}),t.jsxs(m,{children:["Grant: ",v.format(b)]}),t.jsxs(m,{children:["*Grant: ",v.format(D)]})]})]})]})]})})})},`comp-calc-entry-${d}`)}).reverse()]}),O={variant:"standard",fullWidth:!0,margin:"dense"},Bt=new Date().getFullYear()-2e3,$=[];for(let e=0;e<=Bt;e+=1)$.push(2e3+e);$.reverse();const Ft=({open:e,compEntry:s,onClose:n,addCompEntry:a})=>{const[d,h]=c.useState("1"),[o,i]=c.useState($[0].toString()),[r,l]=c.useState(0),[g,u]=c.useState(0),[p,f]=c.useState(""),[x,y]=c.useState(0),[j,b]=c.useState(4),[D,A]=c.useState(0),B=()=>{h("1"),i($[0].toString()),l(0),u(0),f(""),y(0),b(4),A(0)};c.useEffect(()=>{if(s){const{month:S,year:F}=P(s.entryDate);h((S+1).toString()),i(F.toString()),l(s.salary),u(s.bonus),f(s.stockTick),y(s.priceThen),b(s.grantDuration),A(s.grantQty)}else B()},[s,s==null?void 0:s.salary]);const k=S=>F=>S(parseFloat(F.target.value)),C=S=>f(S.target.value),T=S=>h(S.target.value),E=S=>i(S.target.value),ht=()=>{a({entryDate:`${o}-${d.length<2?"0":""}${d}`,salary:r,bonus:g,stockTick:p,priceThen:x,grantDuration:j,grantQty:D}),B()};return t.jsxs(et,{open:e,onClose:n,children:[t.jsxs(st,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(nt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(z,{fullWidth:!0,children:[t.jsx(H,{id:"month-select",children:"Month"}),t.jsx(Q,{labelId:"month-select",label:"Month",value:d,onChange:T,children:St.map((S,F)=>t.jsx(U,{value:F+1,children:S},F))})]}),t.jsxs(z,{fullWidth:!0,children:[t.jsx(H,{id:"year-select",children:"Year"}),t.jsx(Q,{labelId:"year-select",label:"Year",value:o,onChange:E,children:$.map(S=>t.jsx(U,{value:S,children:S},S))})]})]}),t.jsx(N,{label:"Salary",value:r,type:"number",onChange:k(l),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(N,{label:"Bonus",value:g,type:"number",onChange:k(u),slotProps:{input:{startAdornment:"$"}},...O}),t.jsx(At,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(N,{label:"Stock Ticker",value:p,onChange:C,...O}),t.jsx(N,{label:"Grant Quantity",value:D,type:"number",onChange:k(A),...O}),t.jsx(N,{label:"Grant Duration",value:j,type:"number",onChange:k(b),...O}),t.jsx(N,{label:"Stock Price Then",value:x,type:"number",onChange:k(y),slotProps:{input:{startAdornment:"$"}},...O})]}),t.jsxs(ot,{children:[t.jsx(M,{onClick:n,children:"Cancel"}),t.jsx(M,{type:"submit",onClick:ht,children:s?"Update":"Add"})]})]})},J={variant:"standard",fullWidth:!0,margin:"dense"},ct=c.memo(({open:e,price:s,stock:n,onClose:a,addStockEntry:d,removeStockEntry:h})=>{const[o,i]=c.useState(0),[r,l]=c.useState(""),g=()=>{i(0),l("")};c.useEffect(()=>{n&&s!==void 0?(i(s),l(n)):g()},[s,n]);const u=x=>l(x.target.value),p=x=>i(parseFloat(x.target.value)),f=()=>{d(r,o),g()};return t.jsxs(et,{open:e,onClose:a,children:[t.jsxs(st,{children:[n?"Edit":"New"," Stock Entry"]}),t.jsx(nt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(N,{label:"Stock",value:r,onChange:u,...J}),t.jsx(N,{label:"Price Now",value:o,type:"number",onChange:p,slotProps:{input:{startAdornment:"$"}},...J})]})}),t.jsxs(ot,{children:[t.jsx(M,{onClick:h(r),color:"error",children:"Delete"}),t.jsx(M,{onClick:a,children:"Cancel"}),t.jsx(M,{type:"submit",onClick:f,children:n?"Update":"Add"})]})]})});ct.displayName="StockDialog";const Ot=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((n,a)=>t.jsx(bt,{color:"primary",label:`${n}: ${v.format(e[n])}`,onClick:s(n),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${a}`))});at(W);const q=0,K=1,V=2,X=3,I=4,Pt={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},$t=({startIdx:e,compCalcEntries:s,compEntries:n,onClick:a})=>{const h=G(tt).mode==="light"?"black":"white",o=[[],[],[],[],[]];if(n.length>0){let r=P(n[e].entryDate).year,l=n[e].salary+n[e].bonus+(s[e].stockAdj||s[e].stock);n.forEach(({bonus:g,salary:u,entryDate:p},f)=>{const{stock:x,stockAdj:y}=s[f];o[q].push(y||x),o[K].push(g),o[V].push(u),o[X].push(x+g+u);const j=P(p).year;if(j>=r){for(;r<j;r+=1)l*=Pt[r];o[I].push(l)}else o[I].push(0)})}const i={chart:{type:"area",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp",style:{color:h}},xAxis:{visible:!1},yAxis:{labels:{style:{color:h}},title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"},plotOptions:{area:{stacking:"normal",lineColor:h,lineWidth:1,marker:{lineWidth:1,lineColor:h}},series:{cursor:"pointer",events:{click:a}}},series:[{type:"area",name:"Stock",data:[...o[q]]},{type:"area",name:"Bonus",data:[...o[K]]},{type:"area",name:"Salary",data:[...o[V]]},{type:"spline",name:"Total",data:[...o[X]]},{type:"spline",name:"Inflation",data:[...o[I]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(rt,{highcharts:W,options:i})})};at(W);const dt=c.memo(({bonus:e,salary:s,stock:n})=>{const d=G(tt).mode==="light"?"black":"white",h={chart:{type:"pie",backgroundColor:null},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown",style:{color:d}},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}},series:[{data:[{name:"Stock",y:n},{name:"Bonus",y:e},{name:"Salary",y:s}]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(rt,{highcharts:W,options:h})})});dt.displayName="BreakdownChart";const Et=({compEntries:e,compCalcEntries:s})=>{const{stock:n,stockAdj:a}=s[s.length-1],{bonus:d,salary:h}=e[e.length-1],[o,i]=c.useState(0),[r,l]=c.useState(a||n),[g,u]=c.useState(d),[p,f]=c.useState(h);c.useEffect(()=>{i(0),l(a||n),u(d),f(h)},[a,n,d,h]);const x=y=>{const{stock:j,stockAdj:b}=s[y.point.index],{bonus:D,salary:A}=e[y.point.index];i(y.point.index),l(b||j),u(D),f(A)};return t.jsxs(w,{container:!0,children:[t.jsx(w,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx($t,{startIdx:o,compCalcEntries:s,compEntries:e,onClick:x})}),t.jsx(w,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(dt,{stock:r,bonus:g,salary:p})})]})},te=()=>{const[e,s]=Y(it),n=G(Nt),[a,d]=Y(lt),[h,o]=c.useState(!1),[i,r]=c.useState(!1),[l,g]=c.useState(-1),[u,p]=c.useState(""),f=()=>o(!1),x=()=>{g(-1),o(!0)},y=C=>()=>{g(C),o(!0)},j=()=>r(!1),b=()=>{p(""),r(!0)},D=C=>()=>{p(C),r(!0)},A=C=>{const T=[...e];l===-1?T.push(C):T[l]=C,s(T),f()},B=(C,T)=>{const E={...a};E[C]=T,d(E),j()},k=C=>()=>{const T={...a};delete T[C],d(T),j()};return t.jsxs(t.Fragment,{children:[t.jsx(m,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Ot,{stockEntries:a,openStockModal:D}),t.jsxs("div",{children:[t.jsx(M,{onClick:b,children:"+ Stock"}),t.jsx(M,{onClick:x,children:"+ Entry"})]})]}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Et,{compEntries:e,compCalcEntries:n}),t.jsx(Mt,{compEntries:e,compCalcEntries:n,onClick:y})]}),t.jsx(ct,{open:i,price:u?a[u]:void 0,stock:u,onClose:j,addStockEntry:B,removeStockEntry:k}),t.jsx(Ft,{open:h,compEntry:l!==-1?e[l]:void 0,onClose:f,addCompEntry:A})]})};export{te as default};
//# sourceMappingURL=index-DsKVg3YY.js.map
