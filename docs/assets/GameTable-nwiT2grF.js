import{O as v,P as T,r as d,j as e,G as A,a9 as P,E as k,K as Q}from"./index-CLWmqEbq.js";import{p as C}from"./PlayerMenu-CPI52e94.js";import{T as f}from"./Header-BPtu2lHf.js";import{C as R}from"./Card-Cna8E5nW.js";import{S as D}from"./Slider-fcN67E76.js";import{b as I}from"./blueGrey-BeTiP1I_.js";import{B as N}from"./Button-BuK4RTRF.js";const _={player:0,hand:0},at=v("turnAtom",_),q=(i,n)=>i.weight-n.weight,W=[{name:"2",weight:2,suit:"♣"},{name:"3",weight:3,suit:"♣"},{name:"4",weight:4,suit:"♣"},{name:"5",weight:5,suit:"♣"},{name:"6",weight:6,suit:"♣"},{name:"7",weight:7,suit:"♣"},{name:"8",weight:8,suit:"♣"},{name:"9",weight:9,suit:"♣"},{name:"10",weight:10,suit:"♣"},{name:"J",weight:11,suit:"♣"},{name:"Q",weight:12,suit:"♣"},{name:"K",weight:13,suit:"♣"},{name:"A",weight:14,suit:"♣"},{name:"2",weight:2,suit:"♦"},{name:"3",weight:3,suit:"♦"},{name:"4",weight:4,suit:"♦"},{name:"5",weight:5,suit:"♦"},{name:"6",weight:6,suit:"♦"},{name:"7",weight:7,suit:"♦"},{name:"8",weight:8,suit:"♦"},{name:"9",weight:9,suit:"♦"},{name:"10",weight:10,suit:"♦"},{name:"J",weight:11,suit:"♦"},{name:"Q",weight:12,suit:"♦"},{name:"K",weight:13,suit:"♦"},{name:"A",weight:14,suit:"♦"},{name:"2",weight:2,suit:"♥"},{name:"3",weight:3,suit:"♥"},{name:"4",weight:4,suit:"♥"},{name:"5",weight:5,suit:"♥"},{name:"6",weight:6,suit:"♥"},{name:"7",weight:7,suit:"♥"},{name:"8",weight:8,suit:"♥"},{name:"9",weight:9,suit:"♥"},{name:"10",weight:10,suit:"♥"},{name:"J",weight:11,suit:"♥"},{name:"Q",weight:12,suit:"♥"},{name:"K",weight:13,suit:"♥"},{name:"A",weight:14,suit:"♥"},{name:"2",weight:2,suit:"♠"},{name:"3",weight:3,suit:"♠"},{name:"4",weight:4,suit:"♠"},{name:"5",weight:5,suit:"♠"},{name:"6",weight:6,suit:"♠"},{name:"7",weight:7,suit:"♠"},{name:"8",weight:8,suit:"♠"},{name:"9",weight:9,suit:"♠"},{name:"10",weight:10,suit:"♠"},{name:"J",weight:11,suit:"♠"},{name:"Q",weight:12,suit:"♠"},{name:"K",weight:13,suit:"♠"},{name:"A",weight:14,suit:"♠"}],$=v("deckAtom",W),mt=T(null,(i,n)=>{const s=[];W.forEach(h=>s.push(h));for(let h=0;h<100;h+=1){const r=Math.floor(Math.random()*s.length),t=Math.floor(Math.random()*s.length),o=s[r];s[r]=s[t],s[t]=o}n($,s)}),ht=T(null,(i,n,s,h,r=[])=>{const t=i($),o=[];t.forEach(c=>o.push(c));const a=[];if(s<=o.length)for(let c=0;c<s;c+=1){const w=o.pop();w&&a.push(w)}const g=[...i(C)],u=g.findIndex(c=>c.id===h),l=g[u];l.hands[0]={cards:[...r,...a],weight:0,soft:!1},l.hands[0].cards.sort(q),n($,o),n(C,g)}),z={border:0,backgroundColor:"white",borderRadius:5,cursor:"pointer",display:"inline-block",fontWeight:"bold",height:78,margin:5,padding:"0 3px 12px 3px",width:50},L={textAlign:"left"},O={margin:"auto",marginTop:5,textAlign:"center",width:"100%"},y={cardFace:z,cardTitle:L,suit:O},B=d.memo(({dropped:i,suit:n,name:s,cardHandler:h,playerNo:r,handNo:t,cardNo:o})=>{const a=d.useCallback(()=>{h&&h(r,t,o)},[h,o,t,r]),m={color:n==="♣"||n==="♠"?"black":A[500],backgroundColor:i?A[100]:"white"};return e.jsxs("button",{style:{...y.cardFace,...m},onClick:a,children:[e.jsx("div",{style:y.cardTitle,children:s+n}),e.jsx(f,{variant:"h4",style:{...y.suit,...m},children:n})]})});B.displayName="Card";const U={fontWeight:"bold",marginTop:"0.5em"},V={fontWeight:"normal",marginTop:"0.5em"},X=({cardHandler:i,cardsToDiscard:n,hand:s,handNo:h,isBlackJack:r,isHandTurn:t,isMultiHand:o,isPlayerTurn:a,playerNo:m})=>{const g=d.useMemo(()=>a&&(!o||o&&t)?{...U,color:P[700]}:V,[a,o,t]),u=s.weight||0;return e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"h4",style:g,children:r&&`${u>21?"Bust":"Hand"}: ${u}`}),s.cards.map((l,c)=>{const w=n.includes(c);return l?e.jsx(B,{cardHandler:i,cardNo:c,dropped:w,handNo:h,name:l.name,playerNo:m,suit:l.suit},l.name+l.suit):null})]})},Y={borderRadius:5,display:"inline-block",margin:10,padding:20},Z={minWidth:"100px"},M={player:Y,width:Z},J=({betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:h,isBlackJack:r,player:t,playerNo:o,turn:a})=>{const m=!!a&&o===a.player,g=t.hands.length>1,u=!!h&&r&&t.id!==0&&!t.isBot,l=Math.max(Math.min(t.money,5),0),c=Math.max(Math.min(t.money,100),10),w=5,F=d.useCallback((j,x)=>{i&&i(t.id,j,x)},[i,t.id]),G={fontWeight:m?"bold":"normal"};let p={background:k[900],color:"white"};return t.status==="win"?p={background:Q[300],color:"white"}:t.status==="draw"?p={background:I[300],color:"white"}:t.status==="lose"?p={background:A[300],color:"white"}:m&&(p={background:k[300],color:"black"}),e.jsxs(R,{style:{...M.player,...p},children:[e.jsx(f,{variant:"h4",component:"h2",style:{...G},children:`${t.name}: $${t.money}`}),u&&e.jsx(D,{max:c,min:l,onChange:F,step:w,style:M.width,value:t.bet,"aria-label":`adjust bet for ${t.name}`}),r&&t.id!==0&&e.jsx(f,{variant:"h5",component:"h3",children:`Bet: $${t.bet}`}),t.hands.map((j,x)=>{const K=!!a&&a.hand===x;return e.jsx("div",{children:!h&&e.jsx(X,{cardHandler:n,cardsToDiscard:s,hand:j,handNo:x,isBlackJack:r,isHandTurn:K,isMultiHand:g,isPlayerTurn:m,playerNo:o})},`hand${x}`)})]})},b=({betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:h,isBlackJack:r,players:t,turn:o})=>e.jsx(e.Fragment,{children:t.map((a,m)=>e.jsx(J,{betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:h,isBlackJack:r,player:a,playerNo:m,turn:o},`player${m}`))}),E=d.memo(({onClick:i,name:n})=>e.jsx(N,{onClick:()=>i(n),style:{margin:12},variant:"contained",children:n}));E.displayName="Button";const S=({gameFunctions:i,onClick:n})=>e.jsx("div",{children:i.map(s=>e.jsx(E,{onClick:n,name:s},s))}),rt=({betHandler:i,cardClickHandler:n,cardsToDiscard:s=[],gameFunctions:h=[],gameOver:r=!1,hideHands:t=!1,isBlackJack:o=!0,players:a,turn:m,onClick:g})=>{const u=d.useMemo(()=>a.slice(0,m.player+1),[a,m.player]),l=d.useMemo(()=>a.slice(m.player+1),[a,m.player]),c=d.useMemo(()=>!t&&r===!1?a.slice(m.player,m.player+1):a,[t,r,a,m.player]);return o&&!t?e.jsxs(e.Fragment,{children:[e.jsx(b,{players:u,betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:t,isBlackJack:o,turn:m}),e.jsx(S,{gameFunctions:h,onClick:g}),e.jsx(b,{players:l,betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:t,isBlackJack:o,turn:{player:-1,hand:-1}})]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{players:c,betHandler:i,cardHandler:n,cardsToDiscard:s,hideHands:t,isBlackJack:o,turn:m}),e.jsx(S,{gameFunctions:h,onClick:g})]})};export{rt as G,ht as d,W as n,q as r,mt as s,at as t};
//# sourceMappingURL=GameTable-nwiT2grF.js.map
