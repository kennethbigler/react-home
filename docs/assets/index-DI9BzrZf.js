import{j as e,F as O,z as D,E as K,M as W,n as w,B as V,v as Z,w as _,x as X,K as Q,Z as F,_ as J,Y as ee,a6 as ae,a7 as ne,X as se,a0 as te,a8 as R,f as k,P as B,a9 as oe,h as ce}from"./mui-vendor-BMBlDOcZ.js";import{r as $}from"./react-vendor-BtzsouiL.js";import{c as H,b as I,u as U,a as re}from"./index-C1SQ0bRh.js";const E=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]},{ladies:["Libby","Olivia","Robyn","Sapphia","Shae","Taofiqah","Tasha","Thea","Therese","Vic"],gents:["Cacherel","Charlie","Ismail","Jack","Jacob","Jordan","Josh","Joshy","Juan","Theo"]}],le=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9","UK 1"],Y=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth"],L=7,G=(s=L)=>({matches:E[s].ladies.map(()=>-1),noMatch:E[s].ladies.map(()=>E[s].gents.map(()=>!1)),roundPairings:[]}),N=I("aytoSeasonAtom",L),q=I("areYouTheOneAtom",G()),ie=H(s=>s(N),(s,o,a)=>{o(N,a),o(q,G(a))}),he=H(s=>{const o=s(N);return[...Y],{...E[o],options:Y}}),de=s=>isNaN(s)?-1:s,ue={display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em",alignItems:"center"},pe=({options:s,onSelect:o,ri:a,roundPairings:x,onBlackout:p,updateScore:m})=>{const[d,t]=U(ie),C=de(x[a]?.score),u=n=>t(Number(n.target.value)),l=n=>o(Number(n.target.value)),r=()=>p(x[a].pairs),h=()=>m(C+1),c=()=>m(C-1);return e.jsxs("div",{style:ue,children:[e.jsxs(O,{children:[e.jsx(D,{id:"season-select",children:"Season"}),e.jsx(K,{labelId:"season-select",label:"Season",value:d,onChange:u,children:le.map((n,M)=>e.jsx(W,{value:M,children:n},n))})]}),e.jsxs(O,{children:[e.jsx(D,{id:"matchup-select",children:"Matchup"}),e.jsx(K,{labelId:"matchup-select",label:"Matchup",value:a,onChange:l,children:s.map((n,M)=>e.jsx(W,{value:M,children:n},n))})]}),a<s.length-1&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outlined",color:"secondary",onClick:r,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",C]}),e.jsxs(V,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(w,{"aria-label":"decrement score",onClick:c,children:"-"}),e.jsx(w,{"aria-label":"increment score",onClick:h,children:"+"})]})]})]})]})},me=({open:s,content:o,onMatch:a,onNoMatch:x,onCancel:p})=>e.jsxs(Z,{onClose:p,open:s,children:[e.jsx(_,{children:"TB Result"}),e.jsxs(X,{children:["Are ",o," a perfect match?"]}),e.jsxs(Q,{children:[e.jsx(w,{onClick:a,children:"Match"}),e.jsx(w,{onClick:x,color:"error",children:"No Match"}),e.jsx(w,{onClick:p,color:"warning",children:"Cancel"})]})]}),fe=(s,o,a,x,p)=>{let m="outlined",d="primary";return(s&&(o||a)||x||s&&p>0)&&(m="contained"),o?d="error":a&&(d="success"),{variant:m,color:d,histValue:p}},xe=({gents:s,histLi:o,lMatch:a,noMatchLi:x,isTB:p,lPair:m,ladyName:d,onClick:t})=>e.jsxs(F,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(J,{component:"th",scope:"row",children:d}),s.map((C,u)=>{let l=0,r=0;if(o&&o[u])l=o[u].rounds.length,r=o[u].odds;else if(!x[u]){const n=x.reduce((M,A)=>A?M:M+1,0);r=Math.floor(1/n*100)}const{variant:h,color:c}=fe(p,x&&x[u],a===u,m===u,l);return e.jsx(J,{sx:{padding:0,textAlign:"center"},children:e.jsxs(w,{variant:h,color:c,onClick:t(u),children:[r,"%"]})},C)})]}),je=({gents:s,hist:o,ladies:a,matches:x,noMatch:p,options:m,ri:d,roundPairings:t,updateMatch:C,updateNoMatch:u,updatePairs:l})=>{const r=m.length===d+1,[h,c]=$.useState(!1),[n,M]=$.useState([-1,-1]),A=(f,y)=>b=>()=>{if(r){M([y,b]),c(!0);return}const T=t[f]?.pairs.indexOf(b);T!==-1&&l(f,T,-1),l(f,y,b)},S=()=>{c(!1)},i=()=>{const[f,y]=n;C(f,y),S()},g=()=>{const[f,y]=n;u(f,y),S()};return e.jsxs(ee,{children:[a.map((f,y)=>e.jsx(xe,{gents:s,histLi:o[y],noMatchLi:p[y],isTB:r,ladyName:f,lMatch:x[y],lPair:t[d]?.pairs[y],onClick:A(d,y)},`ayto-table-row-${f}`)),e.jsx(me,{open:h,content:`${a[n[0]]} & ${s[n[1]]}`,onCancel:S,onMatch:i,onNoMatch:g})]})},ye=({gents:s,...o})=>e.jsx(ae,{component:ne,children:e.jsxs(se,{"aria-label":"are you the one data entry table",children:[e.jsx(te,{children:e.jsxs(F,{children:[e.jsx(J,{children:"-"}),s.map(a=>e.jsx(J,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:a},a))]})}),e.jsx(je,{gents:s,...o})]})}),Se=({gents:s,ladies:o,matches:a,noMatch:x,pairs:p,score:m,ri:d,hist:t,tempScore:C,showAll:u})=>{const l=[];let r=0,h=0;return p.forEach((c,n)=>{if(n<0||c<0||n===void 0||c===void 0||!u&&(x[n][c]||a[n]===c))return;const M=t[n][c].rounds.length>1;let A=M?"primary":"default";x[n][c]?A="error":a[n]===c&&(A="success");const S=`${o[n]}-${s[c]}${M?` ${t[n][c].rounds.length}`:""} - ${t[n][c].odds}%`,i=e.jsx(B,{label:S,color:A},`match-r${d}-l${n}-g${c}`);switch(A){case"success":h+=1,l.unshift(i);return;case"error":r+=1,l.push(i);return;case"primary":l.splice(h,0,i),h+=1;return;default:l.splice(l.length-r,0,i)}}),l.every(c=>c===null)?null:e.jsxs(R,{spacing:1,children:[e.jsxs(k,{variant:"h4",component:"h3",style:{textAlign:"center"},children:["Matchup ",d+1]}),l,e.jsx(B,{label:u?m:m-C[d],color:"warning"})]})},Me=({cei:s,pairs:o,score:a,gents:x,ladies:p,hist:m})=>e.jsxs(R,{spacing:1,children:[e.jsxs(k,{variant:"h4",component:"h3",style:{textAlign:"center"},children:["Calculated ",s+1]}),o.map((d,t)=>e.jsx(B,{label:`${p[t]}-${x[d]} ${m[t][d].rounds.length} - ${m[t][d].odds}%`,color:"primary"},`calc-l${t}-g${d}`)),e.jsx(B,{label:`max ${a}`,color:"warning"})]}),ge=({gents:s,ladies:o,matches:a,noMatch:x,roundPairings:p,hist:m,tempScore:d,calculatedEquations:t})=>{const[C,u]=$.useState(!1),l=r=>{u(r.target.checked)};return e.jsxs("div",{children:[e.jsxs(R,{direction:"row",justifyContent:"space-between",children:[e.jsx(k,{variant:"h2",children:"Analysis"}),e.jsx(oe,{control:e.jsx(ce,{checked:C,onChange:l}),label:"Show All Couples"})]}),e.jsx(R,{spacing:1,direction:"row-reverse",flexWrap:"wrap-reverse",justifyContent:"flex-end",children:p.map(({pairs:r,score:h},c)=>e.jsx(Se,{gents:s,ladies:o,matches:a,noMatch:x,pairs:r,score:h,ri:c,hist:m,tempScore:d,showAll:C},`matched-stack-${c}`))}),t.length>0&&e.jsx("hr",{"aria-hidden":!0}),e.jsx(R,{spacing:1,direction:"row",flexWrap:"wrap",children:t.map(({pairs:r,score:h},c)=>e.jsx(Me,{cei:c,pairs:r,score:h,gents:s,ladies:o,hist:m},`calculated-stack-${c}`))})]})},Ce=(s,o,a,x)=>{const p=[],m=[],d=[];x.forEach(({pairs:u},l)=>{m[l]=0,d[l]=s,u.forEach((r,h)=>{(h<0||r<0||a[h][r])&&(d[l]-=1),o[h]===r&&(m[l]+=1,d[l]-=1),p[h]||(p[h]=[]),p[h][r]||(p[h][r]={odds:0,oddsWeight:0,rounds:[]}),p[h][r].rounds.push(l)})});const t={};x.forEach(({pairs:u,score:l},r)=>{u.forEach((h,c)=>{const n=p[c][h];if(a[c][h])return;if(o[c]===h||l===s){n.odds=100;return}const M=d[r]?(l-m[r])*100/d[r]:0;if(n.oddsWeight===0?n.odds=Math.floor(M):!M||!n.odds?n.odds=0:n.odds=Math.floor((n.odds*n.oddsWeight+M)/(n.oddsWeight+1)),n.oddsWeight+=1,n.rounds.length<2)return;const A=[n.rounds.reduce((S,i)=>S+i.toString(),"")];for(let S=r+1;S<n.rounds.length;S+=1)A.push(`${n.rounds[r]}${n.rounds[S]}`);A.forEach(S=>{t[S]||(t[S]={couples:[],score:l});let i=!0;t[S].couples.forEach(([g,f])=>{i=i&&g!==c&&f!==h}),i&&t[S].couples.push([c,h]),t[S].score=Math.min(l-m[r],t[S].score)})})});const C=[];return Object.keys(t).forEach(u=>{if(t[u].couples.length>1&&t[u].couples.length>t[u].score){const l=[];t[u].couples.forEach(([h,c])=>{l[h]=c});let r=!1;C.forEach(({pairs:h,score:c},n)=>{let M=!0,A=!0;for(let S=0;S<h.length;S+=1)l[S]!==h[S]&&(l[S]?(M=!1,A=!1):M=!1);r=r||M||A&&t[u].score>=c,M&&(C[n].score=Math.min(c,t[u].score))}),r||C.push({pairs:l,score:t[u].score})}}),{hist:p,tempScore:m,calculatedEquations:C}},we=()=>{const[{matches:s,noMatch:o,roundPairings:a},x]=U(q),{ladies:p,gents:m,options:d}=re(he),[t,C]=$.useState(0),{hist:u,tempScore:l,calculatedEquations:r}=Ce(p.length,s,o,a),h=i=>{C(i)},c=i=>{const g=a[t]?{...a[t]}:{pairs:[],score:0};g.score=i;const f=[...a];f[t]=g,x({matches:s,noMatch:o,roundPairings:f})},n=(i,g)=>{const f=o.map(y=>[...y]);f[i]||(f[i]=[]),f[i][g]=!f[i][g],x({matches:s,noMatch:f,roundPairings:a})},M=i=>{const g=o.map(T=>[...T]);let f=0;i.forEach((T,j)=>{s[j]===T?f+=1:o[j][T]||(g[j]||(g[j]=[]),g[j][T]=!0)});const y={...a[t],score:f},b=[...a];b[t]=y,x({matches:s,noMatch:g,roundPairings:b})},A=(i,g,f)=>{const y=a[i]?{...a[i],pairs:[...a[i].pairs]}:{pairs:[],score:0};y.pairs[g]=f;const b=[...a];b[t]=y,x({matches:s,noMatch:o,roundPairings:b})},S=(i,g)=>{const f=[...s],y=o.map(j=>[...j]);y[i]||(y[i]=[]),f[i]=g;for(let j=0;j<m.length;j+=1)y[i][j]=j!==g;for(let j=0;j<p.length;j+=1)y[j]||(y[j]=[]),y[j][g]=j!==i;const b=f.reduce((j,v)=>v>=0?j+1:j,0),T=[...a];for(let j=0;j<d.length-1;j+=1){const{pairs:v,score:z}=a[j]||{pairs:[],score:b};if(!a[j]||v[i]<0||v[i]===void 0){const P={pairs:[...v],score:Math.max(z,b)};P.pairs[i]=g,T[j]=P}}x({matches:f,noMatch:y,roundPairings:T})};return e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"h2",component:"h1",children:"Are You The One?"}),e.jsx(pe,{onSelect:h,options:d,ri:t,roundPairings:a,onBlackout:M,updateScore:c}),e.jsx("br",{}),e.jsx(ye,{gents:m,hist:u,ladies:p,matches:s,noMatch:o,options:d,ri:t,roundPairings:a,updateMatch:S,updateNoMatch:n,updatePairs:A}),e.jsx(ge,{calculatedEquations:r,gents:m,hist:u,ladies:p,matches:s,noMatch:o,roundPairings:a,tempScore:l})]})};export{we as default};
//# sourceMappingURL=index-DI9BzrZf.js.map
