import{j as t,v as Z,w as _,x as tt,F as O,z,E as L,M as H,H as w,J as xt,K as et,n as F,P as jt,f as g,Q as gt,o as U,R as yt,p as v,q as St,U as kt,V as R,s as I,D as W}from"./mui-vendor-BaWEqana.js";import{r as m}from"./react-vendor-DdXbj7Lh.js";import{b as st,c as ft,u as nt,a as Y,t as at}from"./index-UptMNBHG.js";import{d as B,m as Ct}from"./DateHelper-hKADhxz5.js";import{H as ot,a as rt}from"./highcharts-react.min-CxTZH79U.js";import"./charts-DVCkarUB.js";const lt=st("stockAtom",{}),ct=st("compCalcAtom",[]),bt=ft(e=>{const s=e(ct),a=e(lt),o={},r=s.map(({bonus:n,entryDate:h,grantDuration:l,grantQty:c,priceThen:x,salary:u,stockTick:j})=>{const S=a[j]||0;let i=0,y=0;const f=B(h);f.year+=l,o[j]||(o[j]=[]),c>0&&o[j].push({grantQty:c,grantDuration:l,exp:f}),o[j].forEach(p=>{B(h).diff(p.exp,"days")<0&&(i+=x*p.grantQty/p.grantDuration,y+=S*p.grantQty/p.grantDuration)});const A=u+n+i,D=u+n+y,T=x*c,C=S*c;return{stock:i,stockAdj:y,total:A,totalAdj:D,grantThen:T,grantNow:C}});return r.map(({totalAdj:n,...h},l)=>{const c=l===0?0:n-r[l-1].totalAdj;return{totalAdj:n,netDiff:c,...h}})}),N={variant:"standard",fullWidth:!0,margin:"dense"},vt=new Date().getFullYear()-2e3,$=[];for(let e=0;e<=vt;e+=1)$.push(2e3+e);$.reverse();const At=({open:e,compEntry:s,onClose:a,addCompEntry:o})=>{const[r,d]=m.useState(s&&(B(s.entryDate).month+1).toString()||"1"),[n,h]=m.useState(s&&B(s.entryDate).year.toString()||$[0].toString()),[l,c]=m.useState(s?.salary||0),[x,u]=m.useState(s?.bonus||0),[j,S]=m.useState(s?.stockTick||""),[i,y]=m.useState(s?.priceThen||0),[f,A]=m.useState(s?.grantDuration||4),[D,T]=m.useState(s?.grantQty||0),C=()=>{d("1"),h($[0].toString()),c(0),u(0),S(""),y(0),A(4),T(0)},p=k=>P=>k(parseFloat(P.target.value)),M=k=>S(k.target.value),ut=k=>d(k.target.value),pt=k=>h(k.target.value),mt=()=>{o({entryDate:`${n}-${r.length<2?"0":""}${r}`,salary:l,bonus:x,stockTick:j,priceThen:i,grantDuration:f,grantQty:D}),C()};return t.jsxs(Z,{open:e,onClose:a,children:[t.jsxs(_,{children:[s?"Edit":"New"," Comp Entry"]}),t.jsxs(tt,{children:[t.jsxs("div",{style:{display:"flex",marginTop:5},children:[t.jsxs(O,{fullWidth:!0,children:[t.jsx(z,{id:"month-select",children:"Month"}),t.jsx(L,{labelId:"month-select",label:"Month",value:r,onChange:ut,children:Ct.map((k,P)=>t.jsx(H,{value:P+1,children:k},P))})]}),t.jsxs(O,{fullWidth:!0,children:[t.jsx(z,{id:"year-select",children:"Year"}),t.jsx(L,{labelId:"year-select",label:"Year",value:n,onChange:pt,children:$.map(k=>t.jsx(H,{value:k,children:k},k))})]})]}),t.jsx(w,{label:"Salary",value:l,type:"number",onChange:p(c),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(w,{label:"Bonus",value:x,type:"number",onChange:p(u),slotProps:{input:{startAdornment:"$"}},...N}),t.jsx(xt,{variant:"h6",component:"h4",sx:{marginTop:7},children:"Stock"}),t.jsx(w,{label:"Stock Ticker",value:j,onChange:M,...N}),t.jsx(w,{label:"Grant Quantity",value:D,type:"number",onChange:p(T),...N}),t.jsx(w,{label:"Grant Duration",value:f,type:"number",onChange:p(A),...N}),t.jsx(w,{label:"Stock Price Then",value:i,type:"number",onChange:p(y),slotProps:{input:{startAdornment:"$"}},...N})]}),t.jsxs(et,{children:[t.jsx(F,{onClick:a,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:mt,children:s?"Update":"Add"})]})]})},Q={variant:"standard",fullWidth:!0,margin:"dense"},it=m.memo(({open:e,price:s,stock:a,onClose:o,addStockEntry:r,removeStockEntry:d})=>{const[n,h]=m.useState(s||0),[l,c]=m.useState(a||""),x=()=>{h(0),c("")},u=i=>c(i.target.value),j=i=>h(parseFloat(i.target.value)),S=()=>{r(l,n),x()};return t.jsxs(Z,{open:e,onClose:o,children:[t.jsxs(_,{children:[a?"Edit":"New"," Stock Entry"]}),t.jsx(tt,{children:t.jsxs("div",{style:{marginTop:5},children:[t.jsx(w,{label:"Stock",value:l,onChange:u,...Q}),t.jsx(w,{label:"Price Now",value:n,type:"number",onChange:j,slotProps:{input:{startAdornment:"$"}},...Q})]})}),t.jsxs(et,{children:[t.jsx(F,{onClick:d(l),color:"error",children:"Delete"}),t.jsx(F,{onClick:o,children:"Cancel"}),t.jsx(F,{type:"submit",onClick:S,children:a?"Update":"Add"})]})]})});it.displayName="StockDialog";const b=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Dt=({stockEntries:e,openStockModal:s})=>t.jsx("div",{children:Object.keys(e).map((a,o)=>t.jsx(jt,{color:"primary",label:`${a}: ${b.format(e[a])}`,onClick:s(a),sx:{margin:.5,fontWeight:"bold"}},`stock-entry-${o}`))}),Tt=({compEntries:e,setCompEntries:s,openEntry:a,setOpenEntry:o,editEntryIdx:r,setEditEntryIdx:d})=>{const[n,h]=nt(lt),[l,c]=m.useState(!1),[x,u]=m.useState(""),j=()=>o(!1),S=()=>{d(-1),o(!0)},i=()=>c(!1),y=()=>{u(""),c(!0)},f=C=>()=>{u(C),c(!0)},A=C=>{const p=[...e];r===-1?p.push(C):p[r]=C,s(p),j()},D=(C,p)=>{const M={...n};M[C]=p,h(M),i()},T=C=>()=>{const p={...n};delete p[C],h(p),i()};return t.jsxs(t.Fragment,{children:[t.jsx(g,{variant:"h2",component:"h1",children:"Comp Calculator"}),t.jsxs("div",{className:"flex-container",style:{marginTop:10,marginBottom:10},children:[t.jsx(Dt,{stockEntries:n,openStockModal:f}),t.jsxs("div",{children:[t.jsx(F,{onClick:y,children:"+ Stock"}),t.jsx(F,{onClick:S,children:"+ Entry"})]})]}),l&&t.jsx(it,{open:l,price:x?n[x]:void 0,stock:x,onClose:i,addStockEntry:D,removeStockEntry:T}),a&&t.jsx(At,{open:a,compEntry:r!==-1?e[r]:void 0,onClose:j,addCompEntry:A})]})},dt=[gt[500],U[500],yt[500],U[900]],V=0,q=1,J=2,K=3,E=4,wt={2e3:1.034,2001:1.028,2002:1.016,2003:1.023,2004:1.027,2005:1.034,2006:1.032,2007:1.028,2008:1.038,2009:.996,2010:1.016,2011:1.032,2012:1.021,2013:1.015,2014:1.016,2015:1.001,2016:1.013,2017:1.021,2018:1.024,2019:1.018,2020:1.012,2021:1.047,2022:1.08,2023:1.041,2024:1.027},G={accessibility:{enabled:!0},chart:{type:"area",backgroundColor:"transparent"},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Total Comp"},xAxis:{visible:!1},yAxis:{title:{enabled:!1}},tooltip:{shared:!0,headerFormat:"<h3>Compensation</h3><br />",pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>${point.y:,.2f}</b><br />',footerFormat:"● *Total: $<b>{point.total:,.2f}</b>"}},Ft=({startIdx:e,compCalcEntries:s,compEntries:a,onClick:o})=>{const d=Y(at).mode==="light"?"black":"white",n=[[],[],[],[],[]];if(a.length>0){let l=B(a[e].entryDate).year,c=a[e].salary+a[e].bonus+(s[e].stockAdj||s[e].stock);a.forEach(({bonus:x,salary:u,entryDate:j},S)=>{const{stock:i,stockAdj:y}=s[S];n[V].push(y||i),n[q].push(x),n[J].push(u),n[K].push(i+x+u);const f=B(j).year;if(f>=l){for(;l<f;l+=1)c*=wt[l];n[E].push(c)}else n[E].push(x+u+(y||i))})}const h={...G,colors:[...dt,d],title:{...G.title,style:{color:d}},yAxis:{...G.yAxis,labels:{style:{color:d}}},plotOptions:{area:{stacking:"normal",lineColor:d,lineWidth:1,marker:{lineWidth:1,lineColor:d}},series:{cursor:"pointer",events:{click:o}}},series:[{type:"area",name:"Stock",data:[...n[V]]},{type:"area",name:"Bonus",data:[...n[q]]},{type:"area",name:"Salary",data:[...n[J]]},{type:"spline",name:"Total",data:[...n[K]]},{type:"spline",name:"Inflation",data:[...n[E]]}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(ot,{highcharts:rt,options:h})})},X={accessibility:{enabled:!0},colors:dt,chart:{type:"pie",backgroundColor:"transparent"},credits:{enabled:!1},legend:{enabled:!1},title:{text:"Comp Breakdown"},tooltip:{pointFormat:"<b>${point.y:,.2f}</b>"},plotOptions:{series:{allowPointSelect:!0,cursor:"pointer",dataLabels:[{enabled:!0,format:"{point.name}"},{enabled:!0,distance:-30,format:"{point.percentage:.0f}%",style:{fontSize:"1em"}}]}}},ht=m.memo(({bonus:e,salary:s,stock:a})=>{const r=Y(at).mode==="light"?"black":"white",d={...X,title:{...X.title,style:{color:r}},series:[{data:[{name:"Stock",y:a},{name:"Bonus",y:e},{name:"Salary",y:s}],type:"pie"}]};return t.jsx("figure",{style:{margin:0,width:"100%"},children:t.jsx(ot,{highcharts:rt,options:d})})});ht.displayName="BreakdownChart";const Bt=({compEntries:e,compCalcEntries:s})=>{const{stock:a,stockAdj:o}=s[s.length-1],{bonus:r,salary:d}=e[e.length-1],[n,h]=m.useState(0),[l,c]=m.useState(o||a),[x,u]=m.useState(r),[j,S]=m.useState(d),i=({point:{index:y}})=>{const{stock:f,stockAdj:A}=s[y],{bonus:D,salary:T}=e[y];h(y>=e.length-1?0:y),c(A||f),u(D),S(T)};return t.jsxs(v,{container:!0,children:[t.jsx(v,{size:{xs:12,md:6,lg:8,xl:9},children:t.jsx(Ft,{startIdx:n,compCalcEntries:s,compEntries:e,onClick:i})}),t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3},children:t.jsx(ht,{stock:l,bonus:x,salary:j})})]})},Nt=({compEntry:{entryDate:e,salary:s,bonus:a,stockTick:o,priceThen:r,grantDuration:d,grantQty:n},compCalcEntry:{stock:h,stockAdj:l,total:c,totalAdj:x,netDiff:u,grantThen:j,grantNow:S},compEntryCount:i,onClick:y})=>t.jsx(v,{size:{xs:12,md:6,lg:4,xl:3,xxl:i>4?2:void 0,xxxl:i>6?1:void 0},children:t.jsx(St,{children:t.jsx(kt,{onClick:y,children:t.jsxs(v,{container:!0,children:[t.jsxs(v,{size:o?6:12,children:[t.jsx(R,{title:"Salary"}),t.jsxs(I,{children:[t.jsxs(g,{children:["Date: ",B(e).format("MMMM Y")]}),t.jsxs(g,{children:["Salary: ",b.format(s)]}),t.jsxs(g,{children:["Bonus: ",b.format(a)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Stock: ",b.format(h)]}),t.jsxs(g,{children:["*Stock: ",b.format(l)]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Total: ",b.format(c)]}),t.jsx(g,{sx:{display:"inline"},children:"*Total:"}),t.jsx(g,{color:"warning",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(x)}),u!==0&&t.jsxs(t.Fragment,{children:[t.jsx(W,{"aria-hidden":!0}),t.jsx(g,{sx:{display:"inline"},children:"Net:"}),t.jsx(g,{color:u>0?"success":"error",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:b.format(u)})]})]})]}),o&&t.jsxs(v,{size:6,children:[t.jsx(R,{title:"Stock Grant"}),t.jsxs(I,{children:[t.jsx(g,{sx:{display:"inline"},children:"Ticker:"}),t.jsx(g,{color:"primary",fontWeight:"fontWeightBold",sx:{display:"inline",marginLeft:1},children:o}),n>0&&t.jsxs(t.Fragment,{children:[t.jsxs(g,{children:["Price: ",b.format(r)]}),t.jsxs(g,{children:["Grant Qty: ",n]}),t.jsxs(g,{children:["Duration: ",d," years"]}),t.jsx(W,{"aria-hidden":!0}),t.jsxs(g,{children:["Grant: ",b.format(j)]}),t.jsxs(g,{children:["*Grant: ",b.format(S)]})]})]})]})]})})})}),$t=({compEntries:e,compCalcEntries:s,onClick:a})=>t.jsxs(v,{container:!0,spacing:1,children:[t.jsx(v,{size:12,children:t.jsx(g,{children:"*value computed from latest stock price above"})}),e.map((o,r)=>t.jsx(Nt,{compEntry:o,compCalcEntry:s[r],compEntryCount:e.length,onClick:a(r)},`comp-calc-entry-${r}`)).reverse()]}),Ot=()=>{const[e,s]=nt(ct),a=Y(bt),[o,r]=m.useState(!1),[d,n]=m.useState(-1),h=l=>()=>{n(l),r(!0)};return t.jsxs(t.Fragment,{children:[t.jsx(Tt,{compEntries:e,setCompEntries:s,openEntry:o,setOpenEntry:r,editEntryIdx:d,setEditEntryIdx:n}),e.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(Bt,{compEntries:e,compCalcEntries:a}),t.jsx($t,{compEntries:e,compCalcEntries:a,onClick:h})]})]})};export{Ot as default};
//# sourceMappingURL=index-DM8SjktG.js.map
