import{I as Y,a1 as H,a6 as Z,J as F,r as N,j as e,a3 as V}from"./index-a9cca794.js";import{D as L}from"./Dropdown-f2426a6b.js";import{t as P,P as Q,p as X}from"./MenuItem-e15489c2.js";import{B as ee}from"./ButtonGroup-9d141528.js";import{D as ae,a as ne,b as se,c as te}from"./DialogActions-40c64e23.js";import{a as oe,b as I,c as k,T as re}from"./TableRow-08c264c7.js";import{T as ce}from"./TableContainer-cf98b21f.js";import{T as le}from"./TableHead-b42bb758.js";import{S as $}from"./Stack-68cb5ccd.js";import{F as ie}from"./FormControlLabel-86d2cd4f.js";import{C as B}from"./Chip-0786e24c.js";const J=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]}],de=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9"],W=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth","Consolidated"],U=7,G=(n=U)=>({matches:J[n].ladies.map(()=>-1),noMatch:J[n].ladies.map(()=>J[n].gents.map(()=>!1)),roundPairings:[]}),z=Y({key:"areYouTheOneAtom",default:JSON.parse(localStorage.getItem("are-you-the-one-atom")||"null")||G(),effects:[({onSet:n})=>{n(s=>{localStorage.setItem("are-you-the-one-atom",JSON.stringify(s))})}]}),D=Y({key:"aytoSeason",default:JSON.parse(localStorage.getItem("ayto-season-atom")||"null")||U,effects:[({onSet:n})=>{n(s=>{localStorage.setItem("ayto-season-atom",JSON.stringify(s))})}]}),he=H({key:"aytoSeasonSelector",get:({get:n})=>n(D),set:({set:n},s)=>{s instanceof Z||(n(D,s),n(z,G(s)))}}),ue=H({key:"aytoPlayerSelector",get:({get:n})=>{const s=n(D);return[...W],{...J[s],options:W}}}),q=n=>isNaN(n)?-1:n,pe=n=>{var g;const{options:s,onSelect:o,roundNumber:A,roundPairings:x,onBlackout:w,updateScore:C}=n,[r,b]=F(he),[m,p]=N.useState(q((g=x[A])==null?void 0:g.score)),f=i=>b(i),c=i=>{var a;p(q((a=x[i])==null?void 0:a.score)),o(i)},S=()=>{w(x[A].pairs),p(0)},l=()=>{p(m+1),C(m+1)},u=()=>{p(m-1),C(m-1)};return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em"},children:[e.jsx(L,{ariaLabel:"select season",value:r,options:de,onSelect:f}),e.jsx(L,{ariaLabel:"select matchup",value:A,options:s,onSelect:c}),A<s.length-2&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",color:"secondary",onClick:S,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",m]}),e.jsxs(ee,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(P,{"aria-label":"decrement score",onClick:u,children:"-"}),e.jsx(P,{"aria-label":"increment score",onClick:l,children:"+"})]})]})]})]})},me=({open:n,content:s,onMatch:o,onNoMatch:A,onCancel:x})=>e.jsxs(ae,{onClose:x,open:n,children:[e.jsx(ne,{children:"TB Result"}),e.jsxs(se,{children:["Are ",s," a perfect match?"]}),e.jsxs(te,{children:[e.jsx(P,{onClick:o,children:"Match"}),e.jsx(P,{onClick:A,color:"error",children:"No Match"}),e.jsx(P,{onClick:x,color:"warning",children:"Cancel"})]})]}),fe=n=>{const{gents:s,hist:o,ladies:A,matches:x,noMatch:w,options:C,roundNumber:r,roundPairings:b,updateMatch:m,updateNoMatch:p,updatePairs:f}=n,c=C.length===r+2,S=C.length===r+1,[l,u]=N.useState(!1),[g,i]=N.useState([-1,-1]),a=(y,d,h)=>()=>{var R;if(S)return;if(c){i([d,h]),u(!0);return}const T=(R=b[y])==null?void 0:R.pairs.indexOf(h);T!==-1&&f(y,T,-1),f(y,d,h)},t=()=>{u(!1)},j=()=>{const[y,d]=g;m(y,d),t()},M=()=>{const[y,d]=g;p(y,d),t()};return e.jsxs(oe,{children:[A.map((y,d)=>e.jsxs(I,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(k,{component:"th",scope:"row",children:y}),s.map((h,T)=>{var v,K,_;let R="outlined",E="primary";c?(w[d]&&w[d][T]||x[d]===T)&&(R="contained"):((v=b[r])==null?void 0:v.pairs[d])===T&&(R="contained"),w[d]&&w[d][T]&&(E="error"),x[d]===T&&(E="success");const O=o[d]&&((_=(K=o[d][T])==null?void 0:K.rounds)==null?void 0:_.length)||0;return S&&O>0&&(R="contained"),e.jsx(k,{sx:{padding:0,textAlign:"center"},children:e.jsx(P,{variant:R,color:E,onClick:a(r,d,T),children:S?O:`${y[0]}-${h[0]}`})},h)})]},`ayto-table-row-${y}`)),e.jsx(me,{open:l,content:`${A[g[0]]} & ${s[g[1]]}`,onCancel:t,onMatch:j,onNoMatch:M})]})},xe=({gents:n,...s})=>e.jsx(ce,{component:Q,children:e.jsxs(re,{"aria-label":"are you the one data entry table",children:[e.jsx(le,{children:e.jsxs(I,{children:[e.jsx(k,{children:"-"}),n.map(o=>e.jsx(k,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:o},o))]})}),e.jsx(fe,{gents:n,...s})]})}),ye=n=>{const{gents:s,ladies:o,matches:A,noMatch:x,roundPairings:w,hist:C,tempScore:r,calculatedEquations:b}=n,[m,p]=N.useState(!1),f=c=>{p(c.target.checked)};return e.jsxs("div",{children:[e.jsxs($,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(ie,{control:e.jsx(X,{checked:m,onChange:f,name:"show-all"}),label:"Show All Couples"})]}),e.jsx($,{spacing:1,direction:"row",flexWrap:"wrap",children:w.map(({pairs:c,score:S},l)=>{const u=[];let g=0,i=0;return c.forEach((a,t)=>{if(t<0||a<0||t===void 0||a===void 0)return;const j=C[t][a].rounds.length>1;let M=j?"primary":"default";if(m)x[t][a]&&(M="error"),A[t]===a&&(M="success");else if(x[t][a]||A[t]===a)return;const y=`${o[t]}-${s[a]}${j?` ${C[t][a].rounds.length}`:""} - ${C[t][a].odds}%`,d=e.jsx(B,{label:y,color:M},`eq-r${l}-l${t}-g${a}`);switch(M){case"success":i+=1,u.unshift(d);return;case"error":g+=1,u.push(d);return;case"primary":u.splice(i,0,d),i+=1;return;default:u.splice(u.length-g,0,d)}}),u.every(a=>a===null)?null:e.jsxs($,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",l+1]}),u,e.jsx(B,{label:m?S:S-r[l],color:"warning"})]},`equation-${l}`)})}),b.length>0&&e.jsx("hr",{}),e.jsx($,{spacing:1,direction:"row",flexWrap:"wrap",children:b.map(({pairs:c,score:S},l)=>e.jsxs($,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",l+1]}),c.map((u,g)=>e.jsx(B,{label:`${o[g]}-${s[u]} ${C[g][u].rounds.length} - ${C[g][u].odds}%`,color:"primary"},`eq-calc-l${g}-g${u}`)),e.jsx(B,{label:`max ${S}`,color:"warning"})]},`equation-${l}`))})]})},Se=(n,s,o,A)=>{const x=[],w=[],C=[];A.forEach(({pairs:m},p)=>{w[p]=0,C[p]=n,m.forEach((f,c)=>{(c<0||f<0||o[c][f])&&(C[p]-=1),s[c]===f&&(w[p]+=1,C[p]-=1),!x[c]&&(x[c]=[]),!x[c][f]&&(x[c][f]={odds:0,oddsWeight:0,rounds:[]}),x[c][f].rounds.push(p)})});const r={};A.forEach(({pairs:m,score:p},f)=>{m.forEach((c,S)=>{const l=x[S][c];if(o[S][c])return;if(s[S]===c||p===n){l.odds=100;return}const u=C[f]?(p-w[f])*100/C[f]:0;if(l.oddsWeight===0?l.odds=Math.floor(u):!u||!l.odds?l.odds=0:l.odds=Math.floor((l.odds*l.oddsWeight+u)/(l.oddsWeight+1)),l.oddsWeight+=1,l.rounds.length<2)return;const g=[l.rounds.reduce((i,a)=>i+a.toString(),"")];for(let i=f+1;i<l.rounds.length;i+=1)g.push(`${l.rounds[f]}${l.rounds[i]}`);g.forEach(i=>{!r[i]&&(r[i]={couples:[],score:p});let a=!0;r[i].couples.forEach(([t,j])=>{a=a&&t!==S&&j!==c}),a&&r[i].couples.push([S,c]),r[i].score=Math.min(p-w[f],r[i].score)})})});const b=[];return Object.keys(r).forEach(m=>{if(r[m].couples.length>1&&r[m].couples.length>r[m].score){const p=[];r[m].couples.forEach(([c,S])=>{p[c]=S});let f=!1;b.forEach(({pairs:c,score:S},l)=>{let u=!0,g=!0;for(let i=0;i<c.length;i+=1)p[i]!==c[i]&&(p[i]?(u=!1,g=!1):u=!1);f=f||u||g&&r[m].score>=S,u&&(b[l].score=Math.min(S,r[m].score))}),!f&&b.push({pairs:p,score:r[m].score})}}),{hist:x,tempScore:w,calculatedEquations:b}},ge=()=>{const[{matches:n,noMatch:s,roundPairings:o},A]=F(z),{ladies:x,gents:w,options:C}=V(ue),[r,b]=N.useState(0),{hist:m,tempScore:p,calculatedEquations:f}=Se(x.length,n,s,o),c=a=>{b(a)},S=a=>{const t=o[r]?{...o[r]}:{pairs:[],score:0};t.score=a;const j=[...o];j[r]=t,A({matches:n,noMatch:s,roundPairings:j})},l=(a,t)=>{const j=s.map(M=>[...M]);!j[a]&&(j[a]=[]),j[a][t]=!j[a][t],A({matches:n,noMatch:j,roundPairings:o})},u=a=>{const t=s.map(y=>[...y]);a.forEach((y,d)=>{n[d]!==y&&!s[d][y]&&(!t[d]&&(t[d]=[]),t[d][y]=!0)});const j={...o[r],score:0},M=[...o];M[r]=j,A({matches:n,noMatch:t,roundPairings:M})},g=(a,t,j)=>{const M=o[a]?{...o[a],pairs:[...o[a].pairs]}:{pairs:[],score:0};M.pairs[t]=j;const y=[...o];y[r]=M,A({matches:n,noMatch:s,roundPairings:y})},i=(a,t)=>{const j=[...n],M=s.map(h=>[...h]);!M[a]&&(M[a]=[]),j[a]=t;for(let h=0;h<w.length;h+=1)M[a][h]=h!==t;for(let h=0;h<x.length;h+=1)!M[h]&&(M[h]=[]),M[h][t]=h!==a;const y=j.reduce((h,T)=>T>=0?h+1:h,0),d=[...o];for(let h=0;h<C.length-2;h+=1){const{pairs:T,score:R}=o[h]||{pairs:[],score:y};if(!o[h]||T[a]<0||T[a]===void 0){const E={pairs:[...T],score:Math.max(R,y)};E.pairs[a]=t,d[h]=E}}A({matches:j,noMatch:M,roundPairings:d})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(pe,{onSelect:c,options:C,roundNumber:r,roundPairings:o,onBlackout:u,updateScore:S}),e.jsx("br",{}),e.jsx(xe,{gents:w,hist:m,ladies:x,matches:n,noMatch:s,options:C,roundNumber:r,roundPairings:o,updateMatch:i,updateNoMatch:l,updatePairs:g}),e.jsx(ye,{calculatedEquations:f,gents:w,hist:m,ladies:x,matches:n,noMatch:s,roundPairings:o,tempScore:p})]})},Ne=ge;export{Ne as default};
//# sourceMappingURL=index-7d39121b.js.map
