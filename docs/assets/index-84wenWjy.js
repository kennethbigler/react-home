import{S as F,Q as I,D as Y,j as e,r as B,P as V}from"./index-Ca0TYBBd.js";import{F as P,I as D,S as O}from"./Select-B7kIWgn6.js";import{M as K,P as z,S as Z}from"./Header-DcXpir9X.js";import{B as w}from"./Button-B5hWNNN2.js";import{B as _}from"./ButtonGroup-BchnT-Ue.js";import{D as Q,a as X,b as ee,c as ae}from"./DialogTitle-DpaknH9a.js";import{b as H,c as E,a as se,T as ne}from"./TableRow-5YrWSPCw.js";import{T as te}from"./TableContainer-BIOa31pa.js";import{T as oe}from"./TableHead-Ce-C98uI.js";import{S as v}from"./Stack-CBhlOsCf.js";import{C as $}from"./Chip-CJ4EYRL6.js";import{F as re}from"./FormControlLabel-CzImVEUU.js";import"./isMuiElement-DacMTm0v.js";import"./useSlotProps-BZ7OTm0s.js";import"./useThemeProps-t7ql8oIh.js";const J=[{ladies:["Amber","Ashleigh","Brittany","Coleysia","Jacy","Jessica","Kayla","Paige","Shanley","Simone"],gents:["Adam","Dre","Chris S","Chris T","Dillan","Ethan","Joey","JJ","Ryan","Wes"]},{ladies:["Alexandria","Ashley","Briana","Christina","Ellie","Jasmine","Jenni","Jessica","Paris","Shelby","Tyler"],gents:["Alex","Anthony","Brandon","Curtis","Dario","Garland","John","Layton","Nathan","Tyler"]},{ladies:["Amanda","Britni","Chelsey","Hannah","Kayla","Kiki","Cheyenne","Melanie","Rashida","Stacey"],gents:["Alec","Austin","Chuck","Connor","Devin","Hunter","Mike","Nelson","Tyler","Zak"]},{ladies:["Alyssa","Camille","Emma","Francesca","Julia","Kaylen","Mikala","Nicole","Tori","Victoria"],gents:["Asaf","Cam","Cameron","Giovanni","John","Morgan","Prosper","Sam","Stephen","Tyler"]},{ladies:["Alicia","Carolina","Cas","Gianna","Hannah","Kam","Kari","Kathryn","Shannon","Taylor","Tyranny"],gents:["Andre","Derrick","Edward","Hayden","Jaylan","Joey","Michael","Mike","Osvaldo","Ozzy","Tyler"]},{ladies:["Alexis","Alivia","Audrey","Diandra","Geles","Jada","Keyana","Nicole","Nurys","Uche","Zoe"],gents:["Anthony","Clinton","David","Dimitri","Ethan","Joe","Kareem","Keith","Malcolm","Michael","Tyler"]},{ladies:["Asia","Bria","Cali","Jasmine","Kayla","Kenya","Lauren","Maria","Morgan","Nutsa","Samantha"],gents:["Andrew","Brett","Cam","Daniel","Kwasi","Lewis","Moe","Shamoy","Tevin","Tomas","Zak"]},{ladies:["Anissa","Brooke","CC","Courtney","Danielle","Dew","Jordanne","Julia-Ruth","Mijntje","Roz","Taylor"],gents:["Aqel","Brendan","Clay","Eduardo","Hamudi","Leo","Michael","Nathan","Ollie","Samuel","Will"]},{ladies:["Libby","Olivia","Robyn","Sapphia","Shae","Taofiqah","Tasha","Thea","Therese","Vic"],gents:["Cacherel","Charlie","Ismail","Jack","Jacob","Jordan","Josh","Joshy","Juan","Theo"]}],ce=["Season 1","Season 2","Season 3","Season 4","Season 5","Season 6","Season 7","Season 9","UK 1"],W=["Matchup 1","Matchup 2","Matchup 3","Matchup 4","Matchup 5","Matchup 6","Matchup 7","Matchup 8","Matchup 9","Matchup 10","Truth Booth"],U=7,L=(s=U)=>({matches:J[s].ladies.map(()=>-1),noMatch:J[s].ladies.map(()=>J[s].gents.map(()=>!1)),roundPairings:[]}),k=I("aytoSeasonAtom",U),G=I("areYouTheOneAtom",L()),le=F(s=>s(k),(s,o,a)=>{o(k,a),o(G,L(a))}),ie=F(s=>{const o=s(k);return[...W],{...J[o],options:W}}),he=s=>isNaN(s)?-1:s,de={display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1em",alignItems:"center"},ue=({options:s,onSelect:o,ri:a,roundPairings:j,onBlackout:m,updateScore:f})=>{var t;const[d,n]=Y(le),A=he((t=j[a])==null?void 0:t.score),u=y=>n(Number(y.target.value)),l=y=>o(Number(y.target.value)),c=()=>m(j[a].pairs),h=()=>f(A+1),r=()=>f(A-1);return e.jsxs("div",{style:de,children:[e.jsxs(P,{children:[e.jsx(D,{id:"season-select",children:"Season"}),e.jsx(O,{labelId:"season-select",label:"Season",value:d,onChange:u,children:ce.map((y,g)=>e.jsx(K,{value:g,children:y},y))})]}),e.jsxs(P,{children:[e.jsx(D,{id:"matchup-select",children:"Matchup"}),e.jsx(O,{labelId:"matchup-select",label:"Matchup",value:a,onChange:l,children:s.map((y,g)=>e.jsx(K,{value:g,children:y},y))})]}),a<s.length-1&&e.jsxs(e.Fragment,{children:[e.jsx(w,{variant:"outlined",color:"secondary",onClick:c,children:"Blackout"}),e.jsxs("div",{children:[e.jsxs("p",{style:{display:"inline",marginRight:15},children:["Score: ",A]}),e.jsxs(_,{variant:"contained","aria-label":"modify matchup score",children:[e.jsx(w,{"aria-label":"decrement score",onClick:r,children:"-"}),e.jsx(w,{"aria-label":"increment score",onClick:h,children:"+"})]})]})]})]})},pe=({open:s,content:o,onMatch:a,onNoMatch:j,onCancel:m})=>e.jsxs(Q,{onClose:m,open:s,children:[e.jsx(X,{children:"TB Result"}),e.jsxs(ee,{children:["Are ",o," a perfect match?"]}),e.jsxs(ae,{children:[e.jsx(w,{onClick:a,children:"Match"}),e.jsx(w,{onClick:j,color:"error",children:"No Match"}),e.jsx(w,{onClick:m,color:"warning",children:"Cancel"})]})]}),me=(s,o,a,j,m)=>{let f="outlined",d="primary";return(s&&(o||a)||j||s&&m>0)&&(f="contained"),o?d="error":a&&(d="success"),{variant:f,color:d,histValue:m}},fe=({gents:s,histLi:o,lMatch:a,noMatchLi:j,isTB:m,lPair:f,ladyName:d,onClick:n})=>e.jsxs(H,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(E,{component:"th",scope:"row",children:d}),s.map((A,u)=>{let l=0,c=0;if(o&&o[u])l=o[u].rounds.length,c=o[u].odds;else if(!j[u]){const t=j.reduce((y,g)=>g?y:y+1,0);c=Math.floor(1/t*100)}const{variant:h,color:r}=me(m,j&&j[u],a===u,f===u,l);return e.jsx(E,{sx:{padding:0,textAlign:"center"},children:e.jsxs(w,{variant:h,color:r,onClick:n(u),children:[c,"%"]})},A)})]}),xe=({gents:s,hist:o,ladies:a,matches:j,noMatch:m,options:f,ri:d,roundPairings:n,updateMatch:A,updateNoMatch:u,updatePairs:l})=>{const c=f.length===d+1,[h,r]=B.useState(!1),[t,y]=B.useState([-1,-1]),g=(x,S)=>T=>()=>{var p;if(c){y([S,T]),r(!0);return}const b=(p=n[x])==null?void 0:p.pairs.indexOf(T);b!==-1&&l(x,b,-1),l(x,S,T)},M=()=>{r(!1)},i=()=>{const[x,S]=t;A(x,S),M()},C=()=>{const[x,S]=t;u(x,S),M()};return e.jsxs(se,{children:[a.map((x,S)=>{var T;return e.jsx(fe,{gents:s,histLi:o[S],noMatchLi:m[S],isTB:c,ladyName:x,lMatch:j[S],lPair:(T=n[d])==null?void 0:T.pairs[S],onClick:g(d,S)},`ayto-table-row-${x}`)}),e.jsx(pe,{open:h,content:`${a[t[0]]} & ${s[t[1]]}`,onCancel:M,onMatch:i,onNoMatch:C})]})},je=({gents:s,...o})=>e.jsx(te,{component:z,children:e.jsxs(ne,{"aria-label":"are you the one data entry table",children:[e.jsx(oe,{children:e.jsxs(H,{children:[e.jsx(E,{children:"-"}),s.map(a=>e.jsx(E,{sx:{paddingLeft:0,paddingRight:0,textAlign:"center"},children:a},a))]})}),e.jsx(xe,{gents:s,...o})]})}),ye=({gents:s,ladies:o,matches:a,noMatch:j,pairs:m,score:f,ri:d,hist:n,tempScore:A,showAll:u})=>{const l=[];let c=0,h=0;return m.forEach((r,t)=>{if(t<0||r<0||t===void 0||r===void 0||!u&&(j[t][r]||a[t]===r))return;const y=n[t][r].rounds.length>1;let g=y?"primary":"default";j[t][r]?g="error":a[t]===r&&(g="success");const M=`${o[t]}-${s[r]}${y?` ${n[t][r].rounds.length}`:""} - ${n[t][r].odds}%`,i=e.jsx($,{label:M,color:g},`match-r${d}-l${t}-g${r}`);switch(g){case"success":h+=1,l.unshift(i);return;case"error":c+=1,l.push(i);return;case"primary":l.splice(h,0,i),h+=1;return;default:l.splice(l.length-c,0,i)}}),l.every(r=>r===null)?null:e.jsxs(v,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Matchup ",d+1]}),l,e.jsx($,{label:u?f:f-A[d],color:"warning"})]})},Se=({cei:s,pairs:o,score:a,gents:j,ladies:m,hist:f})=>e.jsxs(v,{spacing:1,children:[e.jsxs("h2",{style:{textAlign:"center"},children:["Calculated ",s+1]}),o.map((d,n)=>e.jsx($,{label:`${m[n]}-${j[d]} ${f[n][d].rounds.length} - ${f[n][d].odds}%`,color:"primary"},`calc-l${n}-g${d}`)),e.jsx($,{label:`max ${a}`,color:"warning"})]}),Me=({gents:s,ladies:o,matches:a,noMatch:j,roundPairings:m,hist:f,tempScore:d,calculatedEquations:n})=>{const[A,u]=B.useState(!1),l=c=>{u(c.target.checked)};return e.jsxs("div",{children:[e.jsxs(v,{direction:"row",justifyContent:"space-between",children:[e.jsx("h1",{children:"Analysis"}),e.jsx(re,{control:e.jsx(Z,{checked:A,onChange:l}),label:"Show All Couples"})]}),e.jsx(v,{spacing:1,direction:"row-reverse",flexWrap:"wrap-reverse",justifyContent:"flex-end",children:m.map(({pairs:c,score:h},r)=>e.jsx(ye,{gents:s,ladies:o,matches:a,noMatch:j,pairs:c,score:h,ri:r,hist:f,tempScore:d,showAll:A},`matched-stack-${r}`))}),n.length>0&&e.jsx("hr",{"aria-hidden":!0}),e.jsx(v,{spacing:1,direction:"row",flexWrap:"wrap",children:n.map(({pairs:c,score:h},r)=>e.jsx(Se,{cei:r,pairs:c,score:h,gents:s,ladies:o,hist:f},`calculated-stack-${r}`))})]})},Ce=(s,o,a,j)=>{const m=[],f=[],d=[];j.forEach(({pairs:u},l)=>{f[l]=0,d[l]=s,u.forEach((c,h)=>{(h<0||c<0||a[h][c])&&(d[l]-=1),o[h]===c&&(f[l]+=1,d[l]-=1),m[h]||(m[h]=[]),m[h][c]||(m[h][c]={odds:0,oddsWeight:0,rounds:[]}),m[h][c].rounds.push(l)})});const n={};j.forEach(({pairs:u,score:l},c)=>{u.forEach((h,r)=>{const t=m[r][h];if(a[r][h])return;if(o[r]===h||l===s){t.odds=100;return}const y=d[c]?(l-f[c])*100/d[c]:0;if(t.oddsWeight===0?t.odds=Math.floor(y):!y||!t.odds?t.odds=0:t.odds=Math.floor((t.odds*t.oddsWeight+y)/(t.oddsWeight+1)),t.oddsWeight+=1,t.rounds.length<2)return;const g=[t.rounds.reduce((M,i)=>M+i.toString(),"")];for(let M=c+1;M<t.rounds.length;M+=1)g.push(`${t.rounds[c]}${t.rounds[M]}`);g.forEach(M=>{n[M]||(n[M]={couples:[],score:l});let i=!0;n[M].couples.forEach(([C,x])=>{i=i&&C!==r&&x!==h}),i&&n[M].couples.push([r,h]),n[M].score=Math.min(l-f[c],n[M].score)})})});const A=[];return Object.keys(n).forEach(u=>{if(n[u].couples.length>1&&n[u].couples.length>n[u].score){const l=[];n[u].couples.forEach(([h,r])=>{l[h]=r});let c=!1;A.forEach(({pairs:h,score:r},t)=>{let y=!0,g=!0;for(let M=0;M<h.length;M+=1)l[M]!==h[M]&&(l[M]?(y=!1,g=!1):y=!1);c=c||y||g&&n[u].score>=r,y&&(A[t].score=Math.min(r,n[u].score))}),c||A.push({pairs:l,score:n[u].score})}}),{hist:m,tempScore:f,calculatedEquations:A}},Oe=()=>{const[{matches:s,noMatch:o,roundPairings:a},j]=Y(G),{ladies:m,gents:f,options:d}=V(ie),[n,A]=B.useState(0),{hist:u,tempScore:l,calculatedEquations:c}=Ce(m.length,s,o,a),h=i=>{A(i)},r=i=>{const C=a[n]?{...a[n]}:{pairs:[],score:0};C.score=i;const x=[...a];x[n]=C,j({matches:s,noMatch:o,roundPairings:x})},t=(i,C)=>{const x=o.map(S=>[...S]);x[i]||(x[i]=[]),x[i][C]=!x[i][C],j({matches:s,noMatch:x,roundPairings:a})},y=i=>{const C=o.map(b=>[...b]);let x=0;i.forEach((b,p)=>{s[p]===b?x+=1:o[p][b]||(C[p]||(C[p]=[]),C[p][b]=!0)});const S={...a[n],score:x},T=[...a];T[n]=S,j({matches:s,noMatch:C,roundPairings:T})},g=(i,C,x)=>{const S=a[i]?{...a[i],pairs:[...a[i].pairs]}:{pairs:[],score:0};S.pairs[C]=x;const T=[...a];T[n]=S,j({matches:s,noMatch:o,roundPairings:T})},M=(i,C)=>{const x=[...s],S=o.map(p=>[...p]);S[i]||(S[i]=[]),x[i]=C;for(let p=0;p<f.length;p+=1)S[i][p]=p!==C;for(let p=0;p<m.length;p+=1)S[p]||(S[p]=[]),S[p][C]=p!==i;const T=x.reduce((p,R)=>R>=0?p+1:p,0),b=[...a];for(let p=0;p<d.length-1;p+=1){const{pairs:R,score:q}=a[p]||{pairs:[],score:T};if(!a[p]||R[i]<0||R[i]===void 0){const N={pairs:[...R],score:Math.max(q,T)};N.pairs[i]=C,b[p]=N}}j({matches:x,noMatch:S,roundPairings:b})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Are You The One?"}),e.jsx(ue,{onSelect:h,options:d,ri:n,roundPairings:a,onBlackout:y,updateScore:r}),e.jsx("br",{}),e.jsx(je,{gents:f,hist:u,ladies:m,matches:s,noMatch:o,options:d,ri:n,roundPairings:a,updateMatch:M,updateNoMatch:t,updatePairs:g}),e.jsx(Me,{calculatedEquations:c,gents:f,hist:u,ladies:m,matches:s,noMatch:o,roundPairings:a,tempScore:l})]})};export{Oe as default};
//# sourceMappingURL=index-84wenWjy.js.map
