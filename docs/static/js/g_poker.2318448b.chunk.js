(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[11],{312:function(e,a,n){"use strict";n.d(a,"a",(function(){return N}));var t=n(0),r=n.n(t),c=n(1),s=n(757),i=n(175),l=n.n(i),d=n(163),o=n.n(d),u=n(55),m=n.n(u),p=n(137),k=n.n(p),h=n(707),b=n(251),f=n(411),y=n.n(f);var g={cardFace:{backgroundColor:"white",borderRadius:5,cursor:"pointer",display:"inline-block",fontWeight:"bold",height:78,margin:5,padding:3,width:50},cardTitle:{textAlign:"left"},suit:{margin:"auto",marginTop:5,textAlign:"center",width:"100%"}};var v=r.a.memo(e=>{const a=e.dropped,n=e.suit,t=e.name,s=e.cardHandler,i=e.playerNo,l=e.handNo,d=e.cardNo,o=r.a.useCallback(()=>{s&&s(i,l,d)},[s,d,l,i]),u={color:"\u2663"===n||"\u2660"===n?"black":k.a[500],backgroundColor:a?k.a[100]:"white"};return r.a.createElement("div",{style:Object(c.a)({},g.cardFace,{},u),onClick:o,role:"main"},r.a.createElement("div",{style:g.cardTitle},t+n),r.a.createElement(h.a,{variant:"h4",style:Object(c.a)({},g.suit,{},u)},n))});const O={fontWeight:"bold",marginTop:"0.5em"},x={fontWeight:"normal",marginTop:"0.5em"};var E=e=>{const a=e.cardHandler,n=e.cardsToDiscard,t=e.hand,s=e.handNo,i=e.isBlackJack,l=e.isHandTurn,d=e.isMultiHand,o=e.isPlayerTurn,u=e.playerNo,m=r.a.useMemo(()=>o&&(!d||d&&l)?Object(c.a)({},O,{color:y.a[700]}):x,[o,d,l]),p=t.weight||0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"h4",style:m},i&&"".concat(p>21?"Bust":"Hand",": ").concat(p)),t.cards.map((e,t)=>{const c=n.includes(t);return r.a.createElement(v,{key:e.name+e.suit,cardHandler:a,cardNo:t,dropped:c,handNo:s,name:e.name,playerNo:u,suit:e.suit})}))};var H={player:{borderRadius:5,display:"inline-block",margin:10,padding:20},width:{minWidth:"100px"}};var w=e=>{const a=e.betHandler,n=e.cardHandler,t=e.cardsToDiscard,i=e.hideHands,d=e.isBlackJack,u=e.player,p=e.playerNo,f=e.turn,y=!!f&&p===f.player,g=u.hands.length>1,v=!!i&&d&&0!==u.id&&!u.isBot,O=Math.max(Math.min(u.money,5),0),x=Math.max(Math.min(u.money,100),10),w=r.a.useCallback((e,n)=>{a&&a(u.id,e,n)},[a,u.id]);let C=y?{background:l.a[200]}:{};const j=y?{fontWeight:"bold"}:{fontWeight:"normal"};return"win"===u.status&&(C={background:o.a[300]}),"draw"===u.status&&(C={background:m.a[300]}),"lose"===u.status&&(C={background:k.a[300]}),r.a.createElement(b.a,{style:Object(c.a)({},H.player,{},C)},r.a.createElement(h.a,{variant:"h4",style:Object(c.a)({},j)},"".concat(u.name,": $").concat(u.money)),v&&r.a.createElement(s.a,{max:x,min:O,onChange:w,step:5,style:H.width,value:u.bet}),d&&0!==u.id&&r.a.createElement(h.a,{variant:"h5"},"Bet: $".concat(u.bet)),u.hands.map((e,a)=>{const c=!!f&&f.hand===a;return r.a.createElement("div",{key:"hand".concat(a)},!i&&r.a.createElement(E,{cardHandler:n,cardsToDiscard:t,hand:e,handNo:a,isBlackJack:d,isHandTurn:c,isMultiHand:g,isPlayerTurn:y,playerNo:p}))}))};var C=e=>{const a=e.betHandler,n=e.cardHandler,t=e.cardsToDiscard,c=e.hideHands,s=e.isBlackJack,i=e.players,l=e.turn;return r.a.createElement(r.a.Fragment,null,i.map((e,i)=>r.a.createElement(w,{key:"player".concat(i),betHandler:a,cardHandler:n,cardsToDiscard:t,hideHands:c,isBlackJack:s,player:e,playerNo:i,turn:l})))},j=n(702);const T={margin:12};var F=r.a.memo(({onClick:e,name:a})=>r.a.createElement(j.a,{color:"primary",onClick:()=>e(a),style:T,variant:"contained"},a));var B=({gameFunctions:e,onClick:a})=>r.a.createElement("div",null,e.map(e=>r.a.createElement(F,{key:e,onClick:a,name:e})));const D=e=>{const a=e.betHandler,n=e.cardClickHandler,t=e.cardsToDiscard,c=e.gameFunctions,s=e.gameOver,i=e.hideHands,l=e.isBlackJack,d=e.players,o=e.turn,u=e.onClick,m=r.a.useMemo(()=>d.slice(0,o.player+1),[d,o.player]),p=r.a.useMemo(()=>d.slice(o.player+1),[d,o.player]),k=r.a.useMemo(()=>i||!1!==s?d:d.slice(o.player,o.player+1),[i,s,d,o.player]);return r.a.createElement(r.a.Fragment,null,l&&!i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{players:m,betHandler:a,cardHandler:n,cardsToDiscard:t,hideHands:i,isBlackJack:l,turn:o}),r.a.createElement(B,{gameFunctions:c,onClick:u}),r.a.createElement(C,{players:p,betHandler:a,cardHandler:n,cardsToDiscard:t,hideHands:i,isBlackJack:l,turn:{player:-1,hand:-1}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{players:k,betHandler:a,cardHandler:n,cardsToDiscard:t,hideHands:i,isBlackJack:l,turn:o}),r.a.createElement(B,{gameFunctions:c,onClick:u})))};D.defaultProps={cardsToDiscard:[],gameFunctions:[],gameOver:!1,hideHands:!1,isBlackJack:!0};var N=D},742:function(e,a,n){"use strict";n.r(a),n.d(a,"default",(function(){return x}));var t=n(1),r=n(0),c=n.n(r),s=n(707),i=n(30),l=n(312),d=n(60),o=n(7),u=n.n(o),m=n(10),p=n(58),k=n(9),h=n(20);const b=(e,a)=>{if(a.includes(4))return 7;const n=a.includes(3),t=a.indexOf(2),r=-1!==t;if(n&&r)return 6;if(n)return 3;if(r&&a.includes(2,t+1))return 2;if(r)return 1;const c=a.lastIndexOf(1)-a.indexOf(1)===4||a[12]&&a[0]&&a[1]&&a[2]&&a[3];let s=!0;for(let i=0;i<e.length;i+=1)if(e[i].suit!==e[0].suit){s=!1;break}return c&&s?8:s?5:c?4:0},f=e=>{const a=[0,0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach(e=>{a[(e.weight||2)-2]+=1}),a},y=e=>{const a=f(e),n=b(e,a),t=["0","0","0","0","0"];let r=0,c=4,s=0,i=-1;for(;r<5;){const e=a.indexOf(c,i+1);-1===e?(c-=1,i=-1):(t[s]=e.toString(14),s+=1,r+=c,i=e)}return"".concat(n).concat(t.reduce((e,a)=>"".concat(e).concat(a)))},g=(e,a,n)=>{const t=[],r=[a.indexOf(1)];for(let c=1;c<e;c+=1)r[c]=a.indexOf(1,r[c-1]+1);for(let c=0;c<n.length;c+=1)for(let e=0;e<r.length;e+=1)if(n[c].weight-2===r[e]){t.push(c);break}return t};var v=n(2);var O=(e,a,n,t,r,s)=>{const i=c.a.useCallback(Object(m.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(Object(d.d)());case 2:case"end":return a.stop()}}),a)}))),[e]),l=c.a.useCallback(function(){var a=Object(m.a)(u.a.mark((function a(n,t){var r,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.id,c=t.hands,a.next=3,e(Object(k.g)(c,r,n));case 3:case"end":return a.stop()}}),a)})));return function(e,n){return a.apply(this,arguments)}}(),[e]),o=c.a.useCallback(function(){var e=Object(m.a)(u.a.mark((function e(a){var n,t,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.hands[0].cards,t=f(n),r=b(n,t),e.t0=r,e.next=0===e.t0?6:1===e.t0?10:2===e.t0||3===e.t0?14:(4===e.t0||5===e.t0||6===e.t0||7===e.t0||e.t0,18);break;case 6:return c=t.lastIndexOf(1)>=11?g(4,t,n):[0,1,2,3,4],e.next=9,l(c,a);case 9:return e.abrupt("break",19);case 10:return c=g(3,t,n),e.next=13,l(c,a);case 13:return e.abrupt("break",19);case 14:return c=g(1,t,n),e.next=17,l(c,a);case 17:case 18:return e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[l]),O=c.a.useCallback(Object(m.a)(u.a.mark((function a(){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(Object(d.c)());case 2:return a.next=4,Object(p.a)(n,function(){var e=Object(m.a)(u.a.mark((function e(a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=n&&n<5)){e.next=3;break}return e.next=3,o(a);case 3:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}());case 4:r={val:0,id:0},n.forEach(e=>{if(0===e.id||e.id>5)return;const a=parseInt(y(e.hands[0].cards),14);a>r.val&&(r={val:a,id:e.id})}),n.forEach(a=>{0===a.id||a.id>5||(a.id===r.id?e(Object(k.d)(a.id,"win",20)):e(Object(k.d)(a.id,"lose",-5)))});case 7:case"end":return a.stop()}}),a)}))),[o,e,n,t]),x=c.a.useCallback(Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n[t]||{isBot:!1},r||s||!a.isBot){e.next=4;break}return e.next=4,O();case 4:case"end":return e.stop()}}),e)}))),[O,n,s,r,t]),E=c.a.useCallback(()=>{e(Object(d.e)(n))},[e,n]),H=c.a.useCallback(()=>{e(Object(d.f)()),h.a.shuffle().then(()=>{Object(p.a)(n,function(){var a=Object(m.a)(u.a.mark((function a(n){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(0!==n.id&&n.id<=5)){a.next=3;break}return a.next=3,e(Object(k.c)(n.id,5));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())})},[e,n]),w=c.a.useCallback(()=>{l(a,n[t]),e(Object(d.b)())},[l,e,n,t,a]);return{checkUpdate:x,handleGameFunctionClick:c.a.useCallback(e=>{switch(e){case v.d.DISCARD_CARDS:w();break;case v.d.END_TURN:i();break;case v.d.NEW_GAME:E();break;case v.d.START_GAME:H();break;default:console.error("Unknown Game Function: ",e)}},[i,w,E,H])}};var x=()=>{const e=Object(i.c)(e=>Object(t.a)({turn:e.turn,players:e.players},e.poker)),a=e.turn,n=e.players,r=e.cardsToDiscard,o=e.gameFunctions,u=e.gameOver,m=e.hideHands,p=Object(i.b)(),k=c.a.useCallback((e,a,n)=>{const t=[...r],c=t.indexOf(n);-1===c?t.push(n):t.splice(c,1),p(Object(d.g)(t))},[r,p]),h=O(p,r,n,a.player,m,u),b=h.checkUpdate,f=h.handleGameFunctionClick;return b(),c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{variant:"h2",gutterBottom:!0},"5 Card Draw Poker"),c.a.createElement(l.a,{cardClickHandler:k,cardsToDiscard:r,gameFunctions:o,onClick:f,gameOver:u,hideHands:m,isBlackJack:!1,players:n,turn:a}))}}}]);
//# sourceMappingURL=g_poker.2318448b.chunk.js.map