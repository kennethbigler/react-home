(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[19],{697:function(e,t,a){"use strict";a.r(t);var r=a(49),n=a(0),i=a.n(n),o=a(31),c=a(185),s=a(388),u=a(228),l=a(654),m=a(629),d=a(653),p=a(201),v=a(202),b=a.n(v),g=a(203),f=i.a.memo((function(){return i.a.createElement("div",null,"Loading ...")}));function h(){var e=Object(p.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return h=function(){return e},e}var E=b()(h()),w=a(9),y=a(1),S=a(681),O=a(301),j=function(e){var t=e.children,a=Object(O.a)(e,["children"]);return i.a.createElement("a",Object.assign({},a,{target:"_blank",rel:"noopener noreferrer"}),t)},R=function(e){var t=e.descriptionHTML,a=e.primaryLanguage,r=e.owner;return i.a.createElement("div",{className:"RepositoryItem-description"},i.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),i.a.createElement("div",{className:"RepositoryItem-description-details"},a&&i.a.createElement(S.a,{display:"inline"},"Language:"," ",a.name),r&&i.a.createElement(S.a,{display:"inline"},"Owner:"," ",i.a.createElement("a",{href:r.url},r.login))))},C=a(676);function I(){var e=Object(p.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return I=function(){return e},e}var M=b()(I()),k="SUBSCRIBED",_="UNSUBSCRIBED",N=function(e){return e===k},z=function(e,t){var a=t.data;if(a){var r=a.updateSubscription.subscribable,n=r.id,i=r.viewerSubscription,o=e.readFragment({id:"Repository:".concat(n),fragment:E});if(o){var c=o.watchers.totalCount;c=i===k?c+1:c-1,e.writeFragment({id:"Repository:".concat(n),fragment:E,data:Object(y.a)({},o,{watchers:Object(y.a)({},o.watchers,{totalCount:c})})})}}},L=function(e){var t=e.id,a=e.watchers,n=e.viewerSubscription,o=Object(g.a)(M,{variables:{id:t,viewerSubscription:N(n)?_:k},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:N(n)?_:k}}},update:z}),c=Object(r.a)(o,1)[0];return i.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:c,variant:"outlined",color:"primary"},N(n)?"Unwatch":"Watch"," (".concat(a.totalCount,")"))};function F(){var e=Object(p.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return F=function(){return e},e}var H=b()(F()),T=function(e,t){var a=t.data;if(a){var r=a.addStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:E});if(n){var i=n.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(r),fragment:E,data:Object(y.a)({},n,{stargazers:Object(y.a)({},n.stargazers,{totalCount:i})})})}}},$=function(e){var t=e.id,a=e.stargazers,n=Object(g.a)(H,{variables:{id:t},update:T,optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}}}),o=Object(r.a)(n,1)[0];return i.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:o,variant:"outlined",color:"primary"},"Star (".concat(a.totalCount,")"))};function D(){var e=Object(p.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return D=function(){return e},e}var x=b()(D()),B=function(e,t){var a=t.data;if(a){var r=a.removeStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:E});if(n){var i=n.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(r),fragment:E,data:Object(y.a)({},n,{stargazers:Object(y.a)({},n.stargazers,{totalCount:i})})})}}},Q=function(e){var t=e.id,a=e.stargazers,n=Object(g.a)(x,{variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:B}),o=Object(r.a)(n,1)[0];return i.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:o,variant:"outlined",color:"primary"},"UnStar (".concat(a.totalCount,")"))},U=function(e){var t=e.id,a=e.name,r=e.url,n=e.descriptionHTML,o=e.primaryLanguage,c=e.owner,s=e.stargazers,u=e.watchers,l=e.viewerSubscription,m=e.viewerHasStarred;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"RepositoryItem-title"},i.a.createElement(S.a,{variant:"h3"},i.a.createElement(j,{href:r},a)),m?i.a.createElement(Q,{id:t,stargazers:s}):i.a.createElement($,{id:t,stargazers:s}),i.a.createElement(L,{id:t,watchers:u,viewerSubscription:l})),i.a.createElement(R,{descriptionHTML:n,primaryLanguage:o,owner:c}))},P=function(e){var t=e.loading,a=e.hasNextPage,r=e.variables,n=e.updateQuery,o=e.fetchMore,c=e.children;return i.a.createElement("div",{className:"FetchMore"},t?i.a.createElement(f,null):a&&i.a.createElement(C.a,{className:"FetchMore-button",onClick:function(){return o({variables:r,updateQuery:n})},variant:"outlined",color:"primary"},"More"," ",c))},W=function(e,t){var a=t.fetchMoreResult;return a?Object(y.a)({},e,{viewer:Object(y.a)({},e.viewer,{repositories:Object(y.a)({},e.viewer.repositories,{},a.viewer.repositories,{edges:[].concat(Object(w.a)(e.viewer.repositories.edges),Object(w.a)(a.viewer.repositories.edges))})})}):e},q=function(e){var t=e.repositories,a=e.loading,r=e.fetchMore;return i.a.createElement(i.a.Fragment,null,t.edges.map((function(e){var t=e.node;return i.a.createElement("div",{key:t.id,className:"RepositoryItem"},i.a.createElement(U,t))})),i.a.createElement(P,{loading:a,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:W,fetchMore:r},"Repositories"))},A=function(e){var t=e.error;return i.a.createElement("div",null,i.a.createElement("small",null,t?t.toString():"Something Went Wrong"))};function G(){var e=Object(p.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var J=b()(G(),E),Y=i.a.memo((function(){var e=Object(g.b)(J),t=e.error,a=e.data,r=e.loading,n=e.fetchMore;if(t||!a)return i.a.createElement(A,{error:t});var o=a.viewer;return r&&!o?i.a.createElement(f,null):i.a.createElement(q,{loading:r,repositories:o.repositories,fetchMore:n})})),Z=a(69),K=a(724),V=i.a.memo((function(e){var t=e.authToken,a=e.onChange;return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{variant:"h2"},"GraphQL Demo"),i.a.createElement(K.a,{label:"Authorization Code",placeholder:"some 32 character string from github",value:t,onChange:a,style:{margin:"20px 0 20px 0"},fullWidth:!0}))})),X=i.a.memo((function(){return i.a.createElement(S.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',i.a.createElement("br",null),"This can be done in the Developer settings on GitHub.")})),ee=Object(m.a)((function(e){e.graphQLErrors,e.networkError})),te=new d.a,ae=i.a.memo((function(){var e=Object(o.c)((function(e){return e.gqlToken})),t=Object(o.b)(),a=i.a.useState(e),n=Object(r.a)(a,2),m=n[0],d=n[1],p=function(e){var a=e.target.value;t(Object(Z.b)(a)),d(a)};if(!e)return i.a.createElement(i.a.Fragment,null,i.a.createElement(V,{authToken:m,onChange:p}),i.a.createElement(X,null));var v=new l.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(e)}}),b=u.a.from([ee,v]),g=new s.a({link:b,cache:te});return i.a.createElement(c.a,{client:g},i.a.createElement(V,{authToken:m,onChange:p}),i.a.createElement(Y,null))}));a.d(t,"default",(function(){return ae}))}}]);
//# sourceMappingURL=r_graphql.b5faec80.chunk.js.map