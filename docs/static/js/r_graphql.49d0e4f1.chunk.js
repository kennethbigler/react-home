(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[22],{798:function(e,t,r){"use strict";r.r(t);var n=r(74),a=r(0),o=r.n(a),i=r(40),c=r(18),s=r(335),u=r(507),l=r(373),p=r(760),m=r(731),d=r(759),b=r(351),f=r(352),g=r.n(f),v=r(353),y=o.a.memo((function(){return o.a.createElement("div",null,"Loading ...")})),O=r(14),h=r(17),w=r(31),j=r.n(w),E=r(782),S=r(431),P=function(e){var t=e.children,r=Object(S.a)(e,["children"]);return o.a.createElement("a",Object.assign({},r,{target:"_blank",rel:"noopener noreferrer"}),t)},R=function(e){var t=e.descriptionHTML,r=e.primaryLanguage,n=e.owner;return o.a.createElement("div",{className:"RepositoryItem-description"},o.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),o.a.createElement("div",{className:"RepositoryItem-description-details"},r&&o.a.createElement(E.a,{display:"inline"},"Language:"," ",r.name),n&&o.a.createElement(E.a,{display:"inline"},"Owner:"," ",o.a.createElement("a",{href:n.url},n.login))))},C=r(777);function k(){var e=Object(b.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return k=function(){return e},e}var D=g()(k());function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach((function(t){Object(h.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(){var e=Object(b.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return _=function(){return e},e}var N=g()(_()),T="SUBSCRIBED",z="UNSUBSCRIBED",L=function(e){return e===T},F=function(e,t){var r=t.data;if(r){var n=r.updateSubscription.subscribable,a=n.id,o=n.viewerSubscription,i=e.readFragment({id:"Repository:".concat(a),fragment:D});if(i){var c=i.watchers.totalCount;c=o===T?c+1:c-1,e.writeFragment({id:"Repository:".concat(a),fragment:D,data:M({},i,{watchers:M({},i.watchers,{totalCount:c})})})}}},H=function(e){var t=e.id,r=e.watchers,a=e.viewerSubscription,i=Object(v.a)(N,{variables:{id:t,viewerSubscription:L(a)?z:T},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:L(a)?z:T}}},update:F}),c=Object(n.a)(i,1)[0];return o.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:c,variant:"outlined",color:"primary"},L(a)?"Unwatch":"Watch"," (".concat(r.totalCount,")"))};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(r,!0).forEach((function(t){Object(h.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(){var e=Object(b.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return A=function(){return e},e}var B=g()(A()),q=function(e,t){var r=t.data;if(r){var n=r.addStar.starrable.id,a=e.readFragment({id:"Repository:".concat(n),fragment:D});if(a){var o=a.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(n),fragment:D,data:x({},a,{stargazers:x({},a.stargazers,{totalCount:o})})})}}},Q=function(e){var t=e.id,r=e.stargazers,a=Object(v.a)(B,{variables:{id:t},update:q,optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}}}),i=Object(n.a)(a,1)[0];return o.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary"},"Star (".concat(r.totalCount,")"))};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(r,!0).forEach((function(t){Object(h.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(){var e=Object(b.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return G=function(){return e},e}var J=g()(G()),Y=function(e,t){var r=t.data;if(r){var n=r.removeStar.starrable.id,a=e.readFragment({id:"Repository:".concat(n),fragment:D});if(a){var o=a.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(n),fragment:D,data:W({},a,{stargazers:W({},a.stargazers,{totalCount:o})})})}}},Z=function(e){var t=e.id,r=e.stargazers,a=Object(v.a)(J,{variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:Y}),i=Object(n.a)(a,1)[0];return o.a.createElement(C.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary"},"UnStar (".concat(r.totalCount,")"))},K=function(e){var t=e.id,r=e.name,n=e.url,a=e.descriptionHTML,i=e.primaryLanguage,c=e.owner,s=e.stargazers,u=e.watchers,l=e.viewerSubscription,p=e.viewerHasStarred;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"RepositoryItem-title"},o.a.createElement(E.a,{variant:"h3"},o.a.createElement(P,{href:n},r)),p?o.a.createElement(Z,{id:t,stargazers:s}):o.a.createElement(Q,{id:t,stargazers:s}),o.a.createElement(H,{id:t,watchers:u,viewerSubscription:l})),o.a.createElement(R,{descriptionHTML:a,primaryLanguage:i,owner:c}))},V=function(e){var t=e.loading,r=e.hasNextPage,n=e.variables,a=e.updateQuery,i=e.fetchMore,c=e.children;return o.a.createElement("div",{className:"FetchMore"},t?o.a.createElement(y,null):r&&o.a.createElement(C.a,{className:"FetchMore-button",onClick:function(){return i({variables:n,updateQuery:a})},variant:"outlined",color:"primary"},"More"," ",c))};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(r,!0).forEach((function(t){Object(h.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e,t){var r=t.fetchMoreResult;return r?ee({},e,{viewer:ee({},e.viewer,{repositories:ee({},e.viewer.repositories,{},r.viewer.repositories,{edges:[].concat(Object(O.a)(e.viewer.repositories.edges),Object(O.a)(r.viewer.repositories.edges))})})}):e},re=function(e){var t=e.repositories,r=e.loading,n=e.fetchMore;return o.a.createElement(o.a.Fragment,null,j()(t.edges,(function(e){var t=e.node;return o.a.createElement("div",{key:t.id,className:"RepositoryItem"},o.a.createElement(K,t))})),o.a.createElement(V,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:te,fetchMore:n},"Repositories"))},ne=function(e){var t=e.error;return o.a.createElement("div",null,o.a.createElement("small",null,t?t.toString():"Something Went Wrong"))};function ae(){var e=Object(b.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return ae=function(){return e},e}var oe=g()(ae(),D),ie=o.a.memo((function(){var e=Object(v.b)(oe),t=e.error,r=e.data,n=e.loading,a=e.fetchMore;if(t||!r)return o.a.createElement(ne,{error:t});var i=r.viewer;return n&&!i?o.a.createElement(y,null):o.a.createElement(re,{loading:n,repositories:i.repositories,fetchMore:a})})),ce=r(115),se=r(828),ue=o.a.memo((function(e){var t=e.authToken,r=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{variant:"h2"},"GraphQL Demo"),o.a.createElement(se.a,{label:"Authorization Code",placeholder:"some 32 character string from github",value:t,onChange:r,style:{margin:"20px 0 20px 0"},fullWidth:!0}))})),le=Object(a.memo)((function(){return o.a.createElement(E.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',o.a.createElement("br",null),"This can be done in the Developer settings on GitHub.")})),pe=Object(m.a)((function(e){e.graphQLErrors,e.networkError})),me=new d.a,de=o.a.memo((function(e){var t=e.gqlToken,r=e.stateActions,i=Object(a.useState)(t),c=Object(n.a)(i,2),m=c[0],d=c[1],b=function(e){var t=e.target.value;r.setToken(t),d(t)};if(!t)return o.a.createElement(o.a.Fragment,null,o.a.createElement(ue,{authToken:m,onChange:b}),o.a.createElement(le,null));var f=new p.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(t)}}),g=l.a.from([pe,f]),v=new u.a({link:g,cache:me});return o.a.createElement(s.a,{client:v},o.a.createElement(ue,{authToken:m,onChange:b}),o.a.createElement(ie,null))})),be=Object(i.b)((function(e){return{gqlToken:e.gqlToken}}),(function(e){return{stateActions:Object(c.bindActionCreators)({setToken:ce.b},e)}}))(de);t.default=be}}]);
//# sourceMappingURL=r_graphql.49d0e4f1.chunk.js.map