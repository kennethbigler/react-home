(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{792:function(e,t,r){"use strict";r.r(t);var a=r(81),n=r(0),i=r.n(n),o=r(39),c=r(26),s=r(365),u=r(722),l=r(424),d=r(367),m=r(756),p=r(723),v=r(754),b=r(344),g=r(345),f=r.n(g),h=r(809),E=function(){return i.a.createElement("div",null,"Loading ...")},w=r(22),y=r(80),S=r(29),R=r.n(S),O=r(779),j=r(433),C=function(e){var t=e.children,r=Object(j.a)(e,["children"]);return i.a.createElement("a",Object.assign({},r,{target:"_blank",rel:"noopener noreferrer"}),t)},k=function(e){var t=e.descriptionHTML,r=e.primaryLanguage,a=e.owner;return i.a.createElement("div",{className:"RepositoryItem-description"},i.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),i.a.createElement("div",{className:"RepositoryItem-description-details"},i.a.createElement("div",null,r&&i.a.createElement(O.a,{display:"inline"},"Language:"," ",r.name)),i.a.createElement("div",null,a&&i.a.createElement(O.a,{display:"inline"},"Owner:"," ",i.a.createElement("a",{href:a.url},a.login)))))},I=r(774);function M(){var e=Object(b.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return M=function(){return e},e}var _=f()(M());function L(){var e=Object(b.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return L=function(){return e},e}var N=f()(L()),z="SUBSCRIBED",T="UNSUBSCRIBED",H=function(e){return e===z},$=function(e,t){var r=t.data.updateSubscription.subscribable,a=r.id,n=r.viewerSubscription,i=e.readFragment({id:"Repository:".concat(a),fragment:_}),o=i.watchers.totalCount;o=n===z?o+1:o-1,e.writeFragment({id:"Repository:".concat(a),fragment:_,data:Object(y.a)({},i,{watchers:Object(y.a)({},i.watchers,{totalCount:o})})})},F=function(e){var t=e.id,r=e.watchers,a=e.viewerSubscription;return i.a.createElement(s.b,{mutation:N,variables:{id:t,viewerSubscription:H(a)?T:z},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:H(a)?T:z}}},update:$},function(e,t){return t.data,t.loading,t.error,i.a.createElement(I.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},H(a)?"Unwatch":"Watch"," (".concat(r.totalCount,")"))})};function D(){var e=Object(b.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return D=function(){return e},e}var Q=f()(D()),x=function(e,t){var r=t.data.addStar.starrable.id,a=e.readFragment({id:"Repository:".concat(r),fragment:_}),n=a.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(r),fragment:_,data:Object(y.a)({},a,{stargazers:Object(y.a)({},a.stargazers,{totalCount:n})})})},B=function(e){var t=e.id,r=e.stargazers;return i.a.createElement(s.b,{mutation:Q,variables:{id:t},optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}},update:x},function(e,t){return t.data,t.loading,t.error,i.a.createElement(I.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"Star (",r.totalCount,")")})};function A(){var e=Object(b.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return A=function(){return e},e}var U=f()(A()),P=function(e,t){var r=t.data.removeStar.starrable.id,a=e.readFragment({id:"Repository:".concat(r),fragment:_}),n=a.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(r),fragment:_,data:Object(y.a)({},a,{stargazers:Object(y.a)({},a.stargazers,{totalCount:n})})})},q=function(e){var t=e.id,r=e.stargazers;return i.a.createElement(s.b,{mutation:U,variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:P},function(e,t){return t.data,t.loading,t.error,i.a.createElement(I.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"UnStar (",r.totalCount,")")})},G=function(e){var t=e.id,r=e.name,a=e.url,n=e.descriptionHTML,o=e.primaryLanguage,c=e.owner,s=e.stargazers,u=e.watchers,l=e.viewerSubscription,d=e.viewerHasStarred;return i.a.createElement("div",null,i.a.createElement("div",{className:"RepositoryItem-title"},i.a.createElement(O.a,{variant:"h3"},i.a.createElement(C,{href:a},r)),d?i.a.createElement(q,{id:t,stargazers:s}):i.a.createElement(B,{id:t,stargazers:s}),i.a.createElement(F,{id:t,watchers:u,viewerSubscription:l})),i.a.createElement(k,{descriptionHTML:n,primaryLanguage:o,owner:c}))},J=function(e){var t=e.loading,r=e.hasNextPage,a=e.variables,n=e.updateQuery,o=e.fetchMore,c=e.children;return i.a.createElement("div",{className:"FetchMore"},t?i.a.createElement(E,null):r&&i.a.createElement(I.a,{className:"FetchMore-button",onClick:function(){return o({variables:a,updateQuery:n})},variant:"outlined",color:"primary"},"More"," ",c))},W=function(e,t){var r=t.fetchMoreResult;return r?Object(y.a)({},e,{viewer:Object(y.a)({},e.viewer,{repositories:Object(y.a)({},e.viewer.repositories,r.viewer.repositories,{edges:[].concat(Object(w.a)(e.viewer.repositories.edges),Object(w.a)(r.viewer.repositories.edges))})})}):e},Y=function(e){var t=e.repositories,r=e.loading,a=e.fetchMore;return i.a.createElement(n.Fragment,null,R()(t.edges,function(e){var t=e.node;return i.a.createElement("div",{key:t.id,className:"RepositoryItem"},i.a.createElement(G,t))}),i.a.createElement(J,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:W,fetchMore:a},"Repositories"))},Z=function(e){var t=e.error;return i.a.createElement("div",null,i.a.createElement("small",null,t.toString()))};function K(){var e=Object(b.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var V=f()(K(),_),X=function(){var e=Object(h.a)(V),t=e.error,r=e.data,a=e.loading,n=e.fetchMore;if(t)return i.a.createElement(Z,{error:t});var o=r.viewer;return a&&!o?i.a.createElement(E,null):i.a.createElement(Y,{loading:a,repositories:o.repositories,fetchMore:n})},ee=r(115),te=r(804),re=function(e){var t=e.authToken,r=e.onChange;return i.a.createElement("div",null,i.a.createElement(O.a,{variant:"h2"},"GraphQL Demo"),i.a.createElement(te.a,{label:"Authorization Code",placeholder:"some32characterthingfromgithub",value:t,onChange:r,style:{margin:"20px 0 20px 0"},fullWidth:!0}))},ae=Object(n.memo)(function(){return i.a.createElement(O.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',i.a.createElement("br",null),"This can be done in the Developer settings on GitHub.")}),ne=Object(p.a)(function(e){e.graphQLErrors,e.networkError}),ie=new v.a,oe=Object(o.b)(function(e){return{graphQLToken:e.graphql.token}},function(e){return{stateActions:Object(c.a)({setToken:ee.b},e)}})(function(e){var t=e.graphQLToken,r=e.stateActions,o=Object(n.useState)(t),c=Object(a.a)(o,2),p=c[0],v=c[1],b=function(e){var t=e.target.value;r.setToken(t),v(t)};if(!t)return i.a.createElement("div",null,i.a.createElement(re,{authToken:p,onChange:b}),i.a.createElement(ae,null));var g=new m.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(t)}}),f=d.a.from([ne,g]),h=new l.a({link:f,cache:ie});return i.a.createElement(s.a,{client:h},i.a.createElement(u.a,{client:h},i.a.createElement(re,{authToken:p,onChange:b}),i.a.createElement(X,null)))});t.default=oe}}]);
//# sourceMappingURL=36.69be0d2e.chunk.js.map