"use strict";(self.webpackChunkreact_home=self.webpackChunkreact_home||[]).push([[591],{6556:function(e,r,n){n.r(r),n.d(r,{default:function(){return ae}});var t,a,i,o,s,c=n(29439),d=n(72791),u=n(4650),l=n(55267),p=n(27603),h=n(73651),m=n(58963),g=n(60377),v=n(14917),f=n(30168),Z=n(27570),b=n(96578),x=n(80184),w=d.memo((function(){return(0,x.jsx)("div",{children:"Loading ..."})})),j=(0,Z.ZP)(t||(t=(0,f.Z)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]))),y=n(93433),S=n(1413),C=n(20890),R=n(45987),I=["children"],_=function(e){var r=e.children,n=(0,R.Z)(e,I);return(0,x.jsx)("a",(0,S.Z)((0,S.Z)({},n),{},{target:"_blank",rel:"noopener noreferrer",children:r}))},M=function(e){var r=e.descriptionHTML,n=e.primaryLanguage,t=e.owner;return(0,x.jsxs)("div",{className:"RepositoryItem-description",children:[(0,x.jsx)("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:r}}),(0,x.jsxs)("div",{className:"RepositoryItem-description-details",children:[n&&(0,x.jsx)(C.Z,{display:"inline",children:"Language: ".concat(n.name)}),t&&(0,x.jsxs)(C.Z,{display:"inline",children:["Owner: ",(0,x.jsx)("a",{href:t.url,children:t.login})]})]})]})},k=n(24518),N=n(84376),z=(0,Z.ZP)(a||(a=(0,f.Z)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]))),F="SUBSCRIBED",L="UNSUBSCRIBED",H=function(e){return e===F},T=function(e,r){var n=r.data;if(n){var t=n.updateSubscription.subscribable,a=t.id,i=t.viewerSubscription,o=e.readFragment({id:"Repository:".concat(a),fragment:j});if(o){var s=o.watchers.totalCount;s=i===F?s+1:s-1,e.writeFragment({id:"Repository:".concat(a),fragment:j,data:(0,S.Z)((0,S.Z)({},o),{},{watchers:(0,S.Z)((0,S.Z)({},o.watchers),{},{totalCount:s})})})}}},D=function(e){var r=e.id,n=e.watchers,t=e.viewerSubscription,a=(0,N.D)(z,{variables:{id:r,viewerSubscription:H(t)?L:F},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:r,viewerSubscription:H(t)?L:F}}},update:T}),i=(0,c.Z)(a,1)[0];return(0,x.jsx)(k.Z,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary",children:"".concat(H(t)?"Unwatch":"Watch"," (").concat(n.totalCount,")")})},$=(0,Z.ZP)(i||(i=(0,f.Z)(["\n  mutation ($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]))),P=function(e,r){var n=r.data;if(n){var t=n.addStar.starrable.id,a=e.readFragment({id:"Repository:".concat(t),fragment:j});if(a){var i=a.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(t),fragment:j,data:(0,S.Z)((0,S.Z)({},a),{},{stargazers:(0,S.Z)((0,S.Z)({},a.stargazers),{},{totalCount:i})})})}}},B=function(e){var r=e.id,n=e.stargazers,t=(0,N.D)($,{variables:{id:r},update:P,optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:r,viewerHasStarred:!0}}}}),a=(0,c.Z)(t,1)[0];return(0,x.jsx)(k.Z,{className:"RepositoryItem-title-action",onClick:a,variant:"outlined",color:"primary",children:"Star (".concat(n.totalCount,")")})},U=(0,Z.ZP)(o||(o=(0,f.Z)(["\n  mutation ($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]))),q=function(e,r){var n=r.data;if(n){var t=n.removeStar.starrable.id,a=e.readFragment({id:"Repository:".concat(t),fragment:j});if(a){var i=a.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(t),fragment:j,data:(0,S.Z)((0,S.Z)({},a),{},{stargazers:(0,S.Z)((0,S.Z)({},a.stargazers),{},{totalCount:i})})})}}},E=function(e){var r=e.id,n=e.stargazers,t=(0,N.D)(U,{variables:{id:r},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:r,viewerHasStarred:!1}}},update:q}),a=(0,c.Z)(t,1)[0];return(0,x.jsx)(k.Z,{className:"RepositoryItem-title-action",onClick:a,variant:"outlined",color:"primary",children:"UnStar (".concat(n.totalCount,")")})},G=function(e){var r=e.id,n=e.name,t=e.url,a=e.descriptionHTML,i=e.primaryLanguage,o=e.owner,s=e.stargazers,c=e.watchers,d=e.viewerSubscription,u=e.viewerHasStarred;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"RepositoryItem-title",children:[(0,x.jsx)(C.Z,{variant:"h3",children:(0,x.jsx)(_,{href:t,children:n})}),u?(0,x.jsx)(E,{id:r,stargazers:s}):(0,x.jsx)(B,{id:r,stargazers:s}),(0,x.jsx)(D,{id:r,watchers:c,viewerSubscription:d})]}),(0,x.jsx)(M,{descriptionHTML:a,primaryLanguage:i,owner:o})]})},Q=function(e){var r=e.loading,n=e.hasNextPage,t=e.variables,a=e.updateQuery,i=e.fetchMore,o=e.children;return(0,x.jsx)("div",{className:"FetchMore",children:r?(0,x.jsx)(w,{}):n&&(0,x.jsx)(k.Z,{className:"FetchMore-button",onClick:function(){return i({variables:t,updateQuery:a})},variant:"outlined",color:"primary",children:"More ".concat(o||"")})})},W=function(e,r){var n=r.fetchMoreResult;return n?(0,S.Z)((0,S.Z)({},e),{},{viewer:(0,S.Z)((0,S.Z)({},e.viewer),{},{repositories:(0,S.Z)((0,S.Z)((0,S.Z)({},e.viewer.repositories),n.viewer.repositories),{},{edges:[].concat((0,y.Z)(e.viewer.repositories.edges),(0,y.Z)(n.viewer.repositories.edges))})})}):e},A=function(e){var r=e.repositories,n=e.loading,t=e.fetchMore;return(0,x.jsxs)(x.Fragment,{children:[r.edges.map((function(e){var r=e.node;return(0,x.jsx)("div",{className:"RepositoryItem",children:(0,x.jsx)(G,(0,S.Z)({},r))},r.id)})),(0,x.jsx)(Q,{loading:n,hasNextPage:r.pageInfo.hasNextPage,variables:{cursor:r.pageInfo.endCursor},updateQuery:W,fetchMore:t,children:"Repositories"})]})},O=function(e){var r=e.error;return(0,x.jsx)("div",{children:(0,x.jsx)("small",{children:r?r.toString():"Something Went Wrong"})})},Y=(0,Z.ZP)(s||(s=(0,f.Z)(["\n  query ($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"])),j),J=d.memo((function(){var e=(0,b.a)(Y),r=e.error,n=e.data,t=e.loading,a=e.fetchMore;return r||!t&&!n?(0,x.jsx)(O,{error:r}):n&&n.viewer&&!t?(0,x.jsx)(A,{loading:t,repositories:n.viewer.repositories,fetchMore:a}):(0,x.jsx)(w,{})})),K=J,V=n(85153),X=n(27391),ee=d.memo((function(e){var r=e.authToken,n=e.onChange;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.Z,{variant:"h2",children:"GraphQL Demo"}),(0,x.jsx)(X.Z,{label:"Authorization Code",placeholder:"some 32 character string from github",value:r,onChange:n,style:{margin:"20px 0 20px 0"},fullWidth:!0})]})})),re=d.memo((function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C.Z,{variant:"h6",children:'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.'}),(0,x.jsx)(C.Z,{variant:"h6",children:"This can be done in the Developer settings on GitHub."})]})})),ne=(0,g.q)((function(){})),te=new u.h,ae=d.memo((function(){var e=(0,v.CG)((function(e){return e.gqlToken})),r=(0,v.TL)(),n=d.useState(e),t=(0,c.Z)(n,2),a=t[0],i=t[1],o=function(e){var n=e.target.value;r((0,V.o4)(n)),i(n)};if(!e)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ee,{authToken:a,onChange:o}),(0,x.jsx)(re,{})]});var s=new l.u({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(e)}}),u=p.i.from([ne,s]),g=new h.f({link:u,cache:te});return(0,x.jsxs)(m.e,{client:g,children:[(0,x.jsx)(ee,{authToken:a,onChange:o}),(0,x.jsx)(K,{})]})}))}}]);
//# sourceMappingURL=r_graphql.d02bbfe0.chunk.js.map