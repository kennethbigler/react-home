(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{795:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),i=r(417),o=r(490),c=r(359),s=r(759),u=r(725),l=r(758),d=r(415),m=r(416),p=r.n(m),v=function(){return n.a.createElement("div",null,"Loading ...")},b=r(22),g=r(81),f=r(29),E=r.n(f),w=r(776),y=r(782);function S(){var e=Object(d.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return S=function(){return e},e}var h=p()(S()),R=r(427),C=function(e){var t=e.children,r=Object(R.a)(e,["children"]);return n.a.createElement("a",Object.assign({},r,{target:"_blank",rel:"noopener noreferrer"}),t)};function O(){var e=Object(d.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return O=function(){return e},e}function I(){var e=Object(d.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return I=function(){return e},e}function _(){var e=Object(d.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return _=function(){return e},e}var j=p()(_()),N=p()(I()),M=p()(O()),k=function(e,t){var r=t.data.addStar.starrable.id,a=e.readFragment({id:"Repository:".concat(r),fragment:h}),n=a.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(r),fragment:h,data:Object(g.a)({},a,{stargazers:Object(g.a)({},a.stargazers,{totalCount:n})})})},L=function(e,t){var r=t.data.removeStar.starrable.id,a=e.readFragment({id:"Repository:".concat(r),fragment:h}),n=a.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(r),fragment:h,data:Object(g.a)({},a,{stargazers:Object(g.a)({},a.stargazers,{totalCount:n})})})},H="SUBSCRIBED",$="UNSUBSCRIBED",z=function(e){return e===H},F=function(e,t){var r=t.data.updateSubscription.subscribable,a=r.id,n=r.viewerSubscription,i=e.readFragment({id:"Repository:".concat(a),fragment:h}),o=i.watchers.totalCount;o=n===H?o+1:o-1,e.writeFragment({id:"Repository:".concat(a),fragment:h,data:Object(g.a)({},i,{watchers:Object(g.a)({},i.watchers,{totalCount:o})})})},B=function(e){var t=e.id,r=e.name,a=e.url,o=e.descriptionHTML,c=e.primaryLanguage,s=e.owner,u=e.stargazers,l=e.watchers,d=e.viewerSubscription,m=e.viewerHasStarred;return n.a.createElement("div",null,n.a.createElement("div",{className:"RepositoryItem-title"},n.a.createElement(y.a,{variant:"h3"},n.a.createElement(C,{href:a},r)),m?n.a.createElement(i.b,{mutation:N,variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:L},function(e,t){return t.data,t.loading,t.error,n.a.createElement(w.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"UnStar (",u.totalCount,")")}):n.a.createElement(i.b,{mutation:j,variables:{id:t},optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}},update:k},function(e,t){return t.data,t.loading,t.error,n.a.createElement(w.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"Star (",u.totalCount,")")}),n.a.createElement(i.b,{mutation:M,variables:{id:t,viewerSubscription:z(d)?$:H},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:z(d)?$:H}}},update:F},function(e,t){return t.data,t.loading,t.error,n.a.createElement(w.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},z(d)?"Unwatch":"Watch"," (".concat(l.totalCount,")"))})),n.a.createElement("div",{className:"RepositoryItem-description"},n.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:o}}),n.a.createElement("div",{className:"RepositoryItem-description-details"},n.a.createElement("div",null,c&&n.a.createElement(y.a,{display:"inline"},"Language:"," ",c.name)),n.a.createElement("div",null,s&&n.a.createElement(y.a,{display:"inline"},"Owner:"," ",n.a.createElement("a",{href:s.url},s.login))))))},P=function(e){var t=e.loading,r=e.hasNextPage,a=e.variables,i=e.updateQuery,o=e.fetchMore,c=e.children;return n.a.createElement("div",{className:"FetchMore"},t?n.a.createElement(v,null):r&&n.a.createElement(w.a,{className:"FetchMore-button",onClick:function(){return o({variables:a,updateQuery:i})},variant:"outlined",color:"primary"},"More"," ",c))},U=function(e,t){var r=t.fetchMoreResult;return r?Object(g.a)({},e,{viewer:Object(g.a)({},e.viewer,{repositories:Object(g.a)({},e.viewer.repositories,r.viewer.repositories,{edges:[].concat(Object(b.a)(e.viewer.repositories.edges),Object(b.a)(r.viewer.repositories.edges))})})}):e},D=function(e){var t=e.repositories,r=e.loading,i=e.fetchMore;return n.a.createElement(a.Fragment,null,E()(t.edges,function(e){var t=e.node;return n.a.createElement("div",{key:t.id,className:"RepositoryItem"},n.a.createElement(B,t))}),n.a.createElement(P,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:U,fetchMore:i},"Repositories"))},T=function(e){var t=e.error;return n.a.createElement("div",null,n.a.createElement("small",null,t.toString()))};function A(){var e=Object(d.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}var x=p()(A(),h),Q=function(){return n.a.createElement(i.c,{query:x,notifyOnNetworkStatusChange:!0},function(e){var t=e.data,r=e.loading,a=e.error,i=e.fetchMore;if(a)return n.a.createElement(T,{error:a});var o=t.viewer;return r&&!o?n.a.createElement(v,null):n.a.createElement(D,{loading:r,repositories:o.repositories,fetchMore:i})})},q=new s.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN)}}),G=Object(u.a)(function(e){e.graphQLErrors,e.networkError}),J=c.a.from([G,q]),K=new l.a,V=new o.a({link:J,cache:K}),W=function(){return n.a.createElement(i.a,{client:V},n.a.createElement(Q,null))};t.default=W}}]);
//# sourceMappingURL=36.e9819cb9.chunk.js.map