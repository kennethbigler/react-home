(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[20],{725:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return te}));var r=a(49),n=a(0),o=a.n(n),i=a(30),s=a(185),c=a(409),l=a(235),u=a(679),m=a(653),d=a(678),p=a(203),b=a(204),g=a.n(b),v=a(207);var h=o.a.memo(()=>o.a.createElement("div",null,"Loading ..."));function E(){const e=Object(p.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return E=function(){return e},e}var f=g()(E()),w=a(1),y=a(709),S=a(317);var O=e=>{const t=e.children,a=Object(S.a)(e,["children"]);return o.a.createElement("a",Object.assign({},a,{target:"_blank",rel:"noopener noreferrer"}),t)};var j=e=>{const t=e.descriptionHTML,a=e.primaryLanguage,r=e.owner;return o.a.createElement("div",{className:"RepositoryItem-description"},o.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),o.a.createElement("div",{className:"RepositoryItem-description-details"},a&&o.a.createElement(y.a,{display:"inline"},"Language:"," ",a.name),r&&o.a.createElement(y.a,{display:"inline"},"Owner:"," ",o.a.createElement("a",{href:r.url},r.login))))},R=a(704);function C(){const e=Object(p.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return C=function(){return e},e}const I=g()(C()),M="SUBSCRIBED",k="UNSUBSCRIBED",_=e=>e===M,N=(e,t)=>{const a=t.data;if(!a)return;const r=a.updateSubscription.subscribable,n=r.id,o=r.viewerSubscription,i=e.readFragment({id:"Repository:".concat(n),fragment:f});if(!i)return;let s=i.watchers.totalCount;s=o===M?s+1:s-1,e.writeFragment({id:"Repository:".concat(n),fragment:f,data:Object(w.a)({},i,{watchers:Object(w.a)({},i.watchers,{totalCount:s})})})};var z=e=>{const t=e.id,a=e.watchers,n=e.viewerSubscription,i=Object(v.a)(I,{variables:{id:t,viewerSubscription:_(n)?k:M},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:_(n)?k:M}}},update:N}),s=Object(r.a)(i,1)[0];return o.a.createElement(R.a,{className:"RepositoryItem-title-action",onClick:s,variant:"outlined",color:"primary"},_(n)?"Unwatch":"Watch"," (".concat(a.totalCount,")"))};function L(){const e=Object(p.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return L=function(){return e},e}const F=g()(L()),H=(e,t)=>{const a=t.data;if(!a)return;const r=a.addStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:f});if(!n)return;const o=n.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(r),fragment:f,data:Object(w.a)({},n,{stargazers:Object(w.a)({},n.stargazers,{totalCount:o})})})};var T=e=>{const t=e.id,a=e.stargazers,n=Object(v.a)(F,{variables:{id:t},update:H,optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}}}),i=Object(r.a)(n,1)[0];return o.a.createElement(R.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary"},"Star (".concat(a.totalCount,")"))};function $(){const e=Object(p.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return $=function(){return e},e}const D=g()($()),x=(e,t)=>{const a=t.data;if(!a)return;const r=a.removeStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:f});if(!n)return;const o=n.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(r),fragment:f,data:Object(w.a)({},n,{stargazers:Object(w.a)({},n.stargazers,{totalCount:o})})})};var B=e=>{const t=e.id,a=e.stargazers,n=Object(v.a)(D,{variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:x}),i=Object(r.a)(n,1)[0];return o.a.createElement(R.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary"},"UnStar (".concat(a.totalCount,")"))};var Q=e=>{const t=e.id,a=e.name,r=e.url,n=e.descriptionHTML,i=e.primaryLanguage,s=e.owner,c=e.stargazers,l=e.watchers,u=e.viewerSubscription,m=e.viewerHasStarred;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"RepositoryItem-title"},o.a.createElement(y.a,{variant:"h3"},o.a.createElement(O,{href:r},a)),m?o.a.createElement(B,{id:t,stargazers:c}):o.a.createElement(T,{id:t,stargazers:c}),o.a.createElement(z,{id:t,watchers:l,viewerSubscription:u})),o.a.createElement(j,{descriptionHTML:n,primaryLanguage:i,owner:s}))};var U=e=>{const t=e.loading,a=e.hasNextPage,r=e.variables,n=e.updateQuery,i=e.fetchMore,s=e.children;return o.a.createElement("div",{className:"FetchMore"},t?o.a.createElement(h,null):a&&o.a.createElement(R.a,{className:"FetchMore-button",onClick:()=>i({variables:r,updateQuery:n}),variant:"outlined",color:"primary"},"More"," ",s))};const P=(e,{fetchMoreResult:t})=>t?Object(w.a)({},e,{viewer:Object(w.a)({},e.viewer,{repositories:Object(w.a)({},e.viewer.repositories,{},t.viewer.repositories,{edges:[...e.viewer.repositories.edges,...t.viewer.repositories.edges]})})}):e;var W=e=>{const t=e.repositories,a=e.loading,r=e.fetchMore;return o.a.createElement(o.a.Fragment,null,t.edges.map(({node:e})=>o.a.createElement("div",{key:e.id,className:"RepositoryItem"},o.a.createElement(Q,e))),o.a.createElement(U,{loading:a,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:P,fetchMore:r},"Repositories"))};var q=e=>{const t=e.error;return o.a.createElement("div",null,o.a.createElement("small",null,t?t.toString():"Something Went Wrong"))};function A(){const e=Object(p.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}const G=g()(A(),f);var J=o.a.memo(()=>{const e=Object(v.b)(G),t=e.error,a=e.data,r=e.loading,n=e.fetchMore;if(t||!a)return o.a.createElement(q,{error:t});const i=a.viewer;return r&&!i?o.a.createElement(h,null):o.a.createElement(W,{loading:r,repositories:i.repositories,fetchMore:n})}),Y=a(70),Z=a(758);var K=o.a.memo(e=>{const t=e.authToken,a=e.onChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"h2"},"GraphQL Demo"),o.a.createElement(Z.a,{label:"Authorization Code",placeholder:"some 32 character string from github",value:t,onChange:a,style:{margin:"20px 0 20px 0"},fullWidth:!0}))});var V=o.a.memo(()=>o.a.createElement(y.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',o.a.createElement("br",null),"This can be done in the Developer settings on GitHub."));const X=Object(m.a)(({graphQLErrors:e,networkError:t})=>{}),ee=new d.a;var te=o.a.memo(()=>{const e=Object(i.c)(e=>e.gqlToken),t=Object(i.b)(),a=o.a.useState(e),n=Object(r.a)(a,2),m=n[0],d=n[1],p=e=>{const a=e.target.value;t(Object(Y.b)(a)),d(a)};if(!e)return o.a.createElement(o.a.Fragment,null,o.a.createElement(K,{authToken:m,onChange:p}),o.a.createElement(V,null));const b=new u.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(e)}}),g=l.a.from([X,b]),v=new c.a({link:g,cache:ee});return o.a.createElement(s.a,{client:v},o.a.createElement(K,{authToken:m,onChange:p}),o.a.createElement(J,null))})}}]);
//# sourceMappingURL=r_graphql.b1b7cb66.chunk.js.map