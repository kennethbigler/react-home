(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{794:function(e,t,a){"use strict";a.r(t);var r=a(80),n=a(0),i=a.n(n),o=a(39),c=a(25),s=a(417),l=a(492),u=a(358),d=a(758),m=a(725),p=a(756),v=a(415),b=a(416),g=a.n(b),f=function(){return i.a.createElement("div",null,"Loading ...")},h=a(22),E=a(81),w=a(29),y=a.n(w),S=a(775),R=a(781);function C(){var e=Object(v.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return C=function(){return e},e}var O=g()(C()),j=a(427),k=function(e){var t=e.children,a=Object(j.a)(e,["children"]);return i.a.createElement("a",Object.assign({},a,{target:"_blank",rel:"noopener noreferrer"}),t)};function I(){var e=Object(v.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return I=function(){return e},e}function N(){var e=Object(v.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return N=function(){return e},e}function _(){var e=Object(v.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return _=function(){return e},e}var M=g()(_()),T=g()(N()),L=g()(I()),z=function(e,t){var a=t.data.addStar.starrable.id,r=e.readFragment({id:"Repository:".concat(a),fragment:O}),n=r.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(a),fragment:O,data:Object(E.a)({},r,{stargazers:Object(E.a)({},r.stargazers,{totalCount:n})})})},H=function(e,t){var a=t.data.removeStar.starrable.id,r=e.readFragment({id:"Repository:".concat(a),fragment:O}),n=r.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(a),fragment:O,data:Object(E.a)({},r,{stargazers:Object(E.a)({},r.stargazers,{totalCount:n})})})},$="SUBSCRIBED",F="UNSUBSCRIBED",D=function(e){return e===$},Q=function(e,t){var a=t.data.updateSubscription.subscribable,r=a.id,n=a.viewerSubscription,i=e.readFragment({id:"Repository:".concat(r),fragment:O}),o=i.watchers.totalCount;o=n===$?o+1:o-1,e.writeFragment({id:"Repository:".concat(r),fragment:O,data:Object(E.a)({},i,{watchers:Object(E.a)({},i.watchers,{totalCount:o})})})},x=function(e){var t=e.id,a=e.name,r=e.url,n=e.descriptionHTML,o=e.primaryLanguage,c=e.owner,l=e.stargazers,u=e.watchers,d=e.viewerSubscription,m=e.viewerHasStarred;return i.a.createElement("div",null,i.a.createElement("div",{className:"RepositoryItem-title"},i.a.createElement(R.a,{variant:"h3"},i.a.createElement(k,{href:r},a)),m?i.a.createElement(s.b,{mutation:T,variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:H},function(e,t){return t.data,t.loading,t.error,i.a.createElement(S.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"UnStar (",l.totalCount,")")}):i.a.createElement(s.b,{mutation:M,variables:{id:t},optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}},update:z},function(e,t){return t.data,t.loading,t.error,i.a.createElement(S.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"Star (",l.totalCount,")")}),i.a.createElement(s.b,{mutation:L,variables:{id:t,viewerSubscription:D(d)?F:$},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:D(d)?F:$}}},update:Q},function(e,t){return t.data,t.loading,t.error,i.a.createElement(S.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},D(d)?"Unwatch":"Watch"," (".concat(u.totalCount,")"))})),i.a.createElement("div",{className:"RepositoryItem-description"},i.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:n}}),i.a.createElement("div",{className:"RepositoryItem-description-details"},i.a.createElement("div",null,o&&i.a.createElement(R.a,{display:"inline"},"Language:"," ",o.name)),i.a.createElement("div",null,c&&i.a.createElement(R.a,{display:"inline"},"Owner:"," ",i.a.createElement("a",{href:c.url},c.login))))))},B=function(e){var t=e.loading,a=e.hasNextPage,r=e.variables,n=e.updateQuery,o=e.fetchMore,c=e.children;return i.a.createElement("div",{className:"FetchMore"},t?i.a.createElement(f,null):a&&i.a.createElement(S.a,{className:"FetchMore-button",onClick:function(){return o({variables:r,updateQuery:n})},variant:"outlined",color:"primary"},"More"," ",c))},A=function(e,t){var a=t.fetchMoreResult;return a?Object(E.a)({},e,{viewer:Object(E.a)({},e.viewer,{repositories:Object(E.a)({},e.viewer.repositories,a.viewer.repositories,{edges:[].concat(Object(h.a)(e.viewer.repositories.edges),Object(h.a)(a.viewer.repositories.edges))})})}):e},U=function(e){var t=e.repositories,a=e.loading,r=e.fetchMore;return i.a.createElement(n.Fragment,null,y()(t.edges,function(e){var t=e.node;return i.a.createElement("div",{key:t.id,className:"RepositoryItem"},i.a.createElement(x,t))}),i.a.createElement(B,{loading:a,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:A,fetchMore:r},"Repositories"))},q=function(e){var t=e.error;return i.a.createElement("div",null,i.a.createElement("small",null,t.toString()))};function P(){var e=Object(v.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var G=g()(P(),O),J=function(){return i.a.createElement(s.c,{query:G,notifyOnNetworkStatusChange:!0},function(e){var t=e.error;if(t)return i.a.createElement(q,{error:t});var a=e.data.viewer,r=e.loading;if(r&&!a)return i.a.createElement(f,null);var n=e.fetchMore;return i.a.createElement(U,{loading:r,repositories:a.repositories,fetchMore:n})})},W=a(115),Y=a(809),Z=function(e){var t=e.authToken,a=e.onChange;return i.a.createElement("div",null,i.a.createElement(R.a,{variant:"h2"},"GraphQL Demo"),i.a.createElement(Y.a,{label:"Authorization Code",placeholder:"some32characterthingfromgithub",value:t,onChange:a,style:{margin:"20px 0 20px 0"},fullWidth:!0}))},K=Object(n.memo)(function(){return i.a.createElement(R.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',i.a.createElement("br",null),"This can be done in the Developer settings on GitHub.")}),V=Object(m.a)(function(e){e.graphQLErrors,e.networkError}),X=new p.a,ee=Object(o.b)(function(e){return{graphQLToken:e.graphql.token}},function(e){return{stateActions:Object(c.a)({setToken:W.b},e)}})(function(e){var t=e.graphQLToken,a=e.stateActions,o=Object(n.useState)(t),c=Object(r.a)(o,2),m=c[0],p=c[1],v=function(e){var t=e.target.value;a.setToken(t),p(t)};if(!t)return i.a.createElement("div",null,i.a.createElement(Z,{authToken:m,onChange:v}),i.a.createElement(K,null));var b=new d.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(t)}}),g=u.a.from([V,b]),f=new l.a({link:g,cache:X});return i.a.createElement(s.a,{client:f},i.a.createElement(Z,{authToken:m,onChange:v}),i.a.createElement(J,null))});t.default=ee}}]);
//# sourceMappingURL=35.a38693d6.chunk.js.map