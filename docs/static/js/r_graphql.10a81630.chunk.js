(window["webpackJsonpreact-home"]=window["webpackJsonpreact-home"]||[]).push([[22],{789:function(e,t,r){"use strict";r.r(t);var n=r(77),a=r(0),o=r.n(a),i=r(37),c=r(25),s=r(283),u=r(721),l=r(415),p=r(359),m=r(753),d=r(722),b=r(750),f=r(340),g=r(341),v=r.n(g),y=r(806),O=function(){return o.a.createElement("div",null,"Loading ...")},h=r(21),w=r(76),E=r(28),j=r.n(E),S=r(773),P=r(423),R=function(e){var t=e.children,r=Object(P.a)(e,["children"]);return o.a.createElement("a",Object.assign({},r,{target:"_blank",rel:"noopener noreferrer"}),t)},C=function(e){var t=e.descriptionHTML,r=e.primaryLanguage,n=e.owner;return o.a.createElement("div",{className:"RepositoryItem-description"},o.a.createElement("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),o.a.createElement("div",{className:"RepositoryItem-description-details"},r&&o.a.createElement(S.a,{display:"inline"},"Language:"," ",r.name),n&&o.a.createElement(S.a,{display:"inline"},"Owner:"," ",o.a.createElement("a",{href:n.url},n.login))))},k=r(807),D=r(768);function I(){var e=Object(f.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]);return I=function(){return e},e}var M=v()(I());function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach(function(t){Object(w.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function N(){var e=Object(f.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]);return N=function(){return e},e}var z=v()(N()),T="SUBSCRIBED",F="UNSUBSCRIBED",H=function(e){return e===T},$=function(e,t){var r=t.data.updateSubscription.subscribable,n=r.id,a=r.viewerSubscription,o=e.readFragment({id:"Repository:".concat(n),fragment:M}),i=o.watchers.totalCount;i=a===T?i+1:i-1,e.writeFragment({id:"Repository:".concat(n),fragment:M,data:L({},o,{watchers:L({},o.watchers,{totalCount:i})})})},Q=function(e){var t=e.id,r=e.watchers,n=e.viewerSubscription;return o.a.createElement(k.a,{mutation:z,variables:{id:t,viewerSubscription:H(n)?F:T},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:H(n)?F:T}}},update:$},function(e,t){t.data,t.loading,t.error;return o.a.createElement(D.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},H(n)?"Unwatch":"Watch"," (".concat(r.totalCount,")"))})};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach(function(t){Object(w.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(){var e=Object(f.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return A=function(){return e},e}var U=v()(A()),W=function(e,t){var r=t.data.addStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:M}),a=n.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(r),fragment:M,data:B({},n,{stargazers:B({},n.stargazers,{totalCount:a})})})},q=function(e){var t=e.id,r=e.stargazers;return o.a.createElement(k.a,{mutation:U,variables:{id:t},optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}},update:W},function(e,t){t.data,t.loading,t.error;return o.a.createElement(D.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"Star (",r.totalCount,")")})};function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(r,!0).forEach(function(t){Object(w.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(){var e=Object(f.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var Z=v()(Y()),K=function(e,t){var r=t.data.removeStar.starrable.id,n=e.readFragment({id:"Repository:".concat(r),fragment:M}),a=n.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(r),fragment:M,data:J({},n,{stargazers:J({},n.stargazers,{totalCount:a})})})},V=function(e){var t=e.id,r=e.stargazers;return o.a.createElement(k.a,{mutation:Z,variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:K},function(e,t){t.data,t.loading,t.error;return o.a.createElement(D.a,{className:"RepositoryItem-title-action",onClick:e,variant:"outlined",color:"primary"},"UnStar (",r.totalCount,")")})},X=function(e){var t=e.id,r=e.name,n=e.url,i=e.descriptionHTML,c=e.primaryLanguage,s=e.owner,u=e.stargazers,l=e.watchers,p=e.viewerSubscription,m=e.viewerHasStarred;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"RepositoryItem-title"},o.a.createElement(S.a,{variant:"h3"},o.a.createElement(R,{href:n},r)),m?o.a.createElement(V,{id:t,stargazers:u}):o.a.createElement(q,{id:t,stargazers:u}),o.a.createElement(Q,{id:t,watchers:l,viewerSubscription:p})),o.a.createElement(C,{descriptionHTML:i,primaryLanguage:c,owner:s}))},ee=function(e){var t=e.loading,r=e.hasNextPage,n=e.variables,a=e.updateQuery,i=e.fetchMore,c=e.children;return o.a.createElement("div",{className:"FetchMore"},t?o.a.createElement(O,null):r&&o.a.createElement(D.a,{className:"FetchMore-button",onClick:function(){return i({variables:n,updateQuery:a})},variant:"outlined",color:"primary"},"More"," ",c))};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(r,!0).forEach(function(t){Object(w.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ne=function(e,t){var r=t.fetchMoreResult;return r?re({},e,{viewer:re({},e.viewer,{repositories:re({},e.viewer.repositories,{},r.viewer.repositories,{edges:[].concat(Object(h.a)(e.viewer.repositories.edges),Object(h.a)(r.viewer.repositories.edges))})})}):e},ae=function(e){var t=e.repositories,r=e.loading,n=e.fetchMore;return o.a.createElement(o.a.Fragment,null,j()(t.edges,function(e){var t=e.node;return o.a.createElement("div",{key:t.id,className:"RepositoryItem"},o.a.createElement(X,t))}),o.a.createElement(ee,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:ne,fetchMore:n},"Repositories"))},oe=function(e){var t=e.error;return o.a.createElement("div",null,o.a.createElement("small",null,t.toString()))};oe.defaultProps={error:"Something Went Wrong"};var ie=oe;function ce(){var e=Object(f.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"]);return ce=function(){return e},e}var se=v()(ce(),M),ue=function(){var e=Object(y.a)(se),t=e.error,r=e.data,n=e.loading,a=e.fetchMore;if(t||!r)return o.a.createElement(ie,{error:t});var i=r.viewer;return n&&!i?o.a.createElement(O,null):o.a.createElement(ae,{loading:n,repositories:i.repositories,fetchMore:a})},le=r(111),pe=r(819),me=function(e){var t=e.authToken,r=e.onChange;return o.a.createElement(a.Fragment,null,o.a.createElement(S.a,{variant:"h2"},"GraphQL Demo"),o.a.createElement(pe.a,{label:"Authorization Code",placeholder:"some32characterthingfromgithub",value:t,onChange:r,style:{margin:"20px 0 20px 0"},fullWidth:!0}))},de=Object(a.memo)(function(){return o.a.createElement(S.a,{variant:"h6"},'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.',o.a.createElement("br",null),"This can be done in the Developer settings on GitHub.")}),be=Object(d.a)(function(e){e.graphQLErrors,e.networkError}),fe=new b.a,ge=Object(i.b)(function(e){return{graphQLToken:e.graphql.token}},function(e){return{stateActions:Object(c.a)({setToken:le.b},e)}})(function(e){var t=e.graphQLToken,r=e.stateActions,i=Object(a.useState)(t),c=Object(n.a)(i,2),d=c[0],b=c[1],f=function(e){var t=e.target.value;r.setToken(t),b(t)};if(!t)return o.a.createElement(a.Fragment,null,o.a.createElement(me,{authToken:d,onChange:f}),o.a.createElement(de,null));var g=new m.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(t)}}),v=p.a.from([be,g]),y=new l.a({link:v,cache:fe});return o.a.createElement(s.a,{client:y},o.a.createElement(u.a,{client:y},o.a.createElement(me,{authToken:d,onChange:f}),o.a.createElement(ue,null)))});t.default=ge}}]);
//# sourceMappingURL=r_graphql.10a81630.chunk.js.map