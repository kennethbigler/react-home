(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[20],{704:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return re}));var a=r(55),n=r(0),i=r.n(n),s=r(31),o=r(633),c=r(708),d=r(240),b=r(336),j=r(616),l=r(615),u=r(238),p=r(195),O=r(727),h=r(5);var m,g=i.a.memo((()=>Object(h.jsx)("div",{children:"Loading ..."})));var v=Object(p.a)(m||(m=Object(u.a)(["\n  fragment repository on Repository {\n    id\n    name\n    url\n    descriptionHTML\n    primaryLanguage {\n      name\n    }\n    owner {\n      login\n      url\n    }\n    stargazers {\n      totalCount\n    }\n    viewerHasStarred\n    watchers {\n      totalCount\n    }\n    viewerSubscription\n  }\n"]))),x=r(1),w=r(674),y=r(343);var S=e=>{const t=e.children,r=Object(y.a)(e,["children"]);return Object(h.jsx)("a",Object(x.a)(Object(x.a)({},r),{},{target:"_blank",rel:"noopener noreferrer",children:t}))};var f,R=e=>{const t=e.descriptionHTML,r=e.primaryLanguage,a=e.owner;return Object(h.jsxs)("div",{className:"RepositoryItem-description",children:[Object(h.jsx)("div",{className:"RepositoryItem-description-info",dangerouslySetInnerHTML:{__html:t}}),Object(h.jsxs)("div",{className:"RepositoryItem-description-details",children:[r&&Object(h.jsx)(w.a,{display:"inline",children:"Language: ".concat(r.name)}),a&&Object(h.jsxs)(w.a,{display:"inline",children:["Owner:"," ",Object(h.jsx)("a",{href:a.url,children:a.login})]})]})]})},C=r(669),I=r(744);const M=Object(p.a)(f||(f=Object(u.a)(["\n  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {\n    updateSubscription(\n      input: { state: $viewerSubscription, subscribableId: $id }\n    ) {\n      subscribable {\n        id\n        viewerSubscription\n      }\n    }\n  }\n"]))),_="SUBSCRIBED",k="UNSUBSCRIBED",N=e=>e===_,z=(e,t)=>{const r=t.data;if(!r)return;const a=r.updateSubscription.subscribable,n=a.id,i=a.viewerSubscription,s=e.readFragment({id:"Repository:".concat(n),fragment:v});if(!s)return;let o=s.watchers.totalCount;o=i===_?o+1:o-1,e.writeFragment({id:"Repository:".concat(n),fragment:v,data:Object(x.a)(Object(x.a)({},s),{},{watchers:Object(x.a)(Object(x.a)({},s.watchers),{},{totalCount:o})})})};var F,L=e=>{const t=e.id,r=e.watchers,n=e.viewerSubscription,i=Object(I.a)(M,{variables:{id:t,viewerSubscription:N(n)?k:_},optimisticResponse:{updateSubscription:{__typename:"Mutation",subscribable:{__typename:"Repository",id:t,viewerSubscription:N(n)?k:_}}},update:z}),s=Object(a.a)(i,1)[0];return Object(h.jsx)(C.a,{className:"RepositoryItem-title-action",onClick:s,variant:"outlined",color:"primary",children:"".concat(N(n)?"Unwatch":"Watch"," (").concat(r.totalCount,")")})};const H=Object(p.a)(F||(F=Object(u.a)(["\n  mutation($id: ID!) {\n    addStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]))),T=(e,t)=>{const r=t.data;if(!r)return;const a=r.addStar.starrable.id,n=e.readFragment({id:"Repository:".concat(a),fragment:v});if(!n)return;const i=n.stargazers.totalCount+1;e.writeFragment({id:"Repository:".concat(a),fragment:v,data:Object(x.a)(Object(x.a)({},n),{},{stargazers:Object(x.a)(Object(x.a)({},n.stargazers),{},{totalCount:i})})})};var $,D=e=>{const t=e.id,r=e.stargazers,n=Object(I.a)(H,{variables:{id:t},update:T,optimisticResponse:{addStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!0}}}}),i=Object(a.a)(n,1)[0];return Object(h.jsx)(C.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary",children:"Star (".concat(r.totalCount,")")})};const B=Object(p.a)($||($=Object(u.a)(["\n  mutation($id: ID!) {\n    removeStar(input: { starrableId: $id }) {\n      starrable {\n        id\n        viewerHasStarred\n      }\n    }\n  }\n"]))),U=(e,t)=>{const r=t.data;if(!r)return;const a=r.removeStar.starrable.id,n=e.readFragment({id:"Repository:".concat(a),fragment:v});if(!n)return;const i=n.stargazers.totalCount-1;e.writeFragment({id:"Repository:".concat(a),fragment:v,data:Object(x.a)(Object(x.a)({},n),{},{stargazers:Object(x.a)(Object(x.a)({},n.stargazers),{},{totalCount:i})})})};var A=e=>{const t=e.id,r=e.stargazers,n=Object(I.a)(B,{variables:{id:t},optimisticResponse:{removeStar:{__typename:"Mutation",starrable:{__typename:"Repository",id:t,viewerHasStarred:!1}}},update:U}),i=Object(a.a)(n,1)[0];return Object(h.jsx)(C.a,{className:"RepositoryItem-title-action",onClick:i,variant:"outlined",color:"primary",children:"UnStar (".concat(r.totalCount,")")})};var E=e=>{const t=e.id,r=e.name,a=e.url,n=e.descriptionHTML,i=e.primaryLanguage,s=e.owner,o=e.stargazers,c=e.watchers,d=e.viewerSubscription,b=e.viewerHasStarred;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"RepositoryItem-title",children:[Object(h.jsx)(w.a,{variant:"h3",children:Object(h.jsx)(S,{href:a,children:r})}),b?Object(h.jsx)(A,{id:t,stargazers:o}):Object(h.jsx)(D,{id:t,stargazers:o}),Object(h.jsx)(L,{id:t,watchers:c,viewerSubscription:d})]}),Object(h.jsx)(R,{descriptionHTML:n,primaryLanguage:i,owner:s})]})};var P=e=>{const t=e.loading,r=e.hasNextPage,a=e.variables,n=e.updateQuery,i=e.fetchMore,s=e.children;return Object(h.jsx)("div",{className:"FetchMore",children:t?Object(h.jsx)(g,{}):r&&Object(h.jsx)(C.a,{className:"FetchMore-button",onClick:()=>i({variables:a,updateQuery:n}),variant:"outlined",color:"primary",children:"More ".concat(s)})})};const Q=(e,{fetchMoreResult:t})=>t?Object(x.a)(Object(x.a)({},e),{},{viewer:Object(x.a)(Object(x.a)({},e.viewer),{},{repositories:Object(x.a)(Object(x.a)(Object(x.a)({},e.viewer.repositories),t.viewer.repositories),{},{edges:[...e.viewer.repositories.edges,...t.viewer.repositories.edges]})})}):e;var W=e=>{const t=e.repositories,r=e.loading,a=e.fetchMore;return Object(h.jsxs)(h.Fragment,{children:[t.edges.map((({node:e})=>Object(h.jsx)("div",{className:"RepositoryItem",children:Object(h.jsx)(E,Object(x.a)({},e))},e.id))),Object(h.jsx)(P,{loading:r,hasNextPage:t.pageInfo.hasNextPage,variables:{cursor:t.pageInfo.endCursor},updateQuery:Q,fetchMore:a,children:"Repositories"})]})};var q,G=e=>{const t=e.error;return Object(h.jsx)("div",{children:Object(h.jsx)("small",{children:t?t.toString():"Something Went Wrong"})})};const J=Object(p.a)(q||(q=Object(u.a)(["\n  query($cursor: String) {\n    viewer {\n      repositories(\n        first: 5\n        orderBy: { direction: DESC, field: STARGAZERS }\n        after: $cursor\n      ) {\n        edges {\n          node {\n            ...repository\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }\n  }\n  ","\n"])),v);var Y=i.a.memo((()=>{const e=Object(O.a)(J),t=e.error,r=e.data,a=e.loading,n=e.fetchMore;return t||!a&&!r?Object(h.jsx)(G,{error:t}):!a||r&&r.viewer?Object(h.jsx)(W,{loading:a,repositories:r.viewer.repositories,fetchMore:n}):Object(h.jsx)(g,{})})),Z=r(77),K=r(736);var V=i.a.memo((e=>{const t=e.authToken,r=e.onChange;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{variant:"h2",children:"GraphQL Demo"}),Object(h.jsx)(K.a,{label:"Authorization Code",placeholder:"some 32 character string from github",value:t,onChange:r,style:{margin:"20px 0 20px 0"},fullWidth:!0})]})}));var X=i.a.memo((()=>Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w.a,{variant:"h6",children:'You need to generate a personal access token with "repo" and "admin:repo_hook" permissions.'}),Object(h.jsx)(w.a,{variant:"h6",children:"This can be done in the Developer settings on GitHub."})]})));const ee=Object(l.a)((()=>{})),te=new o.a;var re=i.a.memo((()=>{const e=Object(s.c)((e=>e.gqlToken)),t=Object(s.b)(),r=i.a.useState(e),n=Object(a.a)(r,2),o=n[0],l=n[1],u=e=>{const r=e.target.value;t(Object(Z.b)(r)),l(r)};if(!e)return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(V,{authToken:o,onChange:u}),Object(h.jsx)(X,{})]});const p=new c.a({uri:"https://api.github.com/graphql",headers:{authorization:"Bearer ".concat(e)}}),O=d.ApolloLink.from([ee,p]),m=new b.a({link:O,cache:te});return Object(h.jsxs)(j.a,{client:m,children:[Object(h.jsx)(V,{authToken:o,onChange:u}),Object(h.jsx)(Y,{})]})}))}}]);
//# sourceMappingURL=r_graphql.f98626a8.chunk.js.map