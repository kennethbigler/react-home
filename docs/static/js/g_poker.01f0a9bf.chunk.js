"use strict";(self.webpackChunkreact_home=self.webpackChunkreact_home||[]).push([[396],{87632:function(e,n,r){var t=r(1413),a=r(61842),i=r.n(a),c=[{name:"2",weight:2,suit:"\u2663"},{name:"3",weight:3,suit:"\u2663"},{name:"4",weight:4,suit:"\u2663"},{name:"5",weight:5,suit:"\u2663"},{name:"6",weight:6,suit:"\u2663"},{name:"7",weight:7,suit:"\u2663"},{name:"8",weight:8,suit:"\u2663"},{name:"9",weight:9,suit:"\u2663"},{name:"10",weight:10,suit:"\u2663"},{name:"J",weight:11,suit:"\u2663"},{name:"Q",weight:12,suit:"\u2663"},{name:"K",weight:13,suit:"\u2663"},{name:"A",weight:14,suit:"\u2663"},{name:"2",weight:2,suit:"\u2666"},{name:"3",weight:3,suit:"\u2666"},{name:"4",weight:4,suit:"\u2666"},{name:"5",weight:5,suit:"\u2666"},{name:"6",weight:6,suit:"\u2666"},{name:"7",weight:7,suit:"\u2666"},{name:"8",weight:8,suit:"\u2666"},{name:"9",weight:9,suit:"\u2666"},{name:"10",weight:10,suit:"\u2666"},{name:"J",weight:11,suit:"\u2666"},{name:"Q",weight:12,suit:"\u2666"},{name:"K",weight:13,suit:"\u2666"},{name:"A",weight:14,suit:"\u2666"},{name:"2",weight:2,suit:"\u2665"},{name:"3",weight:3,suit:"\u2665"},{name:"4",weight:4,suit:"\u2665"},{name:"5",weight:5,suit:"\u2665"},{name:"6",weight:6,suit:"\u2665"},{name:"7",weight:7,suit:"\u2665"},{name:"8",weight:8,suit:"\u2665"},{name:"9",weight:9,suit:"\u2665"},{name:"10",weight:10,suit:"\u2665"},{name:"J",weight:11,suit:"\u2665"},{name:"Q",weight:12,suit:"\u2665"},{name:"K",weight:13,suit:"\u2665"},{name:"A",weight:14,suit:"\u2665"},{name:"2",weight:2,suit:"\u2660"},{name:"3",weight:3,suit:"\u2660"},{name:"4",weight:4,suit:"\u2660"},{name:"5",weight:5,suit:"\u2660"},{name:"6",weight:6,suit:"\u2660"},{name:"7",weight:7,suit:"\u2660"},{name:"8",weight:8,suit:"\u2660"},{name:"9",weight:9,suit:"\u2660"},{name:"10",weight:10,suit:"\u2660"},{name:"J",weight:11,suit:"\u2660"},{name:"Q",weight:12,suit:"\u2660"},{name:"K",weight:13,suit:"\u2660"},{name:"A",weight:14,suit:"\u2660"}],s=function(){return c.map((function(e){return(0,t.Z)({},e)}))},u=function(){return i().getItem("deck").then((function(e){return e||s()})).catch((function(){return s()}))},o=function(e){return i().setItem("deck",e).catch((function(){return null}))};n.Z={shuffle:function(){return o(function(e){var n=[];e.map((function(e){return n.push(e)}));for(var r=0;r<100;r+=1){var t=Math.floor(Math.random()*n.length),a=Math.floor(Math.random()*n.length),i=n[t];n[t]=n[a],n[a]=i}return n}(s()))},deal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=[];return u().then((function(r){if(e>r.length)return r;for(var t=0;t<e;t+=1){var a=r.pop();a&&n.push(a)}return r})).then((function(e){return o(e)})).then((function(){return n}))},rankSort:function(e,n){return e.weight-n.weight}}},41881:function(e,n,r){r.d(n,{Z:function(){return C}});var t=r(72791),a=r(1413),i=r(46633),c=r(20890),s=r(57621),u=r(37596),o=r(80007),d=r(13771),l=r(82460),h=r(51798),f={cardFace:{backgroundColor:"white",borderRadius:5,cursor:"pointer",display:"inline-block",fontWeight:"bold",height:78,margin:5,padding:3,width:50},cardTitle:{textAlign:"left"},suit:{margin:"auto",marginTop:5,textAlign:"center",width:"100%"}},p=r(80184),m=t.memo((function(e){var n=e.dropped,r=e.suit,i=e.name,s=e.cardHandler,u=e.playerNo,o=e.handNo,d=e.cardNo,h=t.useCallback((function(){s&&s(u,o,d)}),[s,d,o,u]),m={color:"\u2663"===r||"\u2660"===r?"black":l.Z[500],backgroundColor:n?l.Z[100]:"white"};return(0,p.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},f.cardFace),m),onClick:h,role:"main",children:[(0,p.jsx)("div",{style:f.cardTitle,children:i+r}),(0,p.jsx)(c.Z,{variant:"h4",style:(0,a.Z)((0,a.Z)({},f.suit),m),children:r})]})})),g=m,v={fontWeight:"bold",marginTop:"0.5em"},k={fontWeight:"normal",marginTop:"0.5em"},w=function(e){var n=e.cardHandler,r=e.cardsToDiscard,i=e.hand,s=e.handNo,u=e.isBlackJack,o=e.isHandTurn,d=e.isMultiHand,l=e.isPlayerTurn,f=e.playerNo,m=t.useMemo((function(){return l&&(!d||d&&o)?(0,a.Z)((0,a.Z)({},v),{},{color:h.Z[700]}):k}),[l,d,o]),w=i.weight||0;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Z,{variant:"h4",style:m,children:u&&"".concat(w>21?"Bust":"Hand",": ").concat(w)}),i.cards.map((function(e,t){var a=r.includes(t);return e?(0,p.jsx)(g,{cardHandler:n,cardNo:t,dropped:a,handNo:s,name:e.name,playerNo:f,suit:e.suit},e.name+e.suit):null}))]})},x={player:{borderRadius:5,display:"inline-block",margin:10,padding:20},width:{minWidth:"100px"}},y=function(e){var n=e.betHandler,r=e.cardHandler,h=e.cardsToDiscard,f=e.hideHands,m=e.isBlackJack,g=e.player,v=e.playerNo,k=e.turn,y=!!k&&v===k.player,Z=g.hands.length>1,b=!!f&&m&&0!==g.id&&!g.isBot,H=Math.max(Math.min(g.money,5),0),T=Math.max(Math.min(g.money,100),10),D=t.useCallback((function(e,r){n&&n(g.id,e,r)}),[n,g.id]),C=y?{background:u.Z[200]}:{},j=y?{fontWeight:"bold"}:{fontWeight:"normal"};return"win"===g.status&&(C={background:o.Z[300]}),"draw"===g.status&&(C={background:d.Z[300]}),"lose"===g.status&&(C={background:l.Z[300]}),(0,p.jsxs)(s.Z,{style:(0,a.Z)((0,a.Z)({},x.player),C),children:[(0,p.jsx)(c.Z,{variant:"h4",style:(0,a.Z)({},j),children:"".concat(g.name,": $").concat(g.money)}),b&&(0,p.jsx)(i.ZP,{max:T,min:H,onChange:D,step:5,style:x.width,value:g.bet}),m&&0!==g.id&&(0,p.jsx)(c.Z,{variant:"h5",children:"Bet: $".concat(g.bet)}),g.hands.map((function(e,n){var t=!!k&&k.hand===n;return(0,p.jsx)("div",{children:!f&&(0,p.jsx)(w,{cardHandler:r,cardsToDiscard:h,hand:e,handNo:n,isBlackJack:m,isHandTurn:t,isMultiHand:Z,isPlayerTurn:y,playerNo:v})},"hand".concat(n))}))]})},Z=function(e){var n=e.betHandler,r=e.cardHandler,t=e.cardsToDiscard,a=e.hideHands,i=e.isBlackJack,c=e.players,s=e.turn;return(0,p.jsx)(p.Fragment,{children:c.map((function(e,c){return(0,p.jsx)(y,{betHandler:n,cardHandler:r,cardsToDiscard:t,hideHands:a,isBlackJack:i,player:e,playerNo:c,turn:s},"player".concat(c))}))})},b=r(24518),H={margin:12},T=t.memo((function(e){var n=e.onClick,r=e.name;return(0,p.jsx)(b.Z,{color:"primary",onClick:function(){return n(r)},style:H,variant:"contained",children:r})})),D=function(e){var n=e.gameFunctions,r=e.onClick;return(0,p.jsx)("div",{children:n.map((function(e){return(0,p.jsx)(T,{onClick:r,name:e},e)}))})},C=function(e){var n=e.betHandler,r=e.cardClickHandler,a=e.cardsToDiscard,i=void 0===a?[]:a,c=e.gameFunctions,s=void 0===c?[]:c,u=e.gameOver,o=void 0!==u&&u,d=e.hideHands,l=void 0!==d&&d,h=e.isBlackJack,f=void 0===h||h,m=e.players,g=e.turn,v=e.onClick,k=t.useMemo((function(){return m.slice(0,g.player+1)}),[m,g.player]),w=t.useMemo((function(){return m.slice(g.player+1)}),[m,g.player]),x=t.useMemo((function(){return l||!1!==o?m:m.slice(g.player,g.player+1)}),[l,o,m,g.player]);return f&&!l?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Z,{players:k,betHandler:n,cardHandler:r,cardsToDiscard:i,hideHands:l,isBlackJack:f,turn:g}),(0,p.jsx)(D,{gameFunctions:s,onClick:v}),(0,p.jsx)(Z,{players:w,betHandler:n,cardHandler:r,cardsToDiscard:i,hideHands:l,isBlackJack:f,turn:{player:-1,hand:-1}})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Z,{players:x,betHandler:n,cardHandler:r,cardsToDiscard:i,hideHands:l,isBlackJack:f,turn:g}),(0,p.jsx)(D,{gameFunctions:s,onClick:v})]})}},82348:function(e,n,r){r.r(n),r.d(n,{default:function(){return D}});var t,a=r(93433),i=r(1413),c=r(15861),s=r(29439),u=r(87757),o=r.n(u),d=(r(72791),r(20890)),l=r(56030),h=r(41881),f=r(25252),p=r(87632),m=function(e,n){if(n.includes(4))return 7;var r=n.includes(3),t=n.indexOf(2),a=-1!==t;if(r&&a)return 6;if(r)return 3;if(a&&n.includes(2,t+1))return 2;if(a)return 1;for(var i=n.lastIndexOf(1)-n.indexOf(1)===4||n[12]&&n[0]&&n[1]&&n[2]&&n[3],c=!0,s=0;s<e.length;s+=1)if(e[s].suit!==e[0].suit){c=!1;break}return i&&c?8:c?5:i?4:0},g=function(e){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach((function(e){e&&(n[e.weight-2]+=1)})),n},v=function(e,n,r){for(var t=[],a=[n.indexOf(1)],i=1;i<e;i+=1)a[i]=n.indexOf(1,a[i-1]+1);for(var c=0;c<r.length;c+=1)for(var s=0;s<a.length;s+=1)if(r[c].weight-2===a[s]){t.push(c);break}return t},k=function(){var e=(0,c.Z)(o().mark((function e(n,r){var t,a,i,c,s,u,d,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.hands.length<1)){e.next=2;break}return e.abrupt("return",n);case 2:e.prev=2,t=n.hands[0].cards,a=g(t),i=m(t,a),e.t0=i,e.next=0===e.t0?9:1===e.t0?14:2===e.t0||3===e.t0?19:(4===e.t0||5===e.t0||6===e.t0||7===e.t0||e.t0,24);break;case 9:return c=a.lastIndexOf(1)>=11?v(4,a,t):[0,1,2,3,4],e.next=12,r(c,n);case 12:return s=e.sent,e.abrupt("return",s);case 14:return u=v(3,a,t),e.next=17,r(u,n);case 17:return d=e.sent,e.abrupt("return",d);case 19:return l=v(1,a,t),e.next=22,r(l,n);case 22:return h=e.sent,e.abrupt("return",h);case 24:return e.abrupt("break",25);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(2),console.error(e.t1);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[2,27]])})));return function(n,r){return e.apply(this,arguments)}}(),w=function(e){var n={val:0,id:0};e.forEach((function(e){var r;if(!(0===e.id||e.id>5||(null===(r=e.hands[0])||void 0===r?void 0:r.cards.length)<1)){var t=parseInt(function(e){for(var n=g(e),r=m(e,n),t=["0","0","0","0","0"],a=0,i=4,c=0,s=-1;a<5;){var u=n.indexOf(i,s+1);-1===u?(i-=1,s=-1):(t[c]=u.toString(14),c+=1,a+=i,s=u)}return"".concat(r).concat(t.reduce((function(e,n){return"".concat(e).concat(n)})))}(e.hands[0].cards),14);t>n.val&&(n={val:t,id:e.id})}})),e.forEach((function(r,t){if(!(0===r.id||r.id>5))if(r.id===n.id){var a=(0,i.Z)((0,i.Z)({},r),{},{status:"win",money:r.money+20});e[t]=a}else{var c=(0,i.Z)((0,i.Z)({},r),{},{status:"lose",money:r.money-5});e[t]=c}}))},x=r(69153),y=r(24274);!function(e){e.DISCARD_CARDS="Discard Cards",e.END_TURN="End Turn",e.NEW_GAME="New Game",e.START_GAME="Start Game"}(t||(t={}));var Z=function(){return{gameFunctions:[t.START_GAME],cardsToDiscard:[],hideHands:!0,gameOver:!1}},b=(0,l.cn)({key:"pokerAtom",default:JSON.parse(localStorage.getItem("poker-atom")||"null")||Z(),effects:[function(e){(0,e.onSet)((function(e){localStorage.setItem("poker-atom",JSON.stringify(e))}))}]}),H=(0,l.nZ)({key:"pokerState",get:function(e){var n=e.get;return{poker:n(b),turn:n(x.Z),players:n(y.ZP)}},set:function(e,n){var r=e.set;if(!(n instanceof l.nY)){var t=n.poker,a=n.turn,i=n.players;r(b,t),r(x.Z,a),r(y.ZP,i)}}}),T=r(80184),D=function(){var e=(0,l.FV)(H),n=(0,s.Z)(e,2),r=n[0],u=r.poker,m=r.turn,g=r.players,v=n[1],x=u.cardsToDiscard,b=u.gameFunctions,D=u.gameOver,C=u.hideHands,j=function(){var e=(0,c.Z)(o().mark((function e(n,r){var t,c,s,u,d,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.hands,c=(0,i.Z)({},r),s=(0,a.Z)(t[0].cards),e.prev=3,e.next=6,p.Z.deal(n.length);case 6:u=e.sent,n.forEach((function(e,n){s[e]=u[n]})),s.sort(p.Z.rankSort),d=(0,y.MQ)(s),l=d.weight,h=d.soft,c.hands=[{cards:s,weight:l,soft:h}],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(n,r){return e.apply(this,arguments)}}(),S=function(){var e=(0,c.Z)(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,C||D||null===(n=g[m.player])||void 0===n||!n.isBot){e.next=7;break}return r=(0,a.Z)(g),e.next=5,(0,f.Z)(g,function(){var e=(0,c.Z)(o().mark((function e(n,t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.player<=t&&t<5)){e.next=5;break}return e.next=3,k(n,j);case 3:a=e.sent,r[t]=a;case 5:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}());case 5:w(r),v({poker:{cardsToDiscard:x,gameFunctions:[t.NEW_GAME],gameOver:!0,hideHands:C},players:r,turn:{player:0,hand:0}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,c.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.shuffle().then((0,c.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,a.Z)(g),e.next=3,(0,f.Z)(g,function(){var e=(0,c.Z)(o().mark((function e(r){var t,a,c,s,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0!==r.id&&r.id<=5)){e.next=8;break}return e.next=3,p.Z.deal(5);case 3:(t=e.sent).sort(p.Z.rankSort),a=(0,y.MQ)(t),c=a.weight,s=a.soft,-1!==(u=g.findIndex((function(e){return e.id===r.id})))&&(d=(0,i.Z)((0,i.Z)({},n[u]),{},{hands:[{cards:t,weight:c,soft:s}]}),n[u]=d);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 3:v({players:n,turn:m,poker:{cardsToDiscard:x,gameFunctions:[t.DISCARD_CARDS],gameOver:D,hideHands:!1}});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,c.Z)(o().mark((function e(n,r,i){var c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=(0,a.Z)(g),e.next=4,j(i,n[r]);case 4:s=e.sent,c[r]=s,v({poker:{cardsToDiscard:[],gameFunctions:[t.END_TURN],gameOver:D,hideHands:C},turn:m,players:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,r,t){return e.apply(this,arguments)}}(),M=function(){var e=(0,c.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=[],e.t0=n,e.next=e.t0===t.DISCARD_CARDS?5:e.t0===t.END_TURN?8:e.t0===t.NEW_GAME?10:e.t0===t.START_GAME?13:16;break;case 5:return e.next=7,A(g,m.player,x);case 7:return e.abrupt("break",17);case 8:return v({poker:{cardsToDiscard:[],gameFunctions:[t.DISCARD_CARDS],gameOver:D,hideHands:C},turn:{player:m.player+1,hand:0},players:g}),e.abrupt("break",17);case 10:return g.forEach((function(e){return r.push((0,i.Z)((0,i.Z)({},e),{},{status:"",hands:[],bet:5}))})),v({poker:Z(),turn:{player:0,hand:0},players:r}),e.abrupt("break",17);case 13:return e.next=15,N();case 15:return e.abrupt("break",17);case 16:console.error("Unknown Game Function: ",n);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(0),console.error(e.t1);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(n){return e.apply(this,arguments)}}();return S().catch((function(){console.error("check update failed")})),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(d.Z,{variant:"h2",gutterBottom:!0,children:"5 Card Draw Poker"}),(0,T.jsx)(h.Z,{cardClickHandler:function(e,n,r){var t=(0,a.Z)(x),i=t.indexOf(r);-1===i?t.push(r):t.splice(i,1),v({poker:{cardsToDiscard:t,gameFunctions:b,gameOver:D,hideHands:C},turn:m,players:g})},cardsToDiscard:x,gameFunctions:b,onClick:M,gameOver:D,hideHands:C,isBlackJack:!1,players:g,turn:m})]})}},25252:function(e,n,r){var t=r(15861),a=r(87757),i=r.n(a);function c(){return(c=(0,t.Z)(i().mark((function e(n,r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.length)){e.next=7;break}return e.next=4,r(n[t],t,n);case 4:t+=1,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.Z=function(e,n){return c.apply(this,arguments)}},69153:function(e,n,r){var t=(0,r(56030).cn)({key:"turnAtom",default:JSON.parse(localStorage.getItem("turn-atom")||"null")||{player:0,hand:0},effects:[function(e){(0,e.onSet)((function(e){localStorage.setItem("turn-atom",JSON.stringify(e))}))}]});n.Z=t}}]);
//# sourceMappingURL=g_poker.01f0a9bf.chunk.js.map