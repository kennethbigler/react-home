(this["webpackJsonpreact-home"]=this["webpackJsonpreact-home"]||[]).push([[13],{293:function(e,a,r){"use strict";var t=r(0),n=r.n(t),c=r(5),i=r(733),s=r(171),o=r.n(s),d=r(161),u=r.n(d),l=r(58),p=r.n(l),m=r(137),f=r.n(m),y=r(688),h=r(237),g=r(388),b=r.n(g),v={cardFace:{backgroundColor:"white",borderRadius:5,cursor:"pointer",display:"inline-block",fontWeight:"bold",height:78,margin:5,padding:3,width:50},cardTitle:{textAlign:"left"},suit:{margin:"auto",marginTop:5,textAlign:"center",width:"100%"}};function O(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?O(r,!0).forEach((function(a){Object(c.a)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}var H=Object(t.memo)((function(e){var a=e.dropped,r=e.suit,t=e.name,c=e.cardHandler,i=e.playerNo,s=e.handNo,o=e.cardNo,d=n.a.useCallback((function(){c&&c(i,s,o)}),[c,o,s,i]),u={color:"\u2663"===r||"\u2660"===r?"black":f.a[500],backgroundColor:a?f.a[100]:"white"};return n.a.createElement("div",{style:k({},v.cardFace,{},u),onClick:d,role:"main"},n.a.createElement("div",{style:v.cardTitle},t+r),n.a.createElement(y.a,{variant:"h4",style:k({},v.suit,{},u)},r))}));function w(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}var j={fontWeight:"bold",marginTop:"0.5em"},E={fontWeight:"normal",marginTop:"0.5em"},D=function(e){var a=e.cardHandler,r=e.cardsToDiscard,t=e.hand,i=e.handNo,s=e.isBlackJack,o=e.isHandTurn,d=e.isMultiHand,u=e.isPlayerTurn,l=e.playerNo,p=n.a.useMemo((function(){return u&&(!d||d&&o)?function(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?w(r,!0).forEach((function(a){Object(c.a)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}({},j,{color:b.a[700]}):E}),[u,d,o]),m=t.weight||0;return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{variant:"h4",style:p},s&&"".concat(m>21?"Bust":"Hand",": ").concat(m)),t.cards.map((function(e,t){var c=r.includes(t);return n.a.createElement(H,{key:e.name+e.suit,cardHandler:a,cardNo:t,dropped:c,handNo:i,name:e.name,playerNo:l,suit:e.suit})})))},T={player:{borderRadius:5,display:"inline-block",margin:10,padding:20},width:{minWidth:"100px"}};function P(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function x(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?P(r,!0).forEach((function(a){Object(c.a)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}var C=function(e){var a=e.betHandler,r=e.cardHandler,t=e.cardsToDiscard,c=e.hideHands,s=e.isBlackJack,d=e.player,l=e.playerNo,m=e.turn,g=!!m&&l===m.player,b=d.hands.length>1,v=!!c&&s&&0!==d.id&&!d.isBot,O=Math.max(Math.min(d.money,5),0),k=Math.max(Math.min(d.money,100),10),H=n.a.useCallback((function(e,r){a&&a(d.id,e,r)}),[a,d.id]),w=g?{background:o.a[200]}:{},j=g?{fontWeight:"bold"}:{fontWeight:"normal"};return"win"===d.status&&(w={background:u.a[300]}),"draw"===d.status&&(w={background:p.a[300]}),"lose"===d.status&&(w={background:f.a[300]}),n.a.createElement(h.a,{style:x({},T.player,{},w)},n.a.createElement(y.a,{variant:"h4",style:x({},j)},"".concat(d.name,": $").concat(d.money)),v&&n.a.createElement(i.a,{max:k,min:O,onChange:H,step:5,style:T.width,value:d.bet}),s&&0!==d.id&&n.a.createElement(y.a,{variant:"h5"},"Bet: $".concat(d.bet)),d.hands.map((function(e,a){var i=!!m&&m.hand===a;return n.a.createElement("div",{key:"hand".concat(a)},!c&&n.a.createElement(D,{cardHandler:r,cardsToDiscard:t,hand:e,handNo:a,isBlackJack:s,isHandTurn:i,isMultiHand:b,isPlayerTurn:g,playerNo:l}))})))},F=function(e){var a=e.betHandler,r=e.cardHandler,t=e.cardsToDiscard,c=e.hideHands,i=e.isBlackJack,s=e.players,o=e.turn;return n.a.createElement(n.a.Fragment,null,s.map((function(e,s){return n.a.createElement(C,{key:"player".concat(s),betHandler:a,cardHandler:r,cardsToDiscard:t,hideHands:c,isBlackJack:i,player:e,playerNo:s,turn:o})})))},N=r(683),S={margin:12},B=Object(t.memo)((function(e){var a=e.func,r=e.name;return n.a.createElement(N.a,{color:"primary",onClick:a,style:S,variant:"contained"},r)})),G=function(e){var a=e.gameFunctions;return n.a.createElement("div",null,a.map((function(e){return n.a.createElement(B,{key:e.name,func:e.func,name:e.name})})))},J=function(e){var a=e.betHandler,r=e.cardClickHandler,t=e.cardsToDiscard,c=e.gameFunctions,i=e.gameOver,s=e.hideHands,o=e.isBlackJack,d=e.players,u=e.turn,l=n.a.useMemo((function(){return d.slice(0,u.player+1)}),[d,u.player]),p=n.a.useMemo((function(){return d.slice(u.player+1)}),[d,u.player]),m=n.a.useMemo((function(){return s||!1!==i?d:d.slice(u.player,u.player+1)}),[s,i,d,u.player]);return n.a.createElement(n.a.Fragment,null,o&&!s?n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{players:l,betHandler:a,cardHandler:r,cardsToDiscard:t,hideHands:s,isBlackJack:o,turn:u}),n.a.createElement(G,{gameFunctions:c}),n.a.createElement(F,{players:p,betHandler:a,cardHandler:r,cardsToDiscard:t,hideHands:s,isBlackJack:o,turn:{player:-1,hand:-1}})):n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{players:m,betHandler:a,cardHandler:r,cardsToDiscard:t,hideHands:s,isBlackJack:o,turn:u}),n.a.createElement(G,{gameFunctions:c})))};J.defaultProps={isBlackJack:!0,hideHands:!1,gameOver:!1,cardsToDiscard:[]};var A=J;a.a=A},724:function(e,a,r){"use strict";r.r(a);var t=r(14),n=r.n(t),c=r(23),i=r(49),s=r(50),o=r(54),d=r(51),u=r(53),l=r(0),p=r.n(l),m=r(688),f=r(29),y=r(16),h=r(62),g=r(56),b=r(64),v=r(293),O=r(18),k=0,H=5,w=function(e){function a(e){var r;return Object(i.a)(this,a),(r=Object(o.a)(this,Object(d.a)(a).call(this,e))).setNewGameRedux=function(){var e=r.props,a=e.turnActions,t=e.playerActions,n=e.players;a.resetTurn(),n.forEach((function(e){return t.resetStatus(e.id)}))},r.getNewGameState=function(){return{gameFunctions:[{name:"Start Game",func:r.startGame}],cardsToDiscard:[],hideHands:!0,gameOver:!1}},r.getHand=function(){var e=r.props,a=e.turn;return e.players[a.player].hands[0].cards||null},r.getHistogram=function(e){var a=[0,0,0,0,0,0,0,0,0,0,0,0,0];return e.forEach((function(e){a[(e.weight||2)-2]+=1})),a},r.newGame=function(){r.setNewGameRedux(),r.setState(r.getNewGameState())},r.startGame=function(){r.setState({gameFunctions:[{name:"Discard Cards",func:r.handleDiscard}],hideHands:!1}),r.dealHands()},r.endTurn=function(){r.props.turnActions.incrPlayerTurn(),r.setState({gameFunctions:[{name:"Discard Cards",func:r.handleDiscard}],cardsToDiscard:[]})},r.endGame=function(){var e=r.props,a=e.players,t=e.playerActions,n={val:0,id:0};a.forEach((function(e){if(!(e.id===k||e.id>H)){var a=parseInt(r.evaluate(e.hands[0].cards),14);a>n.val&&(n={val:a,id:e.id})}})),a.forEach((function(e){e.id===k||e.id>H||(e.id===n.id?t.payout(e.id,"win",20):t.payout(e.id,"lose",-5))})),r.setState({gameFunctions:[{name:"New Game",func:r.newGame}],gameOver:!0})},r.rankHand=function(e,a){if(a.includes(4))return 7;var r=a.includes(3),t=a.indexOf(2),n=-1!==t;if(r&&n)return 6;if(r)return 3;if(n&&a.includes(2,t+1))return 2;if(n)return 1;for(var c=a.lastIndexOf(1)-a.indexOf(1)===4||a[12]&&a[0]&&a[1]&&a[2]&&a[3],i=!0,s=0;s<e.length;s+=1)if(e[s].suit!==e[0].suit){i=!1;break}return c&&i?8:i?5:c?4:0},r.discard=function(e){var a=r.props,t=a.turn,n=a.playerActions,c=a.players[t.player],i=c.id,s=c.hands;n.swapCards(s,i,e)},r.handleDiscard=function(){var e=r.state.cardsToDiscard;r.discard(e),r.setState({gameFunctions:[{name:"End Turn",func:r.endTurn}],cardsToDiscard:[]})},r.discardHelper=function(e,a){for(var t=r.getHand(),n=[],c=[a.indexOf(1)],i=1;i<e;i+=1)c[i]=a.indexOf(1,c[i-1]+1);for(var s=0;s<t.length;s+=1)for(var o=0;o<c.length;o+=1)if(t[s].weight-2===c[o]){n.push(s);break}r.discard(n)},r.computer=function(){var e=r.getHand(),a=r.getHistogram(e);switch(r.rankHand(e,a)){case 0:a.lastIndexOf(1)>=11?r.discardHelper(4,a):r.discard([0,1,2,3,4]);break;case 1:r.discardHelper(3,a);break;case 2:case 3:r.discardHelper(1,a)}r.endTurn()},r.cardClickHandler=function(e,a,t){var n=r.state.cardsToDiscard,c=n.indexOf(t);-1===c?n.push(t):n.splice(c,1),r.setState({cardsToDiscard:n})},r.evaluate=function(e){for(var a=r.getHistogram(e),t=r.rankHand(e,a),n=["0","0","0","0","0"],c=0,i=4,s=0,o=-1;c<5;){var d=a.indexOf(i,o+1);-1===d?(i-=1,o=-1):(n[s]=d.toString(14),s+=1,c+=i,o=d)}return"".concat(t).concat(n.reduce((function(e,a){return"".concat(e).concat(a)})))},r.dealHands=function(){var e=r.props,a=e.playerActions,t=e.players;O.a.shuffle().then((function(){Object(h.a)(t,function(){var e=Object(c.a)(n.a.mark((function e(r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.id!==k&&r.id<=H)){e.next=3;break}return e.next=3,a.newHand(r.id,5);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}))},r.setNewGameRedux(),r.state=r.getNewGameState(),r}return Object(u.a)(a,e),Object(s.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.props,a=e.players,r=e.turn,t=this.state,n=t.hideHands,c=t.gameOver,i=a[r.player],s=i.id!==k&&i.id<=H;n||c||!i.isBot||(s?this.computer():this.endGame())}},{key:"render",value:function(){var e=this.props,a=e.turn,r=e.players,t=this.state,n=t.cardsToDiscard,c=t.gameFunctions,i=t.gameOver,s=t.hideHands;return p.a.createElement(p.a.Fragment,null,p.a.createElement(m.a,{variant:"h2",gutterBottom:!0},"5 Card Draw Poker"),p.a.createElement(v.a,{cardClickHandler:this.cardClickHandler,cardsToDiscard:n,gameFunctions:c,gameOver:i,hideHands:s,isBlackJack:!1,players:r,turn:a}))}}]),a}(l.Component);var j=Object(f.b)((function(e){return{turn:e.turn,players:e.players}}),(function(e){return{turnActions:Object(y.bindActionCreators)({incrPlayerTurn:b.c,resetTurn:b.d},e),playerActions:Object(y.bindActionCreators)({swapCards:g.g,newHand:g.c,payout:g.d,resetStatus:g.e},e)}}))(w);a.default=j}}]);
//# sourceMappingURL=g_poker.6255d9f7.chunk.js.map